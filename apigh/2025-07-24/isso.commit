{
  "sha": "d9fadd22d584c1d1f3a9037f0411ed57ef933d56",
  "node_id": "C_kwDOAF-mA9oAKGQ5ZmFkZDIyZDU4NGMxZDFmM2E5MDM3ZjA0MTFlZDU3ZWY5MzNkNTY",
  "commit": {
    "author": {
      "name": "Jelmer Vernooĳ",
      "email": "jelmer@apache.org",
      "date": "2025-07-18T07:44:13Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2025-07-18T07:44:13Z"
    },
    "message": "Merge pull request #1058 from pkvach/fix/new-api-title-parameter\n\nDocument title parameter and improve error handling for /new API",
    "tree": {
      "sha": "9507d46fc374360750c19a0ac689977ef91a0617",
      "url": "https://api.github.com/repos/isso-comments/isso/git/trees/9507d46fc374360750c19a0ac689977ef91a0617"
    },
    "url": "https://api.github.com/repos/isso-comments/isso/git/commits/d9fadd22d584c1d1f3a9037f0411ed57ef933d56",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsFcBAABCAAQBQJoeftNCRC1aQ7uu5UhlAAATSEQAGN/oTlce0nhYRFKw6bQo26s\nwHer7MQ/AmosCjMq6qzXPFPvBFGO/9WyXACHof1Lc/UQ9OVrxYX6bi8saoDyV8zY\nW/XU5G6kGIeMPMTw/zF6prraoeAmo6o81NUonC7FR8xUum2rPOTGNpRuXwbH/z3p\n+h8d9Vg+nkvQfCS8o3KvQfPh06uMq9bo4xKKYAXdd6+NIvcHTXRFQAGeRglRr1JN\nvZPQO7ayWKSntM9lasIWxql45dysmdadeWaZXWdCDqEZK6RrgXMFXQDL6+zTjspr\nWBCt4QVycey7/s5My82eBIP7Nvti5wQkUL3Cyg18GmNQxEOemR/ZE4PVGgAgSeLN\nRvmII1RE7FMAZBswv5g5HiTagK5ZUhefXzMSbziYWez1glvP0tFccwJq3U9IGsOP\nh/2vkL8vv+gtuwvpRUmHAn0nJFa5vFoVD7+GtxERsLxBgkZwyxcgK9TLmpMwlA5J\nIaONKm6F0JCDibLM/XL76UqBGkk9lFdiRn03FdCkh27cyieh1XjNoeeadzeewZ5B\n7rpEsTV5ecz6Rlp3Q6gc+E42+WxK4Q4k5N2FgO9hRmmRmb+nBodpyBEt3BYTBqm/\no46D8TlNidRK6avlpn7OQ8oK3o6pC3Q6axenINI/ymvxGLnvhl837ojieFPpWeE3\nTo85V2V9JGxs6b6acwsZ\n=vQwj\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 9507d46fc374360750c19a0ac689977ef91a0617\nparent 8deaebc505569a5e16a4247ea069e0b8f888f6d6\nparent ca7b15e806e23762efd87d0590143e7dd89a62b8\nauthor Jelmer Vernooĳ <jelmer@apache.org> 1752824653 +0100\ncommitter GitHub <noreply@github.com> 1752824653 +0100\n\nMerge pull request #1058 from pkvach/fix/new-api-title-parameter\n\nDocument title parameter and improve error handling for /new API",
      "verified_at": "2025-07-18T07:44:14Z"
    }
  },
  "url": "https://api.github.com/repos/isso-comments/isso/commits/d9fadd22d584c1d1f3a9037f0411ed57ef933d56",
  "html_url": "https://github.com/isso-comments/isso/commit/d9fadd22d584c1d1f3a9037f0411ed57ef933d56",
  "comments_url": "https://api.github.com/repos/isso-comments/isso/commits/d9fadd22d584c1d1f3a9037f0411ed57ef933d56/comments",
  "author": {
    "login": "jelmer",
    "id": 49032,
    "node_id": "MDQ6VXNlcjQ5MDMy",
    "avatar_url": "https://avatars.githubusercontent.com/u/49032?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jelmer",
    "html_url": "https://github.com/jelmer",
    "followers_url": "https://api.github.com/users/jelmer/followers",
    "following_url": "https://api.github.com/users/jelmer/following{/other_user}",
    "gists_url": "https://api.github.com/users/jelmer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jelmer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jelmer/subscriptions",
    "organizations_url": "https://api.github.com/users/jelmer/orgs",
    "repos_url": "https://api.github.com/users/jelmer/repos",
    "events_url": "https://api.github.com/users/jelmer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jelmer/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8deaebc505569a5e16a4247ea069e0b8f888f6d6",
      "url": "https://api.github.com/repos/isso-comments/isso/commits/8deaebc505569a5e16a4247ea069e0b8f888f6d6",
      "html_url": "https://github.com/isso-comments/isso/commit/8deaebc505569a5e16a4247ea069e0b8f888f6d6"
    },
    {
      "sha": "ca7b15e806e23762efd87d0590143e7dd89a62b8",
      "url": "https://api.github.com/repos/isso-comments/isso/commits/ca7b15e806e23762efd87d0590143e7dd89a62b8",
      "html_url": "https://github.com/isso-comments/isso/commit/ca7b15e806e23762efd87d0590143e7dd89a62b8"
    }
  ],
  "stats": {
    "total": 6,
    "additions": 5,
    "deletions": 1
  },
  "files": [
    {
      "sha": "377eb0424d7e72e2ce3a2e7322273ea256d740b7",
      "filename": "CHANGES.rst",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/isso-comments/isso/blob/d9fadd22d584c1d1f3a9037f0411ed57ef933d56/CHANGES.rst",
      "raw_url": "https://github.com/isso-comments/isso/raw/d9fadd22d584c1d1f3a9037f0411ed57ef933d56/CHANGES.rst",
      "contents_url": "https://api.github.com/repos/isso-comments/isso/contents/CHANGES.rst?ref=d9fadd22d584c1d1f3a9037f0411ed57ef933d56",
      "patch": "@@ -56,6 +56,7 @@ Bugfixes & Improvements\n - Make 'text' field in 'comments' table NOT NULL and handling data migration (`#1019`_, pkvach)\n - Python 3.12 support (`#1015`_, ix5)\n - Disable Postbox submit button on click, enable after response (`#993`_, pkvach)\n+- Document title parameter and improve error handling for /new API (`#1058`_, pkvach)\n \n .. _#951: https://github.com/posativ/isso/pull/951\n .. _#967: https://github.com/posativ/isso/pull/967\n@@ -70,6 +71,7 @@ Bugfixes & Improvements\n .. _#1019: https://github.com/isso-comments/isso/pull/1019\n .. _#1015: https://github.com/isso-comments/isso/pull/1015\n .. _#993: https://github.com/isso-comments/isso/pull/993\n+.. _#1058: https://github.com/isso-comments/isso/pull/1058\n \n 0.13.1.dev0 (2023-02-05)\n ------------------------"
    },
    {
      "sha": "80fee5d9efc087528baba43947771fe00e03d7a4",
      "filename": "isso/views/comments.py",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/isso-comments/isso/blob/d9fadd22d584c1d1f3a9037f0411ed57ef933d56/isso%2Fviews%2Fcomments.py",
      "raw_url": "https://github.com/isso-comments/isso/raw/d9fadd22d584c1d1f3a9037f0411ed57ef933d56/isso%2Fviews%2Fcomments.py",
      "contents_url": "https://api.github.com/repos/isso-comments/isso/contents/isso%2Fviews%2Fcomments.py?ref=d9fadd22d584c1d1f3a9037f0411ed57ef933d56",
      "patch": "@@ -293,6 +293,8 @@ def verify(cls, comment):\n         The comment’s author’s website’s url. Must be Django-conform, i.e. either `http(s)://example.com/foo` or `example.com/`\n     @apiBody {Number} [parent]\n         The parent comment’s id if the new comment is a response to an existing comment.\n+    @apiBody {String} [title]\n+        The title of the thread. Required when creating the first comment for a new thread if the title cannot be automatically fetched from the URI.\n \n     @apiExample {curl} Create a reply to comment with id 15:\n         curl 'https://comments.example.com/new?uri=/thread/' -d '{\"text\": \"Stop saying that! *isso*!\", \"author\": \"Max Rant\", \"email\": \"rant@example.com\", \"parent\": 15}' -H 'Content-Type: application/json' -c cookie.txt\n@@ -350,7 +352,7 @@ def new(self, environ, request, uri):\n                         if resp and resp.status == 200:\n                             uri, title = parse.thread(resp.read(), id=uri)\n                         else:\n-                            return NotFound(f'URI {uri} does not exist')\n+                            return BadRequest(f'Cannot create new thread: URI {uri} is not accessible and no title was provided. Please provide a title parameter in your request.')\n                 else:\n                     title = data['title']\n "
    }
  ]
}
