{
  "sha": "fed83263e2415bfb4e796106d4f71ed368bd671a",
  "node_id": "C_kwDOCQOkhNoAKGZlZDgzMjYzZTI0MTViZmI0ZTc5NjEwNmQ0ZjcxZWQzNjhiZDY3MWE",
  "commit": {
    "author": {
      "name": "qwqcode",
      "email": "22412567+qwqcode@users.noreply.github.com",
      "date": "2023-11-03T02:39:56Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2023-11-03T02:39:56Z"
    },
    "message": "fix(notify_pusher): panic when admin ids array is empty (#634)",
    "tree": {
      "sha": "e37ec05fdc5c3968b02f7c1c134ac433beb94069",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/trees/e37ec05fdc5c3968b02f7c1c134ac433beb94069"
    },
    "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/commits/fed83263e2415bfb4e796106d4f71ed368bd671a",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJlRF18CRBK7hj4Ov3rIwAACVMIAHgyWbT6Lj1MK+HTVhjxNXhm\nu+BI95qAUQ6zD8KULoq8iTe5zp3Mz1XKN9DAWjWB+sEnZuwY7EcRKLlx508sbYZj\nFrhwCyAjQuUsqLdUU20fu/VmiB16wcrDPBrobcgSAEta6nUrp4Ez33IeMjS1B7mb\nEpxoj8ZTOSUIJzDiKhCzb7g6OvfVxT5k3FgOKNfyXP4UGyqIxs4NzftgjW7W8Y8A\n849nTX9ucqgwl/Obgl8oYIfEhnY5aAK884A+Z3gw3YfVg6fZbkyj2rTd/IuCFqvm\n0rAJqgvCRsw/5+IM6YmytN8Qkc9J0LZj2nbyH4tNEsqUjyWci9hDz44fUQezhfc=\n=e4iF\n-----END PGP SIGNATURE-----\n",
      "payload": "tree e37ec05fdc5c3968b02f7c1c134ac433beb94069\nparent 9dc2d834860dd1e5c98bae62c8e4a4a31e4ea005\nauthor qwqcode <22412567+qwqcode@users.noreply.github.com> 1698979196 +0800\ncommitter GitHub <noreply@github.com> 1698979196 +0800\n\nfix(notify_pusher): panic when admin ids array is empty (#634)\n\n"
    }
  },
  "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/fed83263e2415bfb4e796106d4f71ed368bd671a",
  "html_url": "https://github.com/ArtalkJS/Artalk/commit/fed83263e2415bfb4e796106d4f71ed368bd671a",
  "comments_url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/fed83263e2415bfb4e796106d4f71ed368bd671a/comments",
  "author": {
    "login": "qwqcode",
    "id": 22412567,
    "node_id": "MDQ6VXNlcjIyNDEyNTY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qwqcode",
    "html_url": "https://github.com/qwqcode",
    "followers_url": "https://api.github.com/users/qwqcode/followers",
    "following_url": "https://api.github.com/users/qwqcode/following{/other_user}",
    "gists_url": "https://api.github.com/users/qwqcode/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qwqcode/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qwqcode/subscriptions",
    "organizations_url": "https://api.github.com/users/qwqcode/orgs",
    "repos_url": "https://api.github.com/users/qwqcode/repos",
    "events_url": "https://api.github.com/users/qwqcode/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qwqcode/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9dc2d834860dd1e5c98bae62c8e4a4a31e4ea005",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/9dc2d834860dd1e5c98bae62c8e4a4a31e4ea005",
      "html_url": "https://github.com/ArtalkJS/Artalk/commit/9dc2d834860dd1e5c98bae62c8e4a4a31e4ea005"
    }
  ],
  "stats": {
    "total": 8,
    "additions": 7,
    "deletions": 1
  },
  "files": [
    {
      "sha": "e7ef9a7aeaadbcc0c4eac604e55e9226799c68f4",
      "filename": "internal/notify_pusher/multi.go",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/fed83263e2415bfb4e796106d4f71ed368bd671a/internal%2Fnotify_pusher%2Fmulti.go",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/fed83263e2415bfb4e796106d4f71ed368bd671a/internal%2Fnotify_pusher%2Fmulti.go",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/internal%2Fnotify_pusher%2Fmulti.go?ref=fed83263e2415bfb4e796106d4f71ed368bd671a",
      "patch": "@@ -16,7 +16,13 @@ func (pusher *NotifyPusher) multiPush(comment *entity.Comment, pComment *entity.\n \t}\n \n \t// 通知消息\n-\tfirstAdminUser := pusher.dao.GetAllAdminIDs()[0]\n+\tallAdmins := pusher.dao.GetAllAdminIDs()\n+\tif len(allAdmins) == 0 {\n+\t\tlog.Warn(\"Multi push disabled: no admin user found\")\n+\t\treturn\n+\t}\n+\n+\tfirstAdminUser := allAdmins[0]\n \tsubject, body := pusher.getAdminNotifySubjectBody(comment, firstAdminUser)\n \n \tlog.Debug(time.Now(), \" 多元推送\")"
    }
  ]
}
