{
  "sha": "fbd1cd984d428d3577809456606d38f33e54b939",
  "node_id": "C_kwDOCQOkhNoAKGZiZDFjZDk4NGQ0MjhkMzU3NzgwOTQ1NjYwNmQzOGYzM2U1NGI5Mzk",
  "commit": {
    "author": {
      "name": "qwqcode",
      "email": "qwqcode@gmail.com",
      "date": "2024-04-27T11:57:09Z"
    },
    "committer": {
      "name": "qwqcode",
      "email": "qwqcode@gmail.com",
      "date": "2024-04-27T11:57:09Z"
    },
    "message": "fix(ui/dark_mode): add support for configuring dark mode in backend (#790)",
    "tree": {
      "sha": "dca68647835612bf42aa6d639825e4aba7617120",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/trees/dca68647835612bf42aa6d639825e4aba7617120"
    },
    "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/commits/fbd1cd984d428d3577809456606d38f33e54b939",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYIAB0WIQS0Ev3sdPZbHkWwzmLUbg8O6nwTagUCZizoFQAKCRDUbg8O6nwT\nahUtAP0RTTVdbkkokfvm8f/N4AZ/3BmqasF196FoZWIe6b18NAD+KmPsRKY8x8xJ\nUdQ/bZOHzgCXB8XlScYvKDG2KrooeA0=\n=SMPb\n-----END PGP SIGNATURE-----",
      "payload": "tree dca68647835612bf42aa6d639825e4aba7617120\nparent accd10cef43a187d2e2c30e4db4852a62df6c0c6\nauthor qwqcode <qwqcode@gmail.com> 1714219029 +0800\ncommitter qwqcode <qwqcode@gmail.com> 1714219029 +0800\n\nfix(ui/dark_mode): add support for configuring dark mode in backend (#790)\n"
    }
  },
  "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/fbd1cd984d428d3577809456606d38f33e54b939",
  "html_url": "https://github.com/ArtalkJS/Artalk/commit/fbd1cd984d428d3577809456606d38f33e54b939",
  "comments_url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/fbd1cd984d428d3577809456606d38f33e54b939/comments",
  "author": {
    "login": "qwqcode",
    "id": 22412567,
    "node_id": "MDQ6VXNlcjIyNDEyNTY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qwqcode",
    "html_url": "https://github.com/qwqcode",
    "followers_url": "https://api.github.com/users/qwqcode/followers",
    "following_url": "https://api.github.com/users/qwqcode/following{/other_user}",
    "gists_url": "https://api.github.com/users/qwqcode/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qwqcode/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qwqcode/subscriptions",
    "organizations_url": "https://api.github.com/users/qwqcode/orgs",
    "repos_url": "https://api.github.com/users/qwqcode/repos",
    "events_url": "https://api.github.com/users/qwqcode/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qwqcode/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "qwqcode",
    "id": 22412567,
    "node_id": "MDQ6VXNlcjIyNDEyNTY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qwqcode",
    "html_url": "https://github.com/qwqcode",
    "followers_url": "https://api.github.com/users/qwqcode/followers",
    "following_url": "https://api.github.com/users/qwqcode/following{/other_user}",
    "gists_url": "https://api.github.com/users/qwqcode/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qwqcode/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qwqcode/subscriptions",
    "organizations_url": "https://api.github.com/users/qwqcode/orgs",
    "repos_url": "https://api.github.com/users/qwqcode/repos",
    "events_url": "https://api.github.com/users/qwqcode/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qwqcode/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "accd10cef43a187d2e2c30e4db4852a62df6c0c6",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/accd10cef43a187d2e2c30e4db4852a62df6c0c6",
      "html_url": "https://github.com/ArtalkJS/Artalk/commit/accd10cef43a187d2e2c30e4db4852a62df6c0c6"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 7,
    "deletions": 8
  },
  "files": [
    {
      "sha": "43e7742063c13ba73397b014e5a6201c30a990a7",
      "filename": "conf/artalk.example.simple.yml",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/fbd1cd984d428d3577809456606d38f33e54b939/conf%2Fartalk.example.simple.yml",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/fbd1cd984d428d3577809456606d38f33e54b939/conf%2Fartalk.example.simple.yml",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/conf%2Fartalk.example.simple.yml?ref=fbd1cd984d428d3577809456606d38f33e54b939",
      "patch": "@@ -157,6 +157,7 @@ frontend:\n   countEl: \"#ArtalkCount\"\n   preview: true\n   flatMode: auto\n+  darkMode: inherit\n   nestMax: 2\n   nestSort: DATE_ASC\n   gravatar:"
    },
    {
      "sha": "903fa73a8c81a1ce35caf9b70b3da29b0cc67acd",
      "filename": "conf/artalk.example.yml",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/fbd1cd984d428d3577809456606d38f33e54b939/conf%2Fartalk.example.yml",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/fbd1cd984d428d3577809456606d38f33e54b939/conf%2Fartalk.example.yml",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/conf%2Fartalk.example.yml?ref=fbd1cd984d428d3577809456606d38f33e54b939",
      "patch": "@@ -310,6 +310,8 @@ frontend:\n   preview: true\n   # Flatten mode [\"auto\", true, false]\n   flatMode: auto\n+  # Dark mode [\"inherit\", \"auto\"]\n+  darkMode: inherit\n   # Maximum nesting level\n   nestMax: 2\n   # Nesting comment sorting rules [\"DATE_ASC\", \"DATE_DESC\", \"VOTE_UP_DESC\"]"
    },
    {
      "sha": "5ef287e2ba68353b8aee1bf86c192193fbb4198a",
      "filename": "conf/artalk.example.zh-CN.yml",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/fbd1cd984d428d3577809456606d38f33e54b939/conf%2Fartalk.example.zh-CN.yml",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/fbd1cd984d428d3577809456606d38f33e54b939/conf%2Fartalk.example.zh-CN.yml",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/conf%2Fartalk.example.zh-CN.yml?ref=fbd1cd984d428d3577809456606d38f33e54b939",
      "patch": "@@ -315,6 +315,8 @@ frontend:\n   preview: true\n   # 平铺模式 [\"auto\", true, false]\n   flatMode: auto\n+  # 夜间模式 [\"inherit\", \"auto\"]\n+  darkMode: inherit\n   # 最大嵌套层数\n   nestMax: 2\n   # 嵌套评论排序规则 [\"DATE_ASC\", \"DATE_DESC\", \"VOTE_UP_DESC\"]"
    },
    {
      "sha": "d74b9a557ad1b6cd30e5295f67ada21d6ff7b98d",
      "filename": "ui/artalk/src/config.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 8,
      "changes": 10,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/fbd1cd984d428d3577809456606d38f33e54b939/ui%2Fartalk%2Fsrc%2Fconfig.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/fbd1cd984d428d3577809456606d38f33e54b939/ui%2Fartalk%2Fsrc%2Fconfig.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fconfig.ts?ref=fbd1cd984d428d3577809456606d38f33e54b939",
      "patch": "@@ -60,16 +60,10 @@ export function handelCustomConf(customConf: Partial<ArtalkConfig>, full = false\n  * @returns The config for Artalk instance creation\n  */\n export function handleConfFormServer(conf: Partial<ArtalkConfig>) {\n-  const DisabledKeys: (keyof ArtalkConfig)[] = [\n-    'el',\n-    'pageKey',\n-    'pageTitle',\n-    'server',\n-    'site',\n-    'darkMode',\n-  ]\n+  const DisabledKeys: (keyof ArtalkConfig)[] = ['el', 'pageKey', 'pageTitle', 'server', 'site']\n   Object.keys(conf).forEach((k) => {\n     if (DisabledKeys.includes(k as any)) delete conf[k]\n+    if (k === 'darkMode' && conf[k] !== 'auto') delete conf[k]\n   })\n \n   // Patch: `emoticons` config string to json"
    }
  ]
}
