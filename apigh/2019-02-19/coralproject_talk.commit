{
  "sha": "8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6ODE2M2I1MjMwMTVhYTcwZGI1YzViN2M3MTVhNjA0ZTVlNWRjZmNmYQ==",
  "commit": {
    "author": {
      "name": "Gerardo Gálvez",
      "email": "galvezgerardo01@gmail.com",
      "date": "2019-02-13T19:08:22Z"
    },
    "committer": {
      "name": "Kiwi",
      "email": "vinh@wikiwi.io",
      "date": "2019-02-13T19:08:22Z"
    },
    "message": "Flag users as \"Always premoderate\" (#2145)\n\n* Flag users as \"Always premoderate\"\r\n\r\nStatus can be set using the action dropdown in the People tab and in User Details.\r\nUsers flagged as \"Always premoderate\" will have their comments sent to the premod queue.\r\nUsers can be filtered with the Always Premoderate status.\r\nInclude Always Premoderate status changes in User History.\r\nAdd spanish translations.\r\n\r\n* Reorder CSS as per cvle's suggestion\r\n\r\n* Address second comment",
    "tree": {
      "sha": "19facb3443f8d61ab98f1daf9fab53b730185aef",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/19facb3443f8d61ab98f1daf9fab53b730185aef"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
  "html_url": "https://github.com/coralproject/talk/commit/8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/comments",
  "author": {
    "login": "gerardogalvez",
    "id": 8509232,
    "node_id": "MDQ6VXNlcjg1MDkyMzI=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/8509232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gerardogalvez",
    "html_url": "https://github.com/gerardogalvez",
    "followers_url": "https://api.github.com/users/gerardogalvez/followers",
    "following_url": "https://api.github.com/users/gerardogalvez/following{/other_user}",
    "gists_url": "https://api.github.com/users/gerardogalvez/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gerardogalvez/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gerardogalvez/subscriptions",
    "organizations_url": "https://api.github.com/users/gerardogalvez/orgs",
    "repos_url": "https://api.github.com/users/gerardogalvez/repos",
    "events_url": "https://api.github.com/users/gerardogalvez/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gerardogalvez/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "cvle",
    "id": 14221600,
    "node_id": "MDQ6VXNlcjE0MjIxNjAw",
    "avatar_url": "https://avatars2.githubusercontent.com/u/14221600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cvle",
    "html_url": "https://github.com/cvle",
    "followers_url": "https://api.github.com/users/cvle/followers",
    "following_url": "https://api.github.com/users/cvle/following{/other_user}",
    "gists_url": "https://api.github.com/users/cvle/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cvle/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cvle/subscriptions",
    "organizations_url": "https://api.github.com/users/cvle/orgs",
    "repos_url": "https://api.github.com/users/cvle/repos",
    "events_url": "https://api.github.com/users/cvle/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cvle/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "19b425dc1a142f3c5f7408b05e8abeae2360e978",
      "url": "https://api.github.com/repos/coralproject/talk/commits/19b425dc1a142f3c5f7408b05e8abeae2360e978",
      "html_url": "https://github.com/coralproject/talk/commit/19b425dc1a142f3c5f7408b05e8abeae2360e978"
    }
  ],
  "stats": {
    "total": 721,
    "additions": 714,
    "deletions": 7
  },
  "files": [
    {
      "sha": "3e8bc7741027ac0b2d1987bbd0e28685951b0614",
      "filename": "bin/cli-users",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/bin/cli-users",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/bin/cli-users",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/bin/cli-users?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -105,7 +105,8 @@ function printUserAsTable(user) {\n       Suspension: user.suspended\n         ? `Until ${user.status.suspension.until}`\n         : false,\n-    }\n+    },\n+    { 'Always premod comments': user.alwaysPremod }\n   );\n \n   console.log(table.toString());"
    },
    {
      "sha": "5c5cfe7b854d9e76f387fc7219bdb12ce7150dc1",
      "filename": "client/coral-admin/src/actions/alwaysPremodUserDialog.js",
      "status": "added",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/actions/alwaysPremodUserDialog.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/actions/alwaysPremodUserDialog.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/actions/alwaysPremodUserDialog.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -0,0 +1,14 @@\n+import {\n+  SHOW_ALWAYS_PREMOD_USER_DIALOG,\n+  HIDE_ALWAYS_PREMOD_USER_DIALOG,\n+} from '../constants/alwaysPremodUserDialog.js';\n+\n+export const showAlwaysPremodUserDialog = ({ userId, username }) => ({\n+  type: SHOW_ALWAYS_PREMOD_USER_DIALOG,\n+  userId,\n+  username,\n+});\n+\n+export const hideAlwaysPremodUserDialog = () => ({\n+  type: HIDE_ALWAYS_PREMOD_USER_DIALOG,\n+});"
    },
    {
      "sha": "f3bd6301ee5bdabcf1c6a6ae015abed3cb2bb1db",
      "filename": "client/coral-admin/src/actions/community.js",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/actions/community.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/actions/community.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/actions/community.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -9,6 +9,8 @@ import {\n   SET_SEARCH_VALUE,\n   SHOW_BANUSER_DIALOG,\n   HIDE_BANUSER_DIALOG,\n+  SHOW_ALWAYS_PREMOD_USER_DIALOG,\n+  HIDE_ALWAYS_PREMOD_USER_DIALOG,\n   SHOW_REJECT_USERNAME_DIALOG,\n   HIDE_REJECT_USERNAME_DIALOG,\n   SET_INDICATOR_TRACK,\n@@ -61,6 +63,15 @@ export const setSearchValue = value => ({\n export const showBanUserDialog = user => ({ type: SHOW_BANUSER_DIALOG, user });\n export const hideBanUserDialog = () => ({ type: HIDE_BANUSER_DIALOG });\n \n+// Always premod User Dialog\n+export const showAlwaysPremodUserDialog = user => ({\n+  type: SHOW_ALWAYS_PREMOD_USER_DIALOG,\n+  user,\n+});\n+export const hideAlwaysPremodUserDialog = () => ({\n+  type: HIDE_ALWAYS_PREMOD_USER_DIALOG,\n+});\n+\n // Reject Username Dialog\n export const showRejectUsernameDialog = user => ({\n   type: SHOW_REJECT_USERNAME_DIALOG,"
    },
    {
      "sha": "5bf1beeb79634af509a8074f969ebfe98cd3e5d7",
      "filename": "client/coral-admin/src/components/AlwaysPremodUserDialog.css",
      "status": "added",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/AlwaysPremodUserDialog.css",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/AlwaysPremodUserDialog.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/components/AlwaysPremodUserDialog.css?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -0,0 +1,29 @@\n+.dialog {\n+  border: none;\n+  box-shadow: 0 9px 46px 8px rgba(0, 0, 0, 0.14), 0 11px 15px -7px rgba(0, 0, 0, 0.12), 0 24px 38px 3px rgba(0, 0, 0, 0.2);\n+  width: 400px;\n+  top: 50%;\n+  transform: translateY(-50%);\n+  padding: 20px;\n+  border-radius: 4px;\n+}\n+\n+.header {\n+  color: black;\n+  font-size: 1.5em;\n+  font-weight: 500;\n+  margin: 0 0 8px 0;\n+}\n+\n+.subheader {\n+  color: black;\n+  font-size: 1.3em;\n+  font-weight: 500;\n+  margin: 0 0 8px 0;\n+}\n+\n+.buttons {\n+  margin-top: 8px;\n+  margin-bottom: 6px;\n+  text-align: right;\n+}"
    },
    {
      "sha": "7d01d6259aa1ee91fc0a5b823d45ab36f6940397",
      "filename": "client/coral-admin/src/components/AlwaysPremodUserDialog.js",
      "status": "added",
      "additions": 68,
      "deletions": 0,
      "changes": 68,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/AlwaysPremodUserDialog.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/AlwaysPremodUserDialog.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/components/AlwaysPremodUserDialog.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -0,0 +1,68 @@\n+import React from 'react';\n+import cn from 'classnames';\n+import PropTypes from 'prop-types';\n+import { Dialog } from 'coral-ui';\n+import styles from './AlwaysPremodUserDialog.css';\n+\n+import Button from 'coral-ui/components/Button';\n+import t from 'coral-framework/services/i18n';\n+\n+class AlwaysPremodUserDialog extends React.Component {\n+  handlePerform = () => {\n+    this.props.onPerform();\n+  };\n+\n+  render() {\n+    const { open, onCancel, username, info } = this.props;\n+    return (\n+      <Dialog\n+        className={cn(styles.dialog, 'talk-always-premod-user-dialog')}\n+        id=\"alwaysPremodUserDialog\"\n+        open={open}\n+        onCancel={onCancel}\n+        title={t('alwayspremoddialog.always_premod_user')}\n+      >\n+        <span className={styles.close} onClick={onCancel}>\n+          ×\n+        </span>\n+        <section>\n+          <h2 className={styles.header}>\n+            {t('alwayspremoddialog.always_premod_user')}\n+          </h2>\n+          <h3 className={styles.subheader}>\n+            {t('alwayspremoddialog.are_you_sure', username)}\n+          </h3>\n+          <p className={styles.description}>{info}</p>\n+          <div className={styles.buttons}>\n+            <Button\n+              className={cn('talk-always-premod-user-dialog-button-cancel')}\n+              cStyle=\"white\"\n+              onClick={onCancel}\n+              raised\n+            >\n+              {t('alwayspremoddialog.cancel')}\n+            </Button>\n+            <Button\n+              className={cn('talk-always-premod-user-dialog-button-confirm')}\n+              cStyle=\"black\"\n+              onClick={this.handlePerform}\n+              raised\n+            >\n+              {t('alwayspremoddialog.yes_always_premod_user')}\n+            </Button>\n+          </div>\n+        </section>\n+      </Dialog>\n+    );\n+  }\n+}\n+\n+AlwaysPremodUserDialog.propTypes = {\n+  open: PropTypes.bool,\n+  onPerform: PropTypes.func.isRequired,\n+  onCancel: PropTypes.func.isRequired,\n+  username: PropTypes.string,\n+  info: PropTypes.string,\n+};\n+\n+export default AlwaysPremodUserDialog;"
    },
    {
      "sha": "eb379c00f4cef843658d13699d881747d7be90b7",
      "filename": "client/coral-admin/src/components/UserDetail.css",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/UserDetail.css",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/UserDetail.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/components/UserDetail.css?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -137,6 +137,12 @@\n   display: inline-block;\n }\n \n+.actionsMenuAlwaysPremod {\n+  background-color: #F0B50B;\n+  border-color: #F0B50B;\n+  color: white;\n+}\n+\n .actionsMenuSuspended {\n   background-color: #F29336;\n   border-color: #F29336;"
    },
    {
      "sha": "f6806915d70fd162e69bc55b7f290250471aa7b0",
      "filename": "client/coral-admin/src/components/UserDetail.js",
      "status": "modified",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/UserDetail.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/UserDetail.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/components/UserDetail.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -12,6 +12,7 @@ import {\n   isUsernameRejected,\n   isUsernameChanged,\n   isBanned,\n+  isAlwaysPremod,\n   getKarma,\n } from 'coral-framework/utils/user';\n \n@@ -45,6 +46,7 @@ function getUserStatusArray(user) {\n   const statusMap = {\n     suspended: isSuspended,\n     banned: isBanned,\n+    alwaysPremod: isAlwaysPremod,\n     usernameRejected: isUsernameRejected,\n     usernameChanged: isUsernameChanged,\n   };\n@@ -68,6 +70,12 @@ class UserDetail extends React.Component {\n       username: this.props.root.user.username,\n     });\n \n+  showAlwaysPremodUserDialog = () =>\n+    this.props.showAlwaysPremodUserDialog({\n+      userId: this.props.root.user.id,\n+      username: this.props.root.user.username,\n+    });\n+\n   showRejectUsernameDialog = () =>\n     this.props.showRejectUsernameDialog({\n       userId: this.props.root.user.id,\n@@ -107,6 +115,8 @@ class UserDetail extends React.Component {\n           return t('user_detail.suspended');\n         case 'banned':\n           return t('user_detail.banned');\n+        case 'alwaysPremod':\n+          return t('user_detail.always_premoded');\n         case 'usernameRejected':\n           return (\n             <span>\n@@ -153,6 +163,7 @@ class UserDetail extends React.Component {\n       toggleSelectAll,\n       unbanUser,\n       unsuspendUser,\n+      removeAlwaysPremodUser,\n       modal,\n       acceptComment,\n       rejectComment,\n@@ -169,6 +180,7 @@ class UserDetail extends React.Component {\n \n     const banned = isBanned(user);\n     const suspended = isSuspended(user);\n+    const alwaysPremod = isAlwaysPremod(user);\n     const usernameRejected = isUsernameRejected(user);\n     const usernameChanged = isUsernameChanged(user);\n \n@@ -200,6 +212,7 @@ class UserDetail extends React.Component {\n                 {\n                   [styles.actionsMenuSuspended]: suspended,\n                   [styles.actionsMenuBanned]: banned,\n+                  [styles.actionsMenuAlwaysPremod]: alwaysPremod,\n                 },\n                 'talk-admin-user-detail-actions-button'\n               )}\n@@ -231,6 +244,21 @@ class UserDetail extends React.Component {\n                 </ActionsMenuItem>\n               )}\n \n+              {alwaysPremod ? (\n+                <ActionsMenuItem\n+                  onClick={() => removeAlwaysPremodUser({ id: user.id })}\n+                >\n+                  {t('user_detail.remove_always_premod')}\n+                </ActionsMenuItem>\n+              ) : (\n+                <ActionsMenuItem\n+                  disabled={me.id === user.id}\n+                  onClick={this.showAlwaysPremodUserDialog}\n+                >\n+                  {t('user_detail.always_premod')}\n+                </ActionsMenuItem>\n+              )}\n+\n               {usernameChanged && (\n                 <ActionsMenuItem onClick={this.goToReportedUsernames}>\n                   {t('user_detail.username_needs_approval')}\n@@ -476,8 +504,10 @@ UserDetail.propTypes = {\n   showRejectUsernameDialog: PropTypes.func,\n   showSuspendUserDialog: PropTypes.func,\n   showBanUserDialog: PropTypes.func,\n+  showAlwaysPremodUserDialog: PropTypes.func,\n   unbanUser: PropTypes.func.isRequired,\n   unsuspendUser: PropTypes.func.isRequired,\n+  removeAlwaysPremodUser: PropTypes.func.isRequired,\n   modal: PropTypes.bool,\n   rejectUsername: PropTypes.func.isRequired,\n };"
    },
    {
      "sha": "fb797c1cd8c77f8904cc7ee6861b1ccee1919090",
      "filename": "client/coral-admin/src/components/UserHistory.js",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/UserHistory.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/components/UserHistory.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/components/UserHistory.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -48,6 +48,10 @@ const buildActionResponse = (typename, created_at, until, status) => {\n       return status\n         ? t('user_history.user_banned')\n         : t('user_history.ban_removed');\n+    case 'AlwaysPremodStatusHistory':\n+      return status\n+        ? t('user_history.user_always_premoded')\n+        : t('user_history.always_premod_removed');\n     case 'SuspensionStatusHistory':\n       return until\n         ? t('user_history.suspended', readableDuration(created_at, until))"
    },
    {
      "sha": "0728bbc43d716543c4732b280ec4a693d7c9e960",
      "filename": "client/coral-admin/src/constants/alwaysPremodUserDialog.js",
      "status": "added",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/constants/alwaysPremodUserDialog.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/constants/alwaysPremodUserDialog.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/constants/alwaysPremodUserDialog.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -0,0 +1,2 @@\n+export const SHOW_ALWAYS_PREMOD_USER_DIALOG = 'SHOW_ALWAYS_PREMOD_USER_DIALOG';\n+export const HIDE_ALWAYS_PREMOD_USER_DIALOG = 'HIDE_ALWAYS_PREMOD_USER_DIALOG';"
    },
    {
      "sha": "b47ec04557ce4df4d25b11bf3d00f9e0c1bfbdb3",
      "filename": "client/coral-admin/src/constants/community.js",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/constants/community.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/constants/community.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/constants/community.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -14,6 +14,9 @@ export const FETCH_FLAGGED_COMMENTERS_FAILURE = `${prefix}_FETCH_FLAGGED_COMMENT\n export const SHOW_BANUSER_DIALOG = `${prefix}_SHOW_BANUSER_DIALOG`;\n export const HIDE_BANUSER_DIALOG = `${prefix}_HIDE_BANUSER_DIALOG`;\n \n+export const SHOW_ALWAYS_PREMOD_USER_DIALOG = `${prefix}_SHOW_ALWAYS_PREMOD_USER_DIALOG`;\n+export const HIDE_ALWAYS_PREMOD_USER_DIALOG = `${prefix}_HIDE_ALWAYS_PREMOD_USER_DIALOG`;\n+\n export const SHOW_REJECT_USERNAME_DIALOG = `${prefix}_SHOW_REJECT_USERNAME_DIALOG`;\n export const HIDE_REJECT_USERNAME_DIALOG = `${prefix}_HIDE_REJECT_USERNAME_DIALOG`;\n "
    },
    {
      "sha": "e6e195810a3b3f5e141c256cb6c275752247012f",
      "filename": "client/coral-admin/src/containers/AlwaysPremodUserDialog.js",
      "status": "added",
      "additions": 66,
      "deletions": 0,
      "changes": 66,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/containers/AlwaysPremodUserDialog.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/containers/AlwaysPremodUserDialog.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/containers/AlwaysPremodUserDialog.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -0,0 +1,66 @@\n+import React, { Component } from 'react';\n+import PropTypes from 'prop-types';\n+import { connect } from 'react-redux';\n+import { bindActionCreators } from 'redux';\n+import AlwaysPremodUserDialog from '../components/AlwaysPremodUserDialog';\n+import { hideAlwaysPremodUserDialog } from '../actions/alwaysPremodUserDialog';\n+import { withAlwaysPremodUser } from 'coral-framework/graphql/mutations';\n+import { compose } from 'react-apollo';\n+import t from 'coral-framework/services/i18n';\n+\n+class AlwaysPremodUserDialogContainer extends Component {\n+  alwaysPremodUser = async () => {\n+    const { userId, alwaysPremodUser, hideAlwaysPremodUserDialog } = this.props;\n+    await alwaysPremodUser({ id: userId });\n+    hideAlwaysPremodUserDialog();\n+  };\n+\n+  getInfo() {\n+    let note = t('alwayspremoddialog.note_always_premod_user');\n+    return t('alwayspremoddialog.note', note);\n+  }\n+\n+  render() {\n+    return (\n+      <AlwaysPremodUserDialog\n+        open={this.props.open}\n+        onPerform={this.alwaysPremodUser}\n+        onCancel={this.props.hideAlwaysPremodUserDialog}\n+        username={this.props.username}\n+        info={this.getInfo()}\n+      />\n+    );\n+  }\n+}\n+\n+AlwaysPremodUserDialogContainer.propTypes = {\n+  alwaysPremodUser: PropTypes.func.isRequired,\n+  hideAlwaysPremodUserDialog: PropTypes.func,\n+  open: PropTypes.bool,\n+  username: PropTypes.string,\n+};\n+\n+const mapStateToProps = ({\n+  alwaysPremodUserDialog: { open, userId, username },\n+}) => ({\n+  open,\n+  userId,\n+  username,\n+});\n+\n+const mapDispatchToProps = dispatch => ({\n+  ...bindActionCreators(\n+    {\n+      hideAlwaysPremodUserDialog,\n+    },\n+    dispatch\n+  ),\n+});\n+\n+export default compose(\n+  connect(\n+    mapStateToProps,\n+    mapDispatchToProps\n+  ),\n+  withAlwaysPremodUser\n+)(AlwaysPremodUserDialogContainer);"
    },
    {
      "sha": "10e4666f80f653b5cb72db5285b8988793146d91",
      "filename": "client/coral-admin/src/containers/Layout.js",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/containers/Layout.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/containers/Layout.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/containers/Layout.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -5,6 +5,7 @@ import Layout from '../components/Layout';\n import Login from '../containers/Login';\n import { FullLoading } from '../components/FullLoading';\n import BanUserDialog from './BanUserDialog';\n+import AlwaysPremodUserDialog from './AlwaysPremodUserDialog';\n import SuspendUserDialog from './SuspendUserDialog';\n import RejectUsernameDialog from './RejectUsernameDialog';\n import { toggleModal as toggleShortcutModal } from '../actions/moderation';\n@@ -40,6 +41,7 @@ class LayoutContainer extends React.Component {\n             toggleShortcutModal={toggleShortcutModal}\n             currentUser={this.props.currentUser}\n           >\n+            <AlwaysPremodUserDialog />\n             <BanUserDialog />\n             <SuspendUserDialog />\n             <RejectUsernameDialog />"
    },
    {
      "sha": "7053f6c0b65e3d43cb48cc0b2295b9b909afb4aa",
      "filename": "client/coral-admin/src/containers/UserDetail.js",
      "status": "modified",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/containers/UserDetail.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/containers/UserDetail.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/containers/UserDetail.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -22,12 +22,14 @@ import {\n   withSetCommentStatus,\n   withUnbanUser,\n   withUnsuspendUser,\n+  withRemoveAlwaysPremodUser,\n   withRejectUsername,\n   withPostFlag,\n } from 'coral-framework/graphql/mutations';\n import UserDetailComment from './UserDetailComment';\n import update from 'immutability-helper';\n import { showBanUserDialog } from 'actions/banUserDialog';\n+import { showAlwaysPremodUserDialog } from 'actions/alwaysPremodUserDialog';\n import { showSuspendUserDialog } from 'actions/suspendUserDialog';\n import { showRejectUsernameDialog } from 'actions/rejectUsernameDialog';\n \n@@ -153,6 +155,7 @@ UserDetailContainer.propTypes = {\n   selectedCommentIds: PropTypes.array,\n   unbanUser: PropTypes.func.isRequired,\n   unsuspendUser: PropTypes.func.isRequired,\n+  removeAlwaysPremodUser: PropTypes.func.isRequired,\n   rejectUsername: PropTypes.func.isRequired,\n   userId: PropTypes.string,\n };\n@@ -218,6 +221,17 @@ export const withUserDetailQuery = withQuery(\n               created_at\n             }\n           }\n+          alwaysPremod {\n+            status\n+            history {\n+              status\n+              assigned_by {\n+                id\n+                username\n+              }\n+              created_at\n+            }\n+          },\n           username {\n             status\n             history {\n@@ -280,6 +294,7 @@ const mapDispatchToProps = dispatch => ({\n   ...bindActionCreators(\n     {\n       showBanUserDialog,\n+      showAlwaysPremodUserDialog,\n       showSuspendUserDialog,\n       showRejectUsernameDialog,\n       changeTab,\n@@ -302,6 +317,7 @@ export default compose(\n   withSetCommentStatus,\n   withUnbanUser,\n   withUnsuspendUser,\n+  withRemoveAlwaysPremodUser,\n   withRejectUsername,\n   withPostFlag,\n   withRouter"
    },
    {
      "sha": "11eea3d180f9837d9134890bfc4455dedb5e0229",
      "filename": "client/coral-admin/src/graphql/index.js",
      "status": "modified",
      "additions": 78,
      "deletions": 0,
      "changes": 78,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/graphql/index.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/graphql/index.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/graphql/index.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -10,6 +10,9 @@ const userStatusFragment = gql`\n         banned {\n           status\n         }\n+        alwaysPremod {\n+          status\n+        }\n         suspension {\n           until\n         }\n@@ -125,6 +128,64 @@ export default {\n         });\n       },\n     }),\n+    AlwaysPremodUser: ({\n+      variables: {\n+        input: { id },\n+      },\n+    }) => ({\n+      update: proxy => {\n+        const fragmentId = `User_${id}`;\n+        const data = proxy.readFragment({\n+          fragment: userStatusFragment,\n+          id: fragmentId,\n+        });\n+\n+        const updated = update(data, {\n+          state: {\n+            status: {\n+              alwaysPremod: {\n+                status: { $set: true },\n+              },\n+            },\n+          },\n+        });\n+\n+        proxy.writeFragment({\n+          fragment: userStatusFragment,\n+          id: fragmentId,\n+          data: updated,\n+        });\n+      },\n+    }),\n+    RemoveAlwaysPremodUser: ({\n+      variables: {\n+        input: { id },\n+      },\n+    }) => ({\n+      update: proxy => {\n+        const fragmentId = `User_${id}`;\n+        const data = proxy.readFragment({\n+          fragment: userStatusFragment,\n+          id: fragmentId,\n+        });\n+\n+        const updated = update(data, {\n+          state: {\n+            status: {\n+              alwaysPremod: {\n+                status: { $set: false },\n+              },\n+            },\n+          },\n+        });\n+\n+        proxy.writeFragment({\n+          fragment: userStatusFragment,\n+          id: fragmentId,\n+          data: updated,\n+        });\n+      },\n+    }),\n     BanUser: ({\n       variables: {\n         input: { id },\n@@ -154,6 +215,23 @@ export default {\n         });\n       },\n     }),\n+    SetUserAlwaysPremodStatus: ({ variables: { status, id } }) => ({\n+      updateQueries: {\n+        TalkAdmin_Community: prev => {\n+          if (!status) {\n+            return prev;\n+          }\n+          const updated = update(prev, {\n+            users: {\n+              nodes: {\n+                $apply: nodes => nodes.filter(node => node.id !== id),\n+              },\n+            },\n+          });\n+          return updated;\n+        },\n+      },\n+    }),\n     UnbanUser: ({\n       variables: {\n         input: { id },"
    },
    {
      "sha": "a5da4c54ba36f8817bb656e096403fa622e3c7b5",
      "filename": "client/coral-admin/src/reducers/alwaysPremodUserDialog.js",
      "status": "added",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/reducers/alwaysPremodUserDialog.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/reducers/alwaysPremodUserDialog.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/reducers/alwaysPremodUserDialog.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -0,0 +1,29 @@\n+import {\n+  SHOW_ALWAYS_PREMOD_USER_DIALOG,\n+  HIDE_ALWAYS_PREMOD_USER_DIALOG,\n+} from '../constants/alwaysPremodUserDialog';\n+\n+const initialState = {\n+  open: false,\n+  userId: null,\n+  username: '',\n+};\n+\n+export default function alwaysPremodUserDialog(state = initialState, action) {\n+  switch (action.type) {\n+    case SHOW_ALWAYS_PREMOD_USER_DIALOG:\n+      return {\n+        ...state,\n+        open: true,\n+        userId: action.userId,\n+        username: action.username,\n+      };\n+    case HIDE_ALWAYS_PREMOD_USER_DIALOG:\n+      return {\n+        ...state,\n+        open: false,\n+      };\n+    default:\n+      return state;\n+  }\n+}"
    },
    {
      "sha": "cded519439bdab8ddee7076f8ee2489dabff7de2",
      "filename": "client/coral-admin/src/reducers/index.js",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/reducers/index.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/reducers/index.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/reducers/index.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -5,6 +5,7 @@ import moderation from './moderation';\n import install from './install';\n import banUserDialog from './banUserDialog';\n import suspendUserDialog from './suspendUserDialog';\n+import alwaysPremodUserDialog from './alwaysPremodUserDialog';\n import rejectUsernameDialog from './rejectUsernameDialog';\n import userDetail from './userDetail';\n import ui from './ui';\n@@ -14,6 +15,7 @@ export default {\n   banUserDialog,\n   configure,\n   suspendUserDialog,\n+  alwaysPremodUserDialog,\n   userDetail,\n   stories,\n   community,"
    },
    {
      "sha": "263ae4ddd2127aff51bab44016d8b9210983aab9",
      "filename": "client/coral-admin/src/reducers/ui.js",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/reducers/ui.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/reducers/ui.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/reducers/ui.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -6,6 +6,10 @@ import {\n   SHOW_SUSPEND_USER_DIALOG,\n   HIDE_SUSPEND_USER_DIALOG,\n } from '../constants/suspendUserDialog';\n+import {\n+  SHOW_ALWAYS_PREMOD_USER_DIALOG,\n+  HIDE_ALWAYS_PREMOD_USER_DIALOG,\n+} from '../constants/alwaysPremodUserDialog';\n \n const initialState = {\n   modal: false,\n@@ -23,6 +27,11 @@ export default function config(state = initialState, action) {\n         ...state,\n         modal: true,\n       };\n+    case SHOW_ALWAYS_PREMOD_USER_DIALOG:\n+      return {\n+        ...state,\n+        modal: true,\n+      };\n     case HIDE_BAN_USER_DIALOG:\n       return {\n         ...state,\n@@ -33,6 +42,11 @@ export default function config(state = initialState, action) {\n         ...state,\n         modal: false,\n       };\n+    case HIDE_ALWAYS_PREMOD_USER_DIALOG:\n+      return {\n+        ...state,\n+        modal: false,\n+      };\n     default:\n       return state;\n   }"
    },
    {
      "sha": "4b7cfd4a8c617f3dfad3541a05b735647f9cd26d",
      "filename": "client/coral-admin/src/routes/Community/components/People.css",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/routes/Community/components/People.css",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/routes/Community/components/People.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/routes/Community/components/People.css?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -130,6 +130,12 @@ th.header:nth-child(2), th.header:nth-child(3) {\n   font-size: 0.98em;\n }\n \n+.actionsMenuAlwaysPremod {\n+  background-color: #F0B50B;\n+  border-color: #F0B50B;\n+  color: white;\n+}\n+\n .actionsMenuSuspended {\n   background-color: #F29336;\n   border-color: #F29336;"
    },
    {
      "sha": "cbcb74bc9e9f75fa9523bad417d0b8c8533095ec",
      "filename": "client/coral-admin/src/routes/Community/components/People.js",
      "status": "modified",
      "additions": 42,
      "deletions": 1,
      "changes": 43,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/routes/Community/components/People.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/routes/Community/components/People.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/routes/Community/components/People.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -8,7 +8,11 @@ import LoadMore from '../../../components/LoadMore';\n import PropTypes from 'prop-types';\n import ActionsMenu from 'coral-admin/src/components/ActionsMenu';\n import ActionsMenuItem from 'coral-admin/src/components/ActionsMenuItem';\n-import { isSuspended, isBanned } from 'coral-framework/utils/user';\n+import {\n+  isSuspended,\n+  isBanned,\n+  isAlwaysPremod,\n+} from 'coral-framework/utils/user';\n import { RadioGroup, Radio } from 'react-mdl';\n import moment from 'moment';\n import {\n@@ -43,6 +47,8 @@ class People extends React.Component {\n       return 'Banned';\n     } else if (isSuspended(user)) {\n       return 'Suspended';\n+    } else if (isAlwaysPremod(user)) {\n+      return 'Always premoderated';\n     }\n     return '';\n   };\n@@ -55,6 +61,10 @@ class People extends React.Component {\n     this.props.unbanUser(input);\n   };\n \n+  removeAlwaysPremodUser = input => {\n+    this.props.removeAlwaysPremodUser(input);\n+  };\n+\n   showBanUserDialog = input => {\n     this.props.showBanUserDialog(input);\n   };\n@@ -63,6 +73,10 @@ class People extends React.Component {\n     this.props.showSuspendUserDialog(input);\n   };\n \n+  showAlwaysPremodUserDialog = input => {\n+    this.props.showAlwaysPremodUserDialog(input);\n+  };\n+\n   render() {\n     const {\n       onFilterChange,\n@@ -109,6 +123,7 @@ class People extends React.Component {\n             <Radio value=\"active\">{t('community.active')}</Radio>\n             <Radio value=\"suspended\">{t('community.suspended')}</Radio>\n             <Radio value=\"banned\">{t('community.banned')}</Radio>\n+            <Radio value=\"alwaysPremod\">{t('community.always_premod')}</Radio>\n           </RadioGroup>\n           <div className={styles.filterDetail}>\n             {t('community.filter_role')}\n@@ -188,6 +203,9 @@ class People extends React.Component {\n                                   user\n                                 ),\n                                 [styles.actionsMenuBanned]: isBanned(user),\n+                                [styles.actionsMenuAlwaysPremod]: isAlwaysPremod(\n+                                  user\n+                                ),\n                               },\n                               'talk-admin-user-detail-actions-button'\n                             )}\n@@ -232,6 +250,27 @@ class People extends React.Component {\n                                 {t('modqueue.ban_user_actions')}\n                               </ActionsMenuItem>\n                             )}\n+\n+                            {isAlwaysPremod(user) ? (\n+                              <ActionsMenuItem\n+                                onClick={() =>\n+                                  this.removeAlwaysPremodUser({ id: user.id })\n+                                }\n+                              >\n+                                Remove Always Premoderate\n+                              </ActionsMenuItem>\n+                            ) : (\n+                              <ActionsMenuItem\n+                                onClick={() =>\n+                                  this.showAlwaysPremodUserDialog({\n+                                    userId: user.id,\n+                                    username: user.username,\n+                                  })\n+                                }\n+                              >\n+                                {t('modqueue.always_premod_user_actions')}\n+                              </ActionsMenuItem>\n+                            )}\n                           </ActionsMenu>\n                         </td>\n                         <td className=\"mdl-data-table__cell--non-numeric\">\n@@ -294,8 +333,10 @@ People.propTypes = {\n   viewUserDetail: PropTypes.func.isRequired,\n   unbanUser: PropTypes.func.isRequired,\n   unsuspendUser: PropTypes.func.isRequired,\n+  removeAlwaysPremodUser: PropTypes.func.isRequired,\n   showSuspendUserDialog: PropTypes.func,\n   showBanUserDialog: PropTypes.func,\n+  showAlwaysPremodUserDialog: PropTypes.func,\n   loadMore: PropTypes.func.isRequired,\n };\n "
    },
    {
      "sha": "57fb7fa8ef9e37b4b5b642745a616561d24a60c1",
      "filename": "client/coral-admin/src/routes/Community/containers/People.js",
      "status": "modified",
      "additions": 18,
      "deletions": 1,
      "changes": 19,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/routes/Community/containers/People.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-admin/src/routes/Community/containers/People.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/routes/Community/containers/People.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -8,9 +8,11 @@ import {\n   withUnbanUser,\n   withUnsuspendUser,\n   withSetUserRole,\n+  withRemoveAlwaysPremodUser,\n } from 'coral-framework/graphql/mutations';\n import { showBanUserDialog } from 'actions/banUserDialog';\n import { showSuspendUserDialog } from 'actions/suspendUserDialog';\n+import { showAlwaysPremodUserDialog } from 'actions/alwaysPremodUserDialog';\n import { viewUserDetail } from '../../../actions/userDetail';\n import { appendNewNodes } from 'plugin-api/beta/client/utils';\n import update from 'immutability-helper';\n@@ -30,6 +32,7 @@ class PeopleContainer extends React.PureComponent {\n     active: { suspended: false, banned: false },\n     suspended: { suspended: true },\n     banned: { banned: true },\n+    alwaysPremod: { alwaysPremod: true },\n   };\n \n   onFilterChange = filter => e =>\n@@ -40,7 +43,6 @@ class PeopleContainer extends React.PureComponent {\n \n   getFilterState = () => {\n     const { role, status } = this.state;\n-\n     return {\n       status: this.statusToQuery[status] || null,\n       role: role || null,\n@@ -106,8 +108,10 @@ class PeopleContainer extends React.PureComponent {\n         setUserRole={this.props.setUserRole}\n         showSuspendUserDialog={this.props.showSuspendUserDialog}\n         showBanUserDialog={this.props.showBanUserDialog}\n+        showAlwaysPremodUserDialog={this.props.showAlwaysPremodUserDialog}\n         unbanUser={this.props.unbanUser}\n         unsuspendUser={this.props.unsuspendUser}\n+        removeAlwaysPremodUser={this.props.removeAlwaysPremodUser}\n         data={this.props.data}\n         root={this.props.root}\n         users={this.props.root.users}\n@@ -122,9 +126,11 @@ PeopleContainer.propTypes = {\n   setUserRole: PropTypes.func.isRequired,\n   unbanUser: PropTypes.func.isRequired,\n   unsuspendUser: PropTypes.func.isRequired,\n+  removeAlwaysPremodUser: PropTypes.func.isRequired,\n   viewUserDetail: PropTypes.func.isRequired,\n   showSuspendUserDialog: PropTypes.func,\n   showBanUserDialog: PropTypes.func,\n+  showAlwaysPremodUserDialog: PropTypes.func,\n   data: PropTypes.object,\n   root: PropTypes.object,\n };\n@@ -153,6 +159,9 @@ const LOAD_MORE_QUERY = gql`\n             banned {\n               status\n             }\n+            alwaysPremod {\n+              status\n+            }\n             suspension {\n               until\n             }\n@@ -187,6 +196,9 @@ const FILTER_QUERY = gql`\n             banned {\n               status\n             }\n+            alwaysPremod {\n+              status\n+            }\n             suspension {\n               until\n             }\n@@ -203,6 +215,7 @@ const mapDispatchToProps = dispatch =>\n       viewUserDetail,\n       showSuspendUserDialog,\n       showBanUserDialog,\n+      showAlwaysPremodUserDialog,\n     },\n     dispatch\n   );\n@@ -215,6 +228,7 @@ export default compose(\n   withSetUserRole,\n   withUnsuspendUser,\n   withUnbanUser,\n+  withRemoveAlwaysPremodUser,\n   withQuery(\n     gql`\n       query TalkAdmin_Community_People {\n@@ -236,6 +250,9 @@ export default compose(\n                 banned {\n                   status\n                 }\n+                alwaysPremod {\n+                  status\n+                }\n                 suspension {\n                   until\n                 }"
    },
    {
      "sha": "ef7c361a5507c598a3bbdf6d5347d23672ba0ee7",
      "filename": "client/coral-embed-stream/src/containers/Embed.js",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-embed-stream/src/containers/Embed.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-embed-stream/src/containers/Embed.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-embed-stream/src/containers/Embed.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -175,6 +175,9 @@ const USER_BANNED_SUBSCRIPTION = gql`\n           banned {\n             status\n           }\n+          alwaysPremod {\n+            status\n+          }\n           suspension {\n             until\n           }\n@@ -196,6 +199,9 @@ const USER_SUSPENDED_SUBSCRIPTION = gql`\n           banned {\n             status\n           }\n+          alwaysPremod {\n+            status\n+          }\n           suspension {\n             until\n           }\n@@ -217,6 +223,9 @@ const USERNAME_REJECTED_SUBSCRIPTION = gql`\n           banned {\n             status\n           }\n+          alwaysPremod {\n+            status\n+          }\n           suspension {\n             until\n           }\n@@ -253,6 +262,9 @@ const EMBED_QUERY = gql`\n           banned {\n             status\n           }\n+          alwaysPremod {\n+            status\n+          }\n           suspension {\n             until\n           }"
    },
    {
      "sha": "a379e6dbdc208485eeea18861888fef227b69b21",
      "filename": "client/coral-embed-stream/src/tabs/stream/containers/Stream.js",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-embed-stream/src/tabs/stream/containers/Stream.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-embed-stream/src/tabs/stream/containers/Stream.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-embed-stream/src/tabs/stream/containers/Stream.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -398,6 +398,9 @@ const fragments = {\n             banned {\n               status\n             }\n+            alwaysPremod {\n+              status\n+            }\n             suspension {\n               until\n             }"
    },
    {
      "sha": "976776933e4bffef955ee98b4b27ffc92e3266a3",
      "filename": "client/coral-framework/graphql/fragments.js",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-framework/graphql/fragments.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-framework/graphql/fragments.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-framework/graphql/fragments.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -3,6 +3,7 @@ import { createDefaultResponseFragments } from '../utils';\n // fragments defined here are automatically registered.\n export default {\n   ...createDefaultResponseFragments(\n+    'AlwaysPremodUserResponse',\n     'BanUsersResponse',\n     'ChangeUsernameResponse',\n     'CloseAssetResponse',\n@@ -14,6 +15,7 @@ export default {\n     'IgnoreUserResponse',\n     'ModifyTagResponse',\n     'PostFlagResponse',\n+    'RemoveAlwaysPremodUserResponse',\n     'SetCommentStatusResponse',\n     'SetUsernameResponse',\n     'SetUsernameStatusResponse',"
    },
    {
      "sha": "78c04427047c06ec612f82917a0809a293bb6f07",
      "filename": "client/coral-framework/graphql/mutations.js",
      "status": "modified",
      "additions": 42,
      "deletions": 0,
      "changes": 42,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-framework/graphql/mutations.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-framework/graphql/mutations.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-framework/graphql/mutations.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -412,6 +412,48 @@ export const withSetUsername = withMutation(\n   }\n );\n \n+export const withAlwaysPremodUser = withMutation(\n+  gql`\n+    mutation AlwaysPremodUser($input: AlwaysPremodUserInput!) {\n+      alwaysPremodUser(input: $input) {\n+        ...AlwaysPremodUserResponse\n+      }\n+    }\n+  `,\n+  {\n+    props: ({ mutate }) => ({\n+      alwaysPremodUser: input => {\n+        return mutate({\n+          variables: {\n+            input,\n+          },\n+        });\n+      },\n+    }),\n+  }\n+);\n+\n+export const withRemoveAlwaysPremodUser = withMutation(\n+  gql`\n+    mutation RemoveAlwaysPremodUser($input: RemoveAlwaysPremodUserInput!) {\n+      removeAlwaysPremodUser(input: $input) {\n+        ...RemoveAlwaysPremodUserResponse\n+      }\n+    }\n+  `,\n+  {\n+    props: ({ mutate }) => ({\n+      removeAlwaysPremodUser: input => {\n+        return mutate({\n+          variables: {\n+            input,\n+          },\n+        });\n+      },\n+    }),\n+  }\n+);\n+\n export const withBanUser = withMutation(\n   gql`\n     mutation BanUser($input: BanUserInput!) {"
    },
    {
      "sha": "174815bfb263995387c0c85475e7bb3f6314ef14",
      "filename": "client/coral-framework/utils/user.js",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-framework/utils/user.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/client/coral-framework/utils/user.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-framework/utils/user.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -35,6 +35,15 @@ export const isBanned = user => {\n   return get(user, 'state.status.banned.status');\n };\n \n+/**\n+ * isAlwaysPremod\n+ * retrieves boolean based on the user premod status\n+ */\n+\n+export const isAlwaysPremod = user => {\n+  return get(user, 'state.status.alwaysPremod.status');\n+};\n+\n /**\n  * isUsernameRejected\n  * retrieves boolean based on the username status"
    },
    {
      "sha": "cc91af34025f0f2312fa113e97bae00f5bf9b463",
      "filename": "graph/loaders/users.js",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/loaders/users.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/loaders/users.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/graph/loaders/users.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -11,7 +11,7 @@ const mergeState = (query, state) => {\n   }\n \n   if (status) {\n-    const { username, banned, suspended } = status;\n+    const { username, banned, suspended, alwaysPremod } = status;\n \n     if (typeof username !== 'undefined' && username && username.length > 0) {\n       query.merge({\n@@ -27,6 +27,12 @@ const mergeState = (query, state) => {\n       });\n     }\n \n+    if (typeof alwaysPremod !== 'undefined' && alwaysPremod !== null) {\n+      query.merge({\n+        'status.alwaysPremod.status': alwaysPremod,\n+      });\n+    }\n+\n     if (typeof suspended !== 'undefined' && suspended !== null) {\n       if (suspended) {\n         query.merge({"
    },
    {
      "sha": "3732ee0de05b4d76bf06febfb4686ef65b1fa566",
      "filename": "graph/mutators/user.js",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/mutators/user.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/mutators/user.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/graph/mutators/user.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -10,6 +10,7 @@ const {\n   SET_USERNAME,\n   SET_USER_USERNAME_STATUS,\n   SET_USER_BAN_STATUS,\n+  SET_USER_ALWAYS_PREMOD_STATUS,\n   SET_USER_SUSPENSION_STATUS,\n   UPDATE_USER_ROLES,\n   DELETE_OTHER_USER,\n@@ -32,6 +33,13 @@ const setUserBanStatus = async (ctx, id, status = false, message = null) => {\n   }\n };\n \n+const setUserAlwaysPremodStatus = async (ctx, id, status = false) => {\n+  const user = await Users.setAlwaysPremodStatus(id, status, ctx.user.id);\n+  if (user.alwaysPremod) {\n+    ctx.pubsub.publish('userAlwaysPremod', user);\n+  }\n+};\n+\n const setUserSuspensionStatus = async (\n   ctx,\n   id,\n@@ -220,6 +228,7 @@ module.exports = ctx => {\n       setRole: () => Promise.reject(new ErrNotAuthorized()),\n       setUserBanStatus: () => Promise.reject(new ErrNotAuthorized()),\n       setUserSuspensionStatus: () => Promise.reject(new ErrNotAuthorized()),\n+      setUserAlwaysPremodStatus: () => Promise.reject(new ErrNotAuthorized()),\n       setUserUsernameStatus: () => Promise.reject(new ErrNotAuthorized()),\n       setUsername: () => Promise.reject(new ErrNotAuthorized()),\n       stopIgnoringUser: () => Promise.reject(new ErrNotAuthorized()),\n@@ -256,6 +265,11 @@ module.exports = ctx => {\n         setUserBanStatus(ctx, id, status, message);\n     }\n \n+    if (ctx.user.can(SET_USER_ALWAYS_PREMOD_STATUS)) {\n+      mutators.User.setUserAlwaysPremodStatus = (id, status) =>\n+        setUserAlwaysPremodStatus(ctx, id, status);\n+    }\n+\n     if (ctx.user.can(SET_USER_SUSPENSION_STATUS)) {\n       mutators.User.setUserSuspensionStatus = (id, until, message) =>\n         setUserSuspensionStatus(ctx, id, until, message);"
    },
    {
      "sha": "9fccae1d7e598bef507f1752ef520ff6ca639632",
      "filename": "graph/resolvers/always_premod_status_history.js",
      "status": "added",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/resolvers/always_premod_status_history.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/resolvers/always_premod_status_history.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/graph/resolvers/always_premod_status_history.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -0,0 +1,7 @@\n+const { decorateUserField } = require('./util');\n+\n+const AlwaysPremodStatusHistory = {};\n+\n+decorateUserField(AlwaysPremodStatusHistory, 'assigned_by');\n+\n+module.exports = AlwaysPremodStatusHistory;"
    },
    {
      "sha": "7dc9d24c8d95ad072cbe43a86a2110feda749603",
      "filename": "graph/resolvers/index.js",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/resolvers/index.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/resolvers/index.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/graph/resolvers/index.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -3,6 +3,7 @@ const debug = require('debug')('talk:graph:resolvers');\n \n const Action = require('./action');\n const ActionSummary = require('./action_summary');\n+const AlwaysPremodStatusHistory = require('./always_premod_status_history');\n const Asset = require('./asset');\n const AssetActionSummary = require('./asset_action_summary');\n const BannedStatusHistory = require('./banned_status_history');\n@@ -37,6 +38,7 @@ const plugins = require('../../services/plugins');\n let resolvers = {\n   Action,\n   ActionSummary,\n+  AlwaysPremodStatusHistory,\n   Asset,\n   AssetActionSummary,\n   BannedStatusHistory,"
    },
    {
      "sha": "6572cdca2ba2a2c429dc6d457cf87dd19ef946f6",
      "filename": "graph/resolvers/root_mutation.js",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/resolvers/root_mutation.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/resolvers/root_mutation.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/graph/resolvers/root_mutation.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -74,6 +74,16 @@ const RootMutation = {\n   unbanUser: async (obj, { input: { id } }, { mutators: { User } }) => {\n     await User.setUserBanStatus(id, false);\n   },\n+  alwaysPremodUser: async (obj, { input: { id } }, { mutators: { User } }) => {\n+    await User.setUserAlwaysPremodStatus(id, true);\n+  },\n+  removeAlwaysPremodUser: async (\n+    obj,\n+    { input: { id } },\n+    { mutators: { User } }\n+  ) => {\n+    await User.setUserAlwaysPremodStatus(id, false);\n+  },\n   ignoreUser: async (_, { id }, { mutators: { User } }) => {\n     await User.ignoreUser({ id });\n   },"
    },
    {
      "sha": "d1f2ca5a5c040a0f8bc5e16de85c21fe4a2dee55",
      "filename": "graph/typeDefs.graphql",
      "status": "modified",
      "additions": 42,
      "deletions": 0,
      "changes": 42,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/typeDefs.graphql",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/graph/typeDefs.graphql",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/graph/typeDefs.graphql?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -142,6 +142,10 @@ input UserStatusInput {\n   # suspended will restrict the returned users to only those that are, or are not\n   # suspended. If not provided, no filtering will be performed.\n   suspended: Boolean\n+\n+  # alwaysPremod will restrict the returned users to only those that are, or are not\n+  # marked as always premoderate. If not provided, no filtering will be performed.\n+  alwaysPremod: Boolean\n }\n \n type UsernameStatusHistory {\n@@ -166,6 +170,17 @@ type BannedStatus {\n   history: [BannedStatusHistory!]\n }\n \n+type AlwaysPremodStatusHistory {\n+  status: Boolean!\n+  assigned_by: User\n+  created_at: Date!\n+}\n+\n+type AlwaysPremodStatus {\n+  status: Boolean!\n+  history: [AlwaysPremodStatusHistory!]\n+}\n+\n type SuspensionStatusHistory {\n   until: Date\n   assigned_by: User\n@@ -184,6 +199,9 @@ type UserStatus {\n   # banned is the bool that determines if the user is banned or not.\n   banned: BannedStatus!\n \n+  # alwaysPremod is the bool that determines if the user comments are always pushed to the premod queue or not\n+  alwaysPremod: AlwaysPremodStatus!\n+\n   # suspension is the date that the user is suspended until.\n   suspension: SuspensionStatus!\n }\n@@ -1446,6 +1464,22 @@ type UnbanUserResponse implements Response {\n   errors: [UserError!]\n }\n \n+input AlwaysPremodUserInput {\n+  id: ID!\n+}\n+\n+input RemoveAlwaysPremodUserInput {\n+  id: ID!\n+}\n+\n+type AlwaysPremodUserResponse implements Response {\n+  errors: [UserError!]\n+}\n+\n+type RemoveAlwaysPremodUserResponse implements Response {\n+  errors: [UserError!]\n+}\n+\n input SuspendUserInput {\n   id: ID!\n   message: String!\n@@ -1545,6 +1579,14 @@ type RootMutation {\n   # Mutation is restricted.\n   unsuspendUser(input: UnsuspendUserInput!): UnsuspendUserResponse\n \n+  # Sets the always premod status on a given user. Requires the `MODERATOR` role.\n+  # Mutation is restricted.\n+  alwaysPremodUser(input: AlwaysPremodUserInput!): AlwaysPremodUserResponse\n+\n+  # Sets the always premod status on a given user. Requires the `MODERATOR` role.\n+  # Mutation is restricted.\n+  removeAlwaysPremodUser(input: RemoveAlwaysPremodUserInput!): RemoveAlwaysPremodUserResponse\n+\n   # Sets the ban status on a given user. Requires the `MODERATOR` role.\n   # Mutation is restricted.\n   banUser(input: BanUserInput!): BanUsersResponse"
    },
    {
      "sha": "dc5653ed169a78bb984148572c48eaa9d0c6710e",
      "filename": "locales/en.yml",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/locales/en.yml",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/locales/en.yml",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/locales/en.yml?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -3,6 +3,13 @@ en:\n     sort_comments: 'Sort Comments'\n     view_options: 'View Options'\n   already_flagged_username: 'You have already flagged this username.'\n+  alwayspremoddialog:\n+    are_you_sure: 'Are you sure you would like to always premoderate {0}?'\n+    always_premod_user: 'Always premoderate user?'\n+    cancel: Cancel\n+    note: 'Note: {0}'\n+    note_always_premod_user: 'Always premoderating this user will place all of their comments in the Pre-Moderate queue.'\n+    yes_always_premod_user: 'Yes, always premoderate user'\n   bandialog:\n     are_you_sure: 'Are you sure you would like to ban {0}?'\n     ban_user: 'Ban User?'\n@@ -64,6 +71,7 @@ en:\n     admin: Administrator\n     ads_marketing: 'This looks like an ad/marketing'\n     all: 'All'\n+    always_premod: 'Always premoderated'\n     are_you_sure: 'Are you sure you would like to ban {0}?'\n     ban_user: 'Ban User?'\n     banned: Banned\n@@ -382,6 +390,7 @@ en:\n     actions: Actions\n     all: all\n     all_streams: 'All Streams'\n+    always_premod_user_actions: 'Always Premod User'\n     approve: Approve\n     approved: Approved\n     ban_user: Ban\n@@ -528,6 +537,8 @@ en:\n     username_flags: 'flags for this username'\n   user_detail:\n     all: All\n+    always_premod: 'Always Premod User'\n+    always_premoded: 'Always premoderated'\n     ban: 'Ban User'\n     banned: Banned\n     email: Email\n@@ -539,6 +550,7 @@ en:\n     reject_rate: 'Reject Rate'\n     reject_username: 'Reject Username'\n     rejected: Rejected\n+    remove_always_premod: 'Remove Always Premoderate'\n     remove_ban: 'Remove Ban'\n     remove_suspension: 'Remove Suspension'\n     suspend: 'Suspend User'\n@@ -552,12 +564,14 @@ en:\n     username_rejected: 'Username rejected'\n   user_history:\n     action: Action\n+    always_premod_removed: 'Always premoderate removed'\n     ban_removed: 'Ban removed'\n     date: Date\n     suspended: 'Suspended, {0}'\n     suspension_removed: 'Suspension removed'\n     system: System\n     taken_by: 'Taken By'\n+    user_always_premoded: 'User always premoderated'\n     user_banned: 'User banned'\n     username_status: 'Username {0}'\n   user_impersonating: 'This user is impersonating'"
    },
    {
      "sha": "57a789510cb86e56f7de2a72b742525ecea62b3e",
      "filename": "locales/es.yml",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/locales/es.yml",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/locales/es.yml",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/locales/es.yml?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -3,6 +3,13 @@ es:\n     sort_comments: 'Ordenar comentarios'\n     view_options: 'Ver opciones'\n   already_flagged_username: 'Usted ya reportó a este usuario.'\n+  alwayspremoddialog:\n+    are_you_sure: '¿Estás seguro que quieres pre-moderar a {0}?'\n+    always_premod_user: '¿Pre-moderar al Usuario?'\n+    cancel: Cancelar\n+    note: 'Nota: {0}'\n+    note_always_premod_user: 'Pre-moderar a un usuario pondrá todos sus comentarios en la fila de Pre-Moderación.'\n+    yes_always_premod_user: 'Sí, pre-moderar al usuario.'\n   bandialog:\n     are_you_sure: '¿Estás seguro que quieres suspender a {0}?'\n     ban_user: '¿Quieres suspender al Usuario?'\n@@ -62,6 +69,7 @@ es:\n     admin: Administrator\n     ads_marketing: 'Esto parece ser un publicidad/acción de comercialización'\n     all: 'Todos'\n+    always_premod: 'Pre-moderado'\n     are_you_sure: '¿Estás seguro que quieres suspender a {0}?'\n     ban_user: '¿Quieres suspender al Usuario?'\n     banned: Suspendido\n@@ -355,6 +363,7 @@ es:\n     actions: Acciones\n     all: todos\n     all_streams: 'Todos los Hilos'\n+    always_premod_user_actions: 'Siempre Pre-moderar Usuario'\n     approve: Aprobar\n     approved: Aprobado\n     ban_user: Bloquear\n@@ -486,12 +495,15 @@ es:\n     username_flags: 'reportes para este nombre de usuario'\n   user_detail:\n     all: Todos\n+    always_premod: 'Siempre pre-moderar usuario'\n+    always_premoded: 'Siempre pre-moderado'\n     ban: 'Bloquear usuario'\n     banned: Baneado\n     email: 'Correo electrónico'\n     member_since: 'Miembro desde'\n     reject_rate: 'Promedio de rechazo'\n     rejected: Rechazado\n+    remove_always_premod: 'Cancelar siempre pre-moderar'\n     remove_ban: 'Cancelar bloqueo'\n     remove_suspension: 'Cancelar suspensión'\n     suspend: 'Suspender usuario'\n@@ -503,12 +515,14 @@ es:\n     username_rejected: 'Usuario rechazado'\n   user_history:\n     action: Acción\n+    always_premod_removed: 'Siempre pre-moderar cancelado'\n     ban_removed: 'Bloqueo cancelado'\n     date: Fecha\n     suspended: 'Suspendido, {0}'\n     suspension_removed: 'Suspensión cancelada'\n     system: Sistema\n     taken_by: 'Está en uso'\n+    user_always_premoded: 'Usuario siempre pre-moderado'\n     user_banned: 'Usuario bloqueado'\n     username_status: 'Nombre de usuario {0}'\n   user_impersonating: 'Este usuario suplanta a alguien'"
    },
    {
      "sha": "d4dca3a1c91aec68edc4fc4fa4d98ca7d43c4da6",
      "filename": "models/schema/user.js",
      "status": "modified",
      "additions": 45,
      "deletions": 0,
      "changes": 45,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/models/schema/user.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/models/schema/user.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/models/schema/user.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -180,6 +180,30 @@ const User = new Schema(\n           },\n         ],\n       },\n+\n+      // alwaysPremod stores the current user premod status as well as the history of\n+      // changes.\n+      alwaysPremod: {\n+        // Status stores the current user premod status.\n+        status: {\n+          type: Boolean,\n+          required: true,\n+          default: false,\n+          index: true,\n+        },\n+        history: [\n+          {\n+            // Status stores the historical premod status.\n+            status: Boolean,\n+\n+            // assigned_by stores the user id of the user who assigned this status.\n+            assigned_by: { type: String, default: null },\n+\n+            // created_at stores the date when this status was assigned.\n+            created_at: { type: Date, default: Date.now },\n+          },\n+        ],\n+      },\n     },\n \n     // IgnoresUsers is an array of user id's that the current user is ignoring.\n@@ -359,6 +383,27 @@ User.virtual('banned')\n     });\n   });\n \n+/**\n+ * alwaysPremod returns true when the user is currently in always premod, and sets the alwaysPremod\n+ * status locally.\n+ */\n+User.virtual('alwaysPremod')\n+  .get(function() {\n+    return this.status.alwaysPremod.status;\n+  })\n+  .set(function(status) {\n+    this.status.alwaysPremod.status = status;\n+\n+    if (!this.status.alwaysPremod.history) {\n+      this.status.alwaysPremod.history = [];\n+    }\n+\n+    this.status.alwaysPremod.history.push({\n+      status,\n+      created_at: new Date(),\n+    });\n+  });\n+\n /**\n  * suspended returns true when the user is currently suspended, and sets the\n  * suspension status locally."
    },
    {
      "sha": "54b92e00b7607de5e0aceb8f423e7aec9d5e4b5d",
      "filename": "perms/constants/mutation.js",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/perms/constants/mutation.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/perms/constants/mutation.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/perms/constants/mutation.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -7,6 +7,7 @@ module.exports = {\n   EDIT_COMMENT: 'EDIT_COMMENT',\n   SET_USER_USERNAME_STATUS: 'SET_USER_USERNAME_STATUS',\n   SET_USER_BAN_STATUS: 'SET_USER_BAN_STATUS',\n+  SET_USER_ALWAYS_PREMOD_STATUS: 'SET_USER_ALWAYS_PREMOD_STATUS',\n   SET_USER_SUSPENSION_STATUS: 'SET_USER_SUSPENSION_STATUS',\n   SET_COMMENT_STATUS: 'SET_COMMENT_STATUS',\n   ADD_COMMENT_TAG: 'ADD_COMMENT_TAG',"
    },
    {
      "sha": "93cb0ab24f88b3d51a551eae1801677570ba2dd9",
      "filename": "perms/reducers/mutation.js",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/perms/reducers/mutation.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/perms/reducers/mutation.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/perms/reducers/mutation.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -47,6 +47,7 @@ module.exports = (user, perm) => {\n     case types.SET_USER_USERNAME_STATUS:\n     case types.SET_USER_BAN_STATUS:\n     case types.SET_USER_SUSPENSION_STATUS:\n+    case types.SET_USER_ALWAYS_PREMOD_STATUS:\n     case types.UPDATE_ASSET_SETTINGS:\n     case types.UPDATE_ASSET_STATUS:\n       return check(user, ['ADMIN', 'MODERATOR']);"
    },
    {
      "sha": "36aba634e5e1e8ab931b87a6acced2153b6232e6",
      "filename": "services/moderation/phases/premod.js",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/services/moderation/phases/premod.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/services/moderation/phases/premod.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/services/moderation/phases/premod.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -9,9 +9,9 @@ module.exports = (\n     },\n   }\n ) => {\n-  // If the settings say that we're in premod mode, then the comment is in\n-  // premod status.\n-  if (moderation === 'PRE') {\n+  // If the settings say that we're in premod mode, or the user is flagged as\n+  // always premod, then the comment is in premod status.\n+  if (moderation === 'PRE' || ctx.user.status.alwaysPremod.status === true) {\n     return {\n       status: 'PREMOD',\n     };"
    },
    {
      "sha": "e85ed67a2a541ad3c67e3d38d6f7f04018834672",
      "filename": "services/users.js",
      "status": "modified",
      "additions": 44,
      "deletions": 0,
      "changes": 44,
      "blob_url": "https://github.com/coralproject/talk/blob/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/services/users.js",
      "raw_url": "https://github.com/coralproject/talk/raw/8163b523015aa70db5c5b7c715a604e5e5dcfcfa/services/users.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/services/users.js?ref=8163b523015aa70db5c5b7c715a604e5e5dcfcfa",
      "patch": "@@ -207,6 +207,50 @@ class Users {\n     return user;\n   }\n \n+  static async setAlwaysPremodStatus(id, status, assignedBy = null) {\n+    let user = await User.findOneAndUpdate(\n+      {\n+        id,\n+        'status.alwaysPremod.status': {\n+          $ne: status,\n+        },\n+      },\n+      {\n+        $set: {\n+          'status.alwaysPremod.status': status,\n+        },\n+        $push: {\n+          'status.alwaysPremod.history': {\n+            status,\n+            assigned_by: assignedBy,\n+            created_at: Date.now(),\n+          },\n+        },\n+      },\n+      {\n+        new: true,\n+        runValidators: true,\n+      }\n+    );\n+\n+    if (!user) {\n+      user = await User.findOne({ id });\n+      if (!user) {\n+        throw new ErrNotFound();\n+      }\n+\n+      if (user.status.alwaysPremod.status === status) {\n+        return user;\n+      }\n+\n+      throw new Error(\n+        'always premod status change edit failed for an unknown reason'\n+      );\n+    }\n+\n+    return user;\n+  }\n+\n   static async setBanStatus(id, status, assignedBy = null, message) {\n     let user = await User.findOneAndUpdate(\n       {"
    }
  ]
}
