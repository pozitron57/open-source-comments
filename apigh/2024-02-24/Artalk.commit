{
  "sha": "c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
  "node_id": "C_kwDOCQOkhNoAKGM5NGEzNGZmZDdlMDY0OGI2NTJhMTMzZTZkYWU0YjVmMTFmNTkyMGQ",
  "commit": {
    "author": {
      "name": "qwqcode",
      "email": "qwqcode@gmail.com",
      "date": "2024-02-16T11:36:06Z"
    },
    "committer": {
      "name": "qwqcode",
      "email": "qwqcode@gmail.com",
      "date": "2024-02-16T11:43:35Z"
    },
    "message": "feat(comment): add `is_verified` field for comment entity",
    "tree": {
      "sha": "89be0da1459e8fd43cedfa5907f3e3dc5d70815a",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/trees/89be0da1459e8fd43cedfa5907f3e3dc5d70815a"
    },
    "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/commits/c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYIAB0WIQS0Ev3sdPZbHkWwzmLUbg8O6nwTagUCZc9KaAAKCRDUbg8O6nwT\nakqyAQDeSYYlTx+/qZO8QGTMckqaEVFlssmSbg9QEUKfHlZNVgD7BcakDnLiBAAu\nGAKqta1qG2vjfIVYWD9YNxyYKKM5FwU=\n=ygK9\n-----END PGP SIGNATURE-----",
      "payload": "tree 89be0da1459e8fd43cedfa5907f3e3dc5d70815a\nparent 50b49448b6e0c6eca283d334f660ee70b7996d63\nauthor qwqcode <qwqcode@gmail.com> 1708083366 +0800\ncommitter qwqcode <qwqcode@gmail.com> 1708083815 +0800\n\nfeat(comment): add `is_verified` field for comment entity\n"
    }
  },
  "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
  "html_url": "https://github.com/ArtalkJS/Artalk/commit/c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
  "comments_url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/comments",
  "author": {
    "login": "qwqcode",
    "id": 22412567,
    "node_id": "MDQ6VXNlcjIyNDEyNTY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qwqcode",
    "html_url": "https://github.com/qwqcode",
    "followers_url": "https://api.github.com/users/qwqcode/followers",
    "following_url": "https://api.github.com/users/qwqcode/following{/other_user}",
    "gists_url": "https://api.github.com/users/qwqcode/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qwqcode/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qwqcode/subscriptions",
    "organizations_url": "https://api.github.com/users/qwqcode/orgs",
    "repos_url": "https://api.github.com/users/qwqcode/repos",
    "events_url": "https://api.github.com/users/qwqcode/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qwqcode/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "qwqcode",
    "id": 22412567,
    "node_id": "MDQ6VXNlcjIyNDEyNTY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qwqcode",
    "html_url": "https://github.com/qwqcode",
    "followers_url": "https://api.github.com/users/qwqcode/followers",
    "following_url": "https://api.github.com/users/qwqcode/following{/other_user}",
    "gists_url": "https://api.github.com/users/qwqcode/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qwqcode/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qwqcode/subscriptions",
    "organizations_url": "https://api.github.com/users/qwqcode/orgs",
    "repos_url": "https://api.github.com/users/qwqcode/repos",
    "events_url": "https://api.github.com/users/qwqcode/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qwqcode/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "50b49448b6e0c6eca283d334f660ee70b7996d63",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/50b49448b6e0c6eca283d334f660ee70b7996d63",
      "html_url": "https://github.com/ArtalkJS/Artalk/commit/50b49448b6e0c6eca283d334f660ee70b7996d63"
    }
  ],
  "stats": {
    "total": 37,
    "additions": 32,
    "deletions": 5
  },
  "files": [
    {
      "sha": "668ec8180211610fdac67046298583dee2a37fa0",
      "filename": "conf/artalk.example.yml",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/conf%2Fartalk.example.yml",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/conf%2Fartalk.example.yml",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/conf%2Fartalk.example.yml?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -216,7 +216,7 @@ email:\n     access_key_secret: \"\"\n     account_name: \"noreply@example.com\"\n \n-# Multi-push\n+# Multi-Push\n admin_notify:\n   # Notification template (set to file path to use custom template)\n   notify_tpl: \"default\""
    },
    {
      "sha": "2123f0ba8d43d8cc9db91d33b71c3b533ab06e12",
      "filename": "internal/dao/cook.go",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/internal%2Fdao%2Fcook.go",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/internal%2Fdao%2Fcook.go",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/internal%2Fdao%2Fcook.go?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -3,6 +3,7 @@ package dao\n import (\n \t\"github.com/ArtalkJS/Artalk/internal/entity\"\n \t\"github.com/ArtalkJS/Artalk/internal/utils\"\n+\t\"github.com/samber/lo\"\n )\n \n // ===============\n@@ -29,6 +30,7 @@ func (dao *Dao) CookComment(c *entity.Comment) entity.CookedComment {\n \t\tIsPending:      c.IsPending,\n \t\tIsPinned:       c.IsPinned,\n \t\tIsAllowReply:   c.IsAllowReply(),\n+\t\tIsVerified:     lo.If(user.IsAdmin, true).Else(c.IsVerified),\n \t\tRid:            c.Rid,\n \t\tBadgeName:      user.BadgeName,\n \t\tBadgeColor:     user.BadgeColor,"
    },
    {
      "sha": "62c3f9177b58a932615789fe4680795d604910fc",
      "filename": "internal/entity/comment.go",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/internal%2Fentity%2Fcomment.go",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/internal%2Fentity%2Fcomment.go",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/internal%2Fentity%2Fcomment.go?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -12,9 +12,10 @@ type Comment struct {\n \tPageKey  string `gorm:\"index;size:255\"`\n \tSiteName string `gorm:\"index;size:255\"`\n \n-\tUserID uint `gorm:\"index\"`\n-\tUA     string\n-\tIP     string\n+\tUserID     uint `gorm:\"index\"`\n+\tIsVerified bool `gorm:\"default:false\"`\n+\tUA         string\n+\tIP         string\n \n \tRid uint `gorm:\"index\"` // 父评论 ID\n "
    },
    {
      "sha": "822e0431286cf390e8c549a27afcad094af82c05",
      "filename": "internal/entity/comment_cooked.go",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/internal%2Fentity%2Fcomment_cooked.go",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/internal%2Fentity%2Fcomment_cooked.go",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/internal%2Fentity%2Fcomment_cooked.go?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -14,6 +14,7 @@ type CookedComment struct {\n \tIsPending      bool   `json:\"is_pending\"`\n \tIsPinned       bool   `json:\"is_pinned\"`\n \tIsAllowReply   bool   `json:\"is_allow_reply\"`\n+\tIsVerified     bool   `json:\"is_verified\"`\n \tRid            uint   `json:\"rid\"`\n \tBadgeName      string `json:\"badge_name\"`\n \tBadgeColor     string `json:\"badge_color\"`"
    },
    {
      "sha": "9542c0447c36106dd0a7763a064e5fc7b2602cbb",
      "filename": "ui/artalk/src/api/v2.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fapi%2Fv2.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fapi%2Fv2.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fapi%2Fv2.ts?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -42,6 +42,7 @@ export interface EntityCookedComment {\n   is_collapsed: boolean\n   is_pending: boolean\n   is_pinned: boolean\n+  is_verified: boolean\n   link: string\n   nick: string\n   page_key: string\n@@ -320,6 +321,7 @@ export interface HandlerResponseCommentCreate {\n   is_collapsed: boolean\n   is_pending: boolean\n   is_pinned: boolean\n+  is_verified: boolean\n   link: string\n   nick: string\n   page_key: string\n@@ -360,6 +362,7 @@ export interface HandlerResponseCommentUpdate {\n   is_collapsed: boolean\n   is_pending: boolean\n   is_pinned: boolean\n+  is_verified: boolean\n   link: string\n   nick: string\n   page_key: string"
    },
    {
      "sha": "afd190fde1563755061b6c371c090fc2fe990478",
      "filename": "ui/artalk/src/comment/renders/header.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fcomment%2Frenders%2Fheader.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fcomment%2Frenders%2Fheader.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fcomment%2Frenders%2Fheader.ts?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -37,6 +37,9 @@ function renderVerifyBadge(ctx: Render) {\n     $badge.innerText = badgeText.replace('管理员', $t('admin')) // i18n patch\n     $badge.style.backgroundColor = badgeColor || ''\n     ctx.$headerBadgeWrap.append($badge)\n+  } else if (ctx.data.is_verified) {\n+    const $verifiedBadge = Utils.createElement(`<span class=\"atk-verified-icon\" title=\"${$t('emailVerified')}\"></span>`) // 邮箱验证徽章\n+    ctx.$headerBadgeWrap.append($verifiedBadge)\n   }\n \n   if (ctx.data.is_pinned) {"
    },
    {
      "sha": "d448734a747d17f23df988c216245306e039d5bc",
      "filename": "ui/artalk/src/i18n/en.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fen.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fen.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fen.ts?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -66,6 +66,7 @@ const en = {\n   /* Sidebar */\n   msgCenter: 'Messages',\n   ctrlCenter: 'Admin',\n+  emailVerified: 'Email has been verified',\n \n   /* General */\n   frontend: 'Frontend',"
    },
    {
      "sha": "d6a665456656fedc2f72440d180b04c0def572c4",
      "filename": "ui/artalk/src/i18n/jp.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fjp.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fjp.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fjp.ts?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -68,6 +68,7 @@ export default defineLocaleExternal('jp', {\n   /* Sidebar */\n   msgCenter: '通知センター',\n   ctrlCenter: 'コントロールセンター',\n+  emailVerified: 'メールアドレスが確認されました',\n \n   /* General */\n   frontend: 'フロントエンド',"
    },
    {
      "sha": "579ea12e29a8d6fcaafa0c4dc4ce9b7f20b72dcf",
      "filename": "ui/artalk/src/i18n/zh-CN.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-CN.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-CN.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-CN.ts?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -68,6 +68,7 @@ const zhCN: I18n = {\n   /* Sidebar */\n   msgCenter: '通知中心',\n   ctrlCenter: '控制中心',\n+  emailVerified: '邮箱已验证',\n \n   /* General */\n   frontend: '前端',"
    },
    {
      "sha": "8d590008d0dca684905a253ee48b9a55016f1a39",
      "filename": "ui/artalk/src/i18n/zh-TW.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-TW.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-TW.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-TW.ts?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -68,6 +68,7 @@ export default defineLocaleExternal('zh-TW', {\n   /* Sidebar */\n   msgCenter: '通知中心',\n   ctrlCenter: '控制中心',\n+  emailVerified: '郵箱已驗證',\n \n   /* General */\n   frontend: '前端',"
    },
    {
      "sha": "d6d59fed1eb73a6e157cae0cd49d6979bcdf794e",
      "filename": "ui/artalk/src/style/comment.scss",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fstyle%2Fcomment.scss",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fstyle%2Fcomment.scss",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fstyle%2Fcomment.scss?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -140,6 +140,16 @@\n         background: #f44336;\n       }\n \n+      .atk-verified-icon {\n+        height: 1.4em;\n+        width: 1.4em;\n+        background-repeat: no-repeat;\n+        background-position: center;\n+        background-size: contain;\n+        display: block;\n+        background-image: url('data:image/svg+xml,<svg viewBox=\"0 0 22 22\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"%231d9bf0\"><g><path d=\"M20.396 11c-.018-.646-.215-1.275-.57-1.816-.354-.54-.852-.972-1.438-1.246.223-.607.27-1.264.14-1.897-.131-.634-.437-1.218-.882-1.687-.47-.445-1.053-.75-1.687-.882-.633-.13-1.29-.083-1.897.14-.273-.587-.704-1.086-1.245-1.44S11.647 1.62 11 1.604c-.646.017-1.273.213-1.813.568s-.969.854-1.24 1.44c-.608-.223-1.267-.272-1.902-.14-.635.13-1.22.436-1.69.882-.445.47-.749 1.055-.878 1.688-.13.633-.08 1.29.144 1.896-.587.274-1.087.705-1.443 1.245-.356.54-.555 1.17-.574 1.817.02.647.218 1.276.574 1.817.356.54.856.972 1.443 1.245-.224.606-.274 1.263-.144 1.896.13.634.433 1.218.877 1.688.47.443 1.054.747 1.687.878.633.132 1.29.084 1.897-.136.274.586.705 1.084 1.246 1.439.54.354 1.17.551 1.816.569.647-.016 1.276-.213 1.817-.567s.972-.854 1.245-1.44c.604.239 1.266.296 1.903.164.636-.132 1.22-.447 1.68-.907.46-.46.776-1.044.908-1.681s.075-1.299-.165-1.903c.586-.274 1.084-.705 1.439-1.246.354-.54.551-1.17.569-1.816zM9.662 14.85l-3.429-3.428 1.293-1.302 2.072 2.072 4.4-4.794 1.347 1.246z\"></path></g></svg>');\n+      }\n+\n       .atk-ua {\n         @extend .badge;\n       }"
    },
    {
      "sha": "d79b53b658a2045ef9e78a03c00a337f39f23088",
      "filename": "ui/artalk/src/style/editor.scss",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fstyle%2Feditor.scss",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Fstyle%2Feditor.scss",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fstyle%2Feditor.scss?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -212,7 +212,7 @@\n       border-radius: calc($block-radius / 2);\n \n       @media only screen and (max-width: 768px) {\n-        width: 6em;\n+        min-width: 6em;\n       }\n \n       &:active {"
    },
    {
      "sha": "12aa25a7edc23bcf809ed3751d3ede63f804a3ed",
      "filename": "ui/artalk/src/types/data.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Ftypes%2Fdata.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/c94a34ffd7e0648b652a133e6dae4b5f11f5920d/ui%2Fartalk%2Fsrc%2Ftypes%2Fdata.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Ftypes%2Fdata.ts?ref=c94a34ffd7e0648b652a133e6dae4b5f11f5920d",
      "patch": "@@ -35,6 +35,9 @@ export interface CommentData {\n   /** 是否置顶 */\n   is_pinned: boolean\n \n+  /** 是否已验证 */\n+  is_verified: boolean\n+\n   /** 徽章文字 */\n   badge_name?: string\n "
    }
  ]
}
