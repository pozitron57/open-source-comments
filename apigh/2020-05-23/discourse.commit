{
  "sha": "d9a02d1336dd86e7fff4f14735fb0f1970555abd",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODpkOWEwMmQxMzM2ZGQ4NmU3ZmZmNGYxNDczNWZiMGYxOTcwNTU1YWJk",
  "commit": {
    "author": {
      "name": "Michael Brown",
      "email": "michael.brown@discourse.org",
      "date": "2020-05-23T04:56:13Z"
    },
    "committer": {
      "name": "Michael Brown",
      "email": "michael.brown@discourse.org",
      "date": "2020-05-23T04:56:13Z"
    },
    "message": "Revert \"Revert \"Merge branch 'master' of https://github.com/discourse/discourse\"\"\n\nThis reverts commit 20780a1eeed56b321daf18ee6bbfe681a51d1bf4.\n\n* SECURITY: re-adds accidentally reverted commit:\n  03d26cd6: ensure embed_url contains valid http(s) uri\n* when the merge commit e62a85cf was reverted, git chose the 2660c2e2 parent to land on\n  instead of the 03d26cd6 parent (which contains security fixes)",
    "tree": {
      "sha": "dc80ccbc4d80e76c14c67ad6ed974bb878d28cce",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/dc80ccbc4d80e76c14c67ad6ed974bb878d28cce"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/d9a02d1336dd86e7fff4f14735fb0f1970555abd",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEt1O9ay+QdUAPSAAIbAf7MAfPk2AFAl7Ir4oACgkQbAf7MAfP\nk2DIYg//aHreoUC7tM/O2a7bswCuVpZCLce06gyE6QIZBieJJXUDlW7RiYRGoYWj\ny4oaL+879A+sjb9w2ja5zXLUqyT8vODpJsC/iupwtWkVBz4cyP6wJIe1nuFCcjZn\n3RA1f755HFoHyT/Hedbh8o7gi5hk9EZPFkqOvhnx3R68bw4Nk4MnOG0HeWuvi0oB\nfn+kjnnleFn1JOA6h4gGe8MaiEfPtLjKGQM0SQixUmu98fv4pYmwH5+ttMQoPlia\nQwxlJvjLII3RAK5tfAh/77WjbE8nI/CkJAyMGmzs8p6sUTgOZgmrMq6QUnnmpaSU\n/fik7ryP92ybgKRck1hz2nQx8/y8EA5G01gQUJulzV93eHhw/jF3W38+GedsarJ4\nOQYXLsSKW3YZwK3shuWzAPPgyN0gUwo8vIQcH6wt2cOtz/1jOVwraSPmPNk3DNtC\nXWkPpzH/i/Yv3kqhjZPQ7ta+oGeXb3CX5tIpRQdCtLCGJwRKbS1z5s7QPUa+mHTf\nvzt69FKMgYPKN0Muan844LBpzYGsLR8D+0uikChgGaXgk8wkIsIM8+ktXKGYpuAT\nhTJLfF+pyhd9bDSvtkvw/UmP4gbI0FcPFetoV1UhRM95knGk/BFPZh6p4DajHtj5\nGZkVb4ZftwGKFW0TT2RPqj3jrRVovMSl252SW3IO5V5go2SF8Js=\n=wZuL\n-----END PGP SIGNATURE-----",
      "payload": "tree dc80ccbc4d80e76c14c67ad6ed974bb878d28cce\nparent 20780a1eeed56b321daf18ee6bbfe681a51d1bf4\nauthor Michael Brown <michael.brown@discourse.org> 1590209773 -0400\ncommitter Michael Brown <michael.brown@discourse.org> 1590209773 -0400\n\nRevert \"Revert \"Merge branch 'master' of https://github.com/discourse/discourse\"\"\n\nThis reverts commit 20780a1eeed56b321daf18ee6bbfe681a51d1bf4.\n\n* SECURITY: re-adds accidentally reverted commit:\n  03d26cd6: ensure embed_url contains valid http(s) uri\n* when the merge commit e62a85cf was reverted, git chose the 2660c2e2 parent to land on\n  instead of the 03d26cd6 parent (which contains security fixes)\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/d9a02d1336dd86e7fff4f14735fb0f1970555abd",
  "html_url": "https://github.com/discourse/discourse/commit/d9a02d1336dd86e7fff4f14735fb0f1970555abd",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/d9a02d1336dd86e7fff4f14735fb0f1970555abd/comments",
  "author": {
    "login": "Supermathie",
    "id": 410018,
    "node_id": "MDQ6VXNlcjQxMDAxOA==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/410018?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Supermathie",
    "html_url": "https://github.com/Supermathie",
    "followers_url": "https://api.github.com/users/Supermathie/followers",
    "following_url": "https://api.github.com/users/Supermathie/following{/other_user}",
    "gists_url": "https://api.github.com/users/Supermathie/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Supermathie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Supermathie/subscriptions",
    "organizations_url": "https://api.github.com/users/Supermathie/orgs",
    "repos_url": "https://api.github.com/users/Supermathie/repos",
    "events_url": "https://api.github.com/users/Supermathie/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Supermathie/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "Supermathie",
    "id": 410018,
    "node_id": "MDQ6VXNlcjQxMDAxOA==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/410018?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Supermathie",
    "html_url": "https://github.com/Supermathie",
    "followers_url": "https://api.github.com/users/Supermathie/followers",
    "following_url": "https://api.github.com/users/Supermathie/following{/other_user}",
    "gists_url": "https://api.github.com/users/Supermathie/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Supermathie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Supermathie/subscriptions",
    "organizations_url": "https://api.github.com/users/Supermathie/orgs",
    "repos_url": "https://api.github.com/users/Supermathie/repos",
    "events_url": "https://api.github.com/users/Supermathie/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Supermathie/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "20780a1eeed56b321daf18ee6bbfe681a51d1bf4",
      "url": "https://api.github.com/repos/discourse/discourse/commits/20780a1eeed56b321daf18ee6bbfe681a51d1bf4",
      "html_url": "https://github.com/discourse/discourse/commit/20780a1eeed56b321daf18ee6bbfe681a51d1bf4"
    }
  ],
  "stats": {
    "total": 1748,
    "additions": 1032,
    "deletions": 716
  },
  "files": [
    {
      "sha": "a80f23dbc0fd0f2f7488142a7bb626dcf395936f",
      "filename": "Gemfile",
      "status": "modified",
      "additions": 2,
      "deletions": 4,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/Gemfile",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/Gemfile",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/Gemfile?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -127,10 +127,6 @@ gem 'mini_racer'\n # TODO: determine why highline is being held back and upgrade to latest\n gem 'highline', '~> 1.7.0', require: false\n \n-# TODO: Upgrading breaks Sidekiq Web\n-# This is a bit of a hornets nest cause in an ideal world we much prefer\n-# if Sidekiq reused session and CSRF mitigation with Discourse on the\n-# _forum_session cookie instead of a rack.session cookie\n gem 'rack', '2.2.2'\n \n gem 'rack-protection' # security\n@@ -252,3 +248,5 @@ end\n gem 'webpush', require: false\n gem 'colored2', require: false\n gem 'maxminddb'\n+\n+gem 'rails_failover', require: false"
    },
    {
      "sha": "db4b88d863116da18b4571b6d95af2008d5e83ae",
      "filename": "Gemfile.lock",
      "status": "modified",
      "additions": 10,
      "deletions": 4,
      "changes": 14,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/Gemfile.lock",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/Gemfile.lock",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/Gemfile.lock?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -195,7 +195,7 @@ GEM\n     mini_sql (0.2.5)\n     mini_suffix (0.3.0)\n       ffi (~> 1.9)\n-    minitest (5.14.0)\n+    minitest (5.14.1)\n     mocha (1.11.2)\n     mock_redis (0.23.0)\n     msgpack (1.3.3)\n@@ -262,7 +262,7 @@ GEM\n     pry-rails (0.3.9)\n       pry (>= 0.10.4)\n     public_suffix (4.0.5)\n-    puma (4.3.3)\n+    puma (4.3.5)\n       nio4r (~> 2.0)\n     r2 (0.2.7)\n     rack (2.2.2)\n@@ -277,6 +277,8 @@ GEM\n       nokogiri (>= 1.6)\n     rails-html-sanitizer (1.3.0)\n       loofah (~> 2.3)\n+    rails_failover (0.2.0)\n+      redis (~> 4)\n     rails_multisite (2.1.2)\n       activerecord (> 5.0, < 7)\n       railties (> 5.0, < 7)\n@@ -294,7 +296,7 @@ GEM\n     rb-fsevent (0.10.4)\n     rb-inotify (0.10.1)\n       ffi (~> 1.0)\n-    rbtrace (0.4.12)\n+    rbtrace (0.4.13)\n       ffi (>= 1.0.6)\n       msgpack (>= 0.4.3)\n       optimist (>= 3.0.0)\n@@ -341,13 +343,16 @@ GEM\n       json-schema (~> 2.2)\n       railties (>= 3.1, < 7.0)\n     rtlit (0.0.5)\n-    rubocop (0.83.0)\n+    rubocop (0.84.0)\n       parallel (~> 1.10)\n       parser (>= 2.7.0.1)\n       rainbow (>= 2.2.2, < 4.0)\n       rexml\n+      rubocop-ast (>= 0.0.3)\n       ruby-progressbar (~> 1.7)\n       unicode-display_width (>= 1.4.0, < 2.0)\n+    rubocop-ast (0.0.3)\n+      parser (>= 2.7.0.1)\n     rubocop-discourse (2.1.2)\n       rubocop (>= 0.69.0)\n       rubocop-rspec (>= 1.39.0)\n@@ -509,6 +514,7 @@ DEPENDENCIES\n   rack (= 2.2.2)\n   rack-mini-profiler\n   rack-protection\n+  rails_failover\n   rails_multisite\n   railties (= 6.0.3)\n   rake"
    },
    {
      "sha": "9977fa8dd467dd08602972a8c118a50a31e855cb",
      "filename": "app/assets/javascripts/admin/models/admin-user.js",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/admin/models/admin-user.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/admin/models/admin-user.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/models/admin-user.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -77,12 +77,6 @@ const AdminUser = User.extend({\n     });\n   },\n \n-  revokeApiKey() {\n-    return ajax(`/admin/users/${this.id}/revoke_api_key`, {\n-      type: \"DELETE\"\n-    }).then(() => this.set(\"api_key\", null));\n-  },\n-\n   deleteAllPosts() {\n     let deletedPosts = 0;\n     const user = this;"
    },
    {
      "sha": "f0860e79f71b5e310ae818fb48b184becfe295f0",
      "filename": "app/assets/javascripts/admin/routes/admin-web-hooks-show.js",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/admin/routes/admin-web-hooks-show.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/admin/routes/admin-web-hooks-show.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/routes/admin-web-hooks-show.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,5 +1,4 @@\n import { get } from \"@ember/object\";\n-import { isEmpty } from \"@ember/utils\";\n import DiscourseRoute from \"discourse/routes/discourse\";\n \n export default DiscourseRoute.extend({\n@@ -15,7 +14,7 @@ export default DiscourseRoute.extend({\n   },\n \n   setupController(controller, model) {\n-    if (model.get(\"isNew\") || isEmpty(model.get(\"web_hook_event_types\"))) {\n+    if (model.get(\"isNew\")) {\n       model.set(\"web_hook_event_types\", controller.get(\"defaultEventTypes\"));\n     }\n "
    },
    {
      "sha": "40f1d275bb428af2e90b605b58f4bd433eb5d508",
      "filename": "app/assets/javascripts/application.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/application.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/application.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/application.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,6 +1,6 @@\n //= require_tree ./discourse-common/addon\n //= require ./polyfills\n-//= require_tree ./select-kit/app\n+//= require_tree ./select-kit/addon\n //= require ./discourse/app/app\n //= require ./app-boot\n "
    },
    {
      "sha": "fc829ae12f0df17c076939bb8938ec79890ec16f",
      "filename": "app/assets/javascripts/discourse-loader.js",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse-loader.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse-loader.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse-loader.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -36,7 +36,6 @@ var define, requirejs;\n         default: Ember.Object,\n         get: Ember.get,\n         getProperties: Ember.getProperties,\n-        guidFor: Ember.guidFor,\n         set: Ember.set,\n         setProperties: Ember.setProperties,\n         computed: Ember.computed,"
    },
    {
      "sha": "2fcc5781c30260aeb9f01d5ceed36878d164e280",
      "filename": "app/assets/javascripts/discourse/app/controllers/preferences/interface.js",
      "status": "modified",
      "additions": 18,
      "deletions": 12,
      "changes": 30,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/controllers/preferences/interface.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/controllers/preferences/interface.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/controllers/preferences/interface.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -2,13 +2,10 @@ import I18n from \"I18n\";\n import { inject } from \"@ember/controller\";\n import Controller from \"@ember/controller\";\n import { setDefaultHomepage } from \"discourse/lib/utilities\";\n-import discourseComputed, { observes } from \"discourse-common/utils/decorators\";\n-import {\n-  listThemes,\n-  previewTheme,\n-  setLocalTheme\n-} from \"discourse/lib/theme-selector\";\n+import discourseComputed from \"discourse-common/utils/decorators\";\n+import { listThemes, setLocalTheme } from \"discourse/lib/theme-selector\";\n import { popupAjaxError } from \"discourse/lib/ajax-error\";\n+import pageReloader from \"discourse/helpers/page-reloader\";\n import {\n   safariHacksDisabled,\n   isiPad,\n@@ -28,6 +25,9 @@ const TEXT_SIZES = [\"smaller\", \"normal\", \"larger\", \"largest\"];\n const TITLE_COUNT_MODES = [\"notifications\", \"contextual\"];\n \n export default Controller.extend({\n+  currentThemeId: -1,\n+  preferencesController: inject(\"preferences\"),\n+\n   @discourseComputed(\"makeThemeDefault\")\n   saveAttrNames(makeDefault) {\n     let attrs = [\n@@ -51,8 +51,6 @@ export default Controller.extend({\n     return attrs;\n   },\n \n-  preferencesController: inject(\"preferences\"),\n-\n   @discourseComputed()\n   isiPad() {\n     // TODO: remove this preference checkbox when iOS adoption > 90%\n@@ -105,10 +103,14 @@ export default Controller.extend({\n     return themes && themes.length > 1;\n   },\n \n-  @observes(\"themeId\")\n-  themeIdChanged() {\n-    const id = this.themeId;\n-    previewTheme([id]);\n+  @discourseComputed(\"themeId\")\n+  themeIdChanged(themeId) {\n+    if (this.currentThemeId === -1) {\n+      this.set(\"currentThemeId\", themeId);\n+      return false;\n+    } else {\n+      return this.currentThemeId !== themeId;\n+    }\n   },\n \n   @discourseComputed(\"model.user_option.theme_ids\", \"themeId\")\n@@ -189,6 +191,10 @@ export default Controller.extend({\n               this.disableSafariHacks.toString()\n             );\n           }\n+\n+          if (this.themeId !== this.currentThemeId) {\n+            pageReloader.reload();\n+          }\n         })\n         .catch(popupAjaxError);\n     },"
    },
    {
      "sha": "ba7caf554d1273ca6d5d61b799c128cd3c2b168a",
      "filename": "app/assets/javascripts/discourse/app/controllers/topic.js",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/controllers/topic.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/controllers/topic.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/controllers/topic.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -185,6 +185,13 @@ export default Controller.extend(bufferedProperty(\"model\"), {\n     );\n   },\n \n+  @discourseComputed(\"model.category\")\n+  minimumRequiredTags(category) {\n+    return category && category.minimum_required_tags > 0\n+      ? category.minimum_required_tags\n+      : null;\n+  },\n+\n   _forceRefreshPostStream() {\n     this.appEvents.trigger(\"post-stream:refresh\", { force: true });\n   },"
    },
    {
      "sha": "b466f084ed5f4bbef0fac3e5db189606b24b2118",
      "filename": "app/assets/javascripts/discourse/app/controllers/user.js",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/controllers/user.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/controllers/user.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/controllers/user.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -51,13 +51,15 @@ export default Controller.extend(CanCheckEmails, {\n   hasDeletedPosts: gt(\"model.number_of_deleted_posts\", 0),\n   hasBeenSuspended: gt(\"model.number_of_suspensions\", 0),\n   hasReceivedWarnings: gt(\"model.warnings_received_count\", 0),\n+  hasRejectedPosts: gt(\"model.number_of_rejected_posts\", 0),\n \n   showStaffCounters: or(\n     \"hasGivenFlags\",\n     \"hasFlaggedPosts\",\n     \"hasDeletedPosts\",\n     \"hasBeenSuspended\",\n-    \"hasReceivedWarnings\"\n+    \"hasReceivedWarnings\",\n+    \"hasRejectedPosts\"\n   ),\n \n   showFeaturedTopic: and("
    },
    {
      "sha": "6429be3a3cc5be750587f6e4f8d338483a66a871",
      "filename": "app/assets/javascripts/discourse/app/helpers/page-reloader.js",
      "status": "added",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/helpers/page-reloader.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/helpers/page-reloader.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/helpers/page-reloader.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,10 @@\n+import EmberObject from \"@ember/object\";\n+import Ember from \"ember\";\n+\n+export default EmberObject.create({\n+  reload: function() {\n+    if (!Ember.testing) {\n+      location.reload();\n+    }\n+  }\n+});"
    },
    {
      "sha": "f6fcef5e17e279b6d1a2239d1f8fc9566e281e0f",
      "filename": "app/assets/javascripts/discourse/app/initializers/copy-codeblocks.js",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/initializers/copy-codeblocks.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/initializers/copy-codeblocks.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/initializers/copy-codeblocks.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,6 +3,7 @@ import { cancel, later } from \"@ember/runloop\";\n import { Promise } from \"rsvp\";\n import { iconHTML } from \"discourse-common/lib/icon-library\";\n import I18n from \"I18n\";\n+import { guidFor } from \"@ember/object/internals\";\n \n // http://github.com/feross/clipboard-copy\n function clipboardCopy(text) {\n@@ -90,7 +91,7 @@ export default {\n             const state = button.innerHTML;\n             button.innerHTML = I18n.t(\"copy_codeblock.copied\");\n \n-            const commandId = Ember.guidFor(button);\n+            const commandId = guidFor(button);\n \n             if (_fadeCopyCodeblocksRunners[commandId]) {\n               cancel(_fadeCopyCodeblocksRunners[commandId]);"
    },
    {
      "sha": "a2de76d3e9d95c11125c6ecbc11d05a2237afb73",
      "filename": "app/assets/javascripts/discourse/app/initializers/topic-footer-buttons.js",
      "status": "modified",
      "additions": 25,
      "deletions": 9,
      "changes": 34,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/initializers/topic-footer-buttons.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/initializers/topic-footer-buttons.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/initializers/topic-footer-buttons.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,6 +3,13 @@ import showModal from \"discourse/lib/show-modal\";\n import { registerTopicFooterButton } from \"discourse/lib/register-topic-footer-button\";\n import { formattedReminderTime } from \"discourse/lib/bookmark\";\n \n+const SHARE_PRIORITY = 1000;\n+const BOOKMARK_PRIORITY = 900;\n+const ARCHIVE_PRIORITY = 800;\n+const FLAG_PRIORITY = 700;\n+const EDIT_MESSAGE_PRIORITY = 600;\n+const DEFER_PRIORITY = 500;\n+\n export default {\n   name: \"topic-footer-buttons\",\n \n@@ -11,8 +18,12 @@ export default {\n     registerTopicFooterButton({\n       id: \"share-and-invite\",\n       icon: \"link\",\n-      priority: 999,\n-      label: \"topic.share.title\",\n+      priority: SHARE_PRIORITY,\n+      label() {\n+        if (!this.get(\"topic.isPrivateMessage\") || this.site.mobileView) {\n+          return \"topic.share.title\";\n+        }\n+      },\n       title: \"topic.share.help\",\n       action() {\n         const panels = [\n@@ -67,7 +78,7 @@ export default {\n     registerTopicFooterButton({\n       id: \"flag\",\n       icon: \"flag\",\n-      priority: 998,\n+      priority: FLAG_PRIORITY,\n       label: \"topic.flag_topic.title\",\n       title: \"topic.flag_topic.help\",\n       action: \"showFlagTopic\",\n@@ -93,14 +104,16 @@ export default {\n         }\n         return \"bookmark\";\n       },\n-      priority: 1000,\n+      priority: BOOKMARK_PRIORITY,\n       classNames() {\n         const bookmarked = this.get(\"topic.bookmarked\");\n         return bookmarked ? [\"bookmark\", \"bookmarked\"] : [\"bookmark\"];\n       },\n       label() {\n-        const bookmarked = this.get(\"topic.bookmarked\");\n-        return bookmarked ? \"bookmarked.clear_bookmarks\" : \"bookmarked.title\";\n+        if (!this.get(\"topic.isPrivateMessage\") || this.site.mobileView) {\n+          const bookmarked = this.get(\"topic.bookmarked\");\n+          return bookmarked ? \"bookmarked.clear_bookmarks\" : \"bookmarked.title\";\n+        }\n       },\n       translatedTitle() {\n         const bookmarked = this.get(\"topic.bookmarked\");\n@@ -126,7 +139,7 @@ export default {\n \n     registerTopicFooterButton({\n       id: \"archive\",\n-      priority: 996,\n+      priority: ARCHIVE_PRIORITY,\n       icon() {\n         return this.archiveIcon;\n       },\n@@ -155,13 +168,16 @@ export default {\n \n     registerTopicFooterButton({\n       id: \"edit-message\",\n-      priority: 750,\n+      priority: EDIT_MESSAGE_PRIORITY,\n       icon: \"pencil-alt\",\n       label: \"topic.edit_message.title\",\n       title: \"topic.edit_message.help\",\n       action: \"editFirstPost\",\n       classNames: [\"edit-message\"],\n       dependentKeys: [\"editFirstPost\", \"showEditOnFooter\"],\n+      dropdown() {\n+        return this.site.mobileView && this.get(\"topic.isPrivateMessage\");\n+      },\n       displayed() {\n         return this.showEditOnFooter;\n       }\n@@ -170,7 +186,7 @@ export default {\n     registerTopicFooterButton({\n       id: \"defer\",\n       icon: \"circle\",\n-      priority: 300,\n+      priority: DEFER_PRIORITY,\n       label: \"topic.defer.title\",\n       title: \"topic.defer.help\",\n       action: \"deferTopic\","
    },
    {
      "sha": "48f63c31fbf3ebbbef786d55e67a722791ff260f",
      "filename": "app/assets/javascripts/discourse/app/lib/theme-selector.js",
      "status": "modified",
      "additions": 0,
      "deletions": 26,
      "changes": 26,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/lib/theme-selector.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/lib/theme-selector.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/lib/theme-selector.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,5 +1,4 @@\n import I18n from \"I18n\";\n-import { ajax } from \"discourse/lib/ajax\";\n import deprecated from \"discourse-common/lib/deprecated\";\n \n const keySelector = \"meta[name=discourse_theme_ids]\";\n@@ -79,31 +78,6 @@ export function refreshCSS(node, hash, newHref) {\n   $orig.data(\"copy\", reloaded);\n }\n \n-export function previewTheme(ids = []) {\n-  ids = ids.reject(id => !id);\n-  if (!ids.includes(currentThemeId())) {\n-    Discourse.set(\"assetVersion\", \"forceRefresh\");\n-\n-    ajax(`/themes/assets/${ids.length > 0 ? ids.join(\"-\") : \"default\"}`).then(\n-      results => {\n-        const elem = _.first($(keySelector));\n-        if (elem) {\n-          elem.content = ids.join(\",\");\n-        }\n-\n-        results.themes.forEach(theme => {\n-          const node = $(\n-            `link[rel=stylesheet][data-target=${theme.target}]`\n-          )[0];\n-          if (node) {\n-            refreshCSS(node, null, theme.new_href);\n-          }\n-        });\n-      }\n-    );\n-  }\n-}\n-\n export function listThemes(site) {\n   let themes = site.get(\"user_themes\");\n "
    },
    {
      "sha": "955e536e1eba58a2da67ca850883cdb0c18ef65e",
      "filename": "app/assets/javascripts/discourse/app/models/nav-item.js",
      "status": "modified",
      "additions": 14,
      "deletions": 9,
      "changes": 23,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/models/nav-item.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/models/nav-item.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/models/nav-item.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -273,12 +273,17 @@ export function addNavItem(item) {\n   NavItem.extraNavItemDescriptors.push(item);\n }\n \n-Object.defineProperty(Discourse, \"NavItem\", {\n-  get() {\n-    deprecated(\"Import the NavItem class instead of using Discourse.NavItem\", {\n-      since: \"2.4.0\",\n-      dropFrom: \"2.5.0\"\n-    });\n-    return NavItem;\n-  }\n-});\n+if (typeof Discourse !== \"undefined\") {\n+  Object.defineProperty(Discourse, \"NavItem\", {\n+    get() {\n+      deprecated(\n+        \"Import the NavItem class instead of using Discourse.NavItem\",\n+        {\n+          since: \"2.4.0\",\n+          dropFrom: \"2.5.0\"\n+        }\n+      );\n+      return NavItem;\n+    }\n+  });\n+}"
    },
    {
      "sha": "d8d5ea0036f2b21a7a27c944e43c6a907e116255",
      "filename": "app/assets/javascripts/discourse/app/models/topic-details.js",
      "status": "modified",
      "additions": 8,
      "deletions": 5,
      "changes": 13,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/models/topic-details.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/models/topic-details.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/models/topic-details.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -61,12 +61,15 @@ const TopicDetails = RestModel.extend({\n     }\n   },\n \n-  updateNotifications(v) {\n-    this.set(\"notification_level\", v);\n-    this.set(\"notifications_reason_id\", null);\n-    return ajax(\"/t/\" + this.get(\"topic.id\") + \"/notifications\", {\n+  updateNotifications(level) {\n+    return ajax(`/t/${this.get(\"topic.id\")}/notifications`, {\n       type: \"POST\",\n-      data: { notification_level: v }\n+      data: { notification_level: level }\n+    }).then(() => {\n+      this.setProperties({\n+        notification_level: level,\n+        notifications_reason_id: null\n+      });\n     });\n   },\n "
    },
    {
      "sha": "2659b0ebac4679bb8f04695ebea98d7132d2210c",
      "filename": "app/assets/javascripts/discourse/app/templates/about.hbs",
      "status": "modified",
      "additions": 45,
      "deletions": 43,
      "changes": 88,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/about.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/about.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/templates/about.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -64,50 +64,52 @@\n           </section>\n         {{/each}}\n       {{/if}}\n-      <section class=\"about stats\">\n-        <h3>{{d-icon \"far-chart-bar\"}}  {{i18n \"about.stats\"}}</h3>\n+      {{#if model.can_see_about_stats}}\n+        <section class=\"about stats\">\n+          <h3>{{d-icon \"far-chart-bar\"}}  {{i18n \"about.stats\"}}</h3>\n \n-        <table class=\"table\">\n-          <tbody>\n-            <tr>\n-              <th>&nbsp;</th>\n-              <th>{{i18n \"about.stat.last_7_days\"}}</th>\n-              <th>{{i18n \"about.stat.last_30_days\"}}</th>\n-              <th>{{i18n \"about.stat.all_time\"}}</th>\n-            </tr>\n-            <tr>\n-              <td class=\"title\">{{i18n \"about.topic_count\"}}</td>\n-              <td>{{number model.stats.topics_7_days}}</td>\n-              <td>{{number model.stats.topics_30_days}}</td>\n-              <td>{{number model.stats.topic_count}}</td>\n-            </tr>\n-            <tr>\n-              <td>{{i18n \"about.post_count\"}}</td>\n-              <td>{{number model.stats.posts_7_days}}</td>\n-              <td>{{number model.stats.posts_30_days}}</td>\n-              <td>{{number model.stats.post_count}}</td>\n-            </tr>\n-            <tr>\n-              <td>{{i18n \"about.user_count\"}}</td>\n-              <td>{{number model.stats.users_7_days}}</td>\n-              <td>{{number model.stats.users_30_days}}</td>\n-              <td>{{number model.stats.user_count}}</td>\n-            </tr>\n-            <tr>\n-              <td>{{i18n \"about.active_user_count\"}}</td>\n-              <td>{{number model.stats.active_users_7_days}}</td>\n-              <td>{{number model.stats.active_users_30_days}}</td>\n-              <td>&mdash;</td>\n-            </tr>\n-            <tr>\n-              <td>{{i18n \"about.like_count\"}}</td>\n-              <td>{{number model.stats.likes_7_days}}</td>\n-              <td>{{number model.stats.likes_30_days}}</td>\n-              <td>{{number model.stats.like_count}}</td>\n-            </tr>\n-          </tbody>\n-        </table>\n-      </section>\n+          <table class=\"table\">\n+            <tbody>\n+              <tr>\n+                <th>&nbsp;</th>\n+                <th>{{i18n \"about.stat.last_7_days\"}}</th>\n+                <th>{{i18n \"about.stat.last_30_days\"}}</th>\n+                <th>{{i18n \"about.stat.all_time\"}}</th>\n+              </tr>\n+              <tr>\n+                <td class=\"title\">{{i18n \"about.topic_count\"}}</td>\n+                <td>{{number model.stats.topics_7_days}}</td>\n+                <td>{{number model.stats.topics_30_days}}</td>\n+                <td>{{number model.stats.topic_count}}</td>\n+              </tr>\n+              <tr>\n+                <td>{{i18n \"about.post_count\"}}</td>\n+                <td>{{number model.stats.posts_7_days}}</td>\n+                <td>{{number model.stats.posts_30_days}}</td>\n+                <td>{{number model.stats.post_count}}</td>\n+              </tr>\n+              <tr>\n+                <td>{{i18n \"about.user_count\"}}</td>\n+                <td>{{number model.stats.users_7_days}}</td>\n+                <td>{{number model.stats.users_30_days}}</td>\n+                <td>{{number model.stats.user_count}}</td>\n+              </tr>\n+              <tr>\n+                <td>{{i18n \"about.active_user_count\"}}</td>\n+                <td>{{number model.stats.active_users_7_days}}</td>\n+                <td>{{number model.stats.active_users_30_days}}</td>\n+                <td>&mdash;</td>\n+              </tr>\n+              <tr>\n+                <td>{{i18n \"about.like_count\"}}</td>\n+                <td>{{number model.stats.likes_7_days}}</td>\n+                <td>{{number model.stats.likes_30_days}}</td>\n+                <td>{{number model.stats.like_count}}</td>\n+              </tr>\n+            </tbody>\n+          </table>\n+        </section>\n+      {{/if}}\n \n       {{#if contactInfo}}\n         <section class=\"about contact\">"
    },
    {
      "sha": "2ac52d5f71b12cbfada16abf87bf42a2fe9104f2",
      "filename": "app/assets/javascripts/discourse/app/templates/components/d-navigation.hbs",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/components/d-navigation.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/components/d-navigation.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/templates/components/d-navigation.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,6 +3,9 @@\n {{#if showCategoryAdmin}}\n   {{categories-admin-dropdown\n     onChange=(action \"selectCategoryAdminDropdownAction\")\n+    options=(hash\n+      triggerOnChangeOnTab=false\n+    )\n   }}\n {{/if}}\n "
    },
    {
      "sha": "aa5b44a71631426e9846d8ba505c6d7c0569a507",
      "filename": "app/assets/javascripts/discourse/app/templates/components/topic-footer-buttons.hbs",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/components/topic-footer-buttons.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/components/topic-footer-buttons.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/templates/components/topic-footer-buttons.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -50,10 +50,10 @@\n                   args=(hash topic=topic)\n                   tagName=\"\"\n                   connectorTagName=\"span\"}}\n-\n-  {{pinned-button pinned=topic.pinned topic=topic}}\n </div>\n \n+{{pinned-button pinned=topic.pinned topic=topic}}\n+\n {{#if showNotificationsButton}}\n   {{topic-notifications-button\n     notificationLevel=topic.details.notification_level"
    },
    {
      "sha": "4f1f13c61471f4238838b8b541805bef3ef8ae66",
      "filename": "app/assets/javascripts/discourse/app/templates/preferences/interface.hbs",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/preferences/interface.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/preferences/interface.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/templates/preferences/interface.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -5,9 +5,11 @@\n       {{combo-box\n         content=userSelectableThemes\n         value=themeId\n-        onChange=(action (mut themeId))\n       }}\n     </div>\n+    {{#if themeIdChanged}}\n+      <p class=\"alert alert-success save-theme-alert\">{{i18n \"user.save_to_change_theme\" save_text=(i18n \"save\") }}</p>\n+    {{/if}}\n     {{#if showThemeSetDefault}}\n       <div class=\"controls\">\n         {{preference-checkbox labelKey=\"user.theme_default_on_all_devices\" checked=makeThemeDefault}}"
    },
    {
      "sha": "d5e22f54379dbc24656987dfedf867da77976237",
      "filename": "app/assets/javascripts/discourse/app/templates/topic.hbs",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/topic.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/templates/topic.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/templates/topic.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -36,6 +36,7 @@\n                 options=(hash\n                   filterable=true\n                   categoryId=buffered.category_id\n+                  minimum=minimumRequiredTags\n                 )\n               }}\n             {{/if}}"
    },
    {
      "sha": "8e27a15a03608044987d4ce57be09082042ccb5d",
      "filename": "app/assets/javascripts/discourse/app/widgets/header.js",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/widgets/header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/discourse/app/widgets/header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/widgets/header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -125,6 +125,7 @@ createWidget(\n           {\n             attributes: {\n               href: attrs.user.get(\"path\"),\n+              title: attrs.user.get(\"name\"),\n               \"data-auto-route\": true\n             }\n           },"
    },
    {
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "filename": "app/assets/javascripts/select-kit/addon/.gitkeep",
      "status": "added",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/.gitkeep",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/.gitkeep",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/.gitkeep?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd"
    },
    {
      "sha": "1b02a45d2801385922272d90c6b67a1d63a3cbc0",
      "filename": "app/assets/javascripts/select-kit/addon/components/admin-group-selector.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/admin-group-selector.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/admin-group-selector.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/admin-group-selector.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/admin-group-selector.js"
    },
    {
      "sha": "d8ea039ffd77c2d36d61a6e919afc048b7244758",
      "filename": "app/assets/javascripts/select-kit/addon/components/categories-admin-dropdown.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/categories-admin-dropdown.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/categories-admin-dropdown.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/categories-admin-dropdown.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/categories-admin-dropdown.js"
    },
    {
      "sha": "72d0167ac096e6e8f39f3e7b1ae93f0912ced847",
      "filename": "app/assets/javascripts/select-kit/addon/components/category-chooser.js",
      "status": "renamed",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-chooser.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-chooser.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/category-chooser.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -67,6 +67,7 @@ export default ComboBoxComponent.extend({\n \n   search(filter) {\n     if (filter) {\n+      filter = filter.toLowerCase();\n       return this.content.filter(item => {\n         const category = Category.findById(this.getValue(item));\n         const categoryName = this.getName(item);",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/category-chooser.js"
    },
    {
      "sha": "ebe5eec4b2ef8a76a58b244214aae4bfc4eb1090",
      "filename": "app/assets/javascripts/select-kit/addon/components/category-drop.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-drop.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-drop.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/category-drop.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/category-drop.js"
    },
    {
      "sha": "7f641fb14fd622222c86f0a60a695751809a0175",
      "filename": "app/assets/javascripts/select-kit/addon/components/category-drop/category-drop-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-drop/category-drop-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-drop/category-drop-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/category-drop/category-drop-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/category-drop/category-drop-header.js"
    },
    {
      "sha": "b9e959f7b5b1aacb2c575d474af0c27cc538e545",
      "filename": "app/assets/javascripts/select-kit/addon/components/category-notifications-button.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-notifications-button.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-notifications-button.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/category-notifications-button.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/category-notifications-button.js"
    },
    {
      "sha": "e861debd27b96bb79058832c3361515e7f256f86",
      "filename": "app/assets/javascripts/select-kit/addon/components/category-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/category-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/category-row.js"
    },
    {
      "sha": "96ee7c0e78213d94bf13456758a6925b4136b0e2",
      "filename": "app/assets/javascripts/select-kit/addon/components/category-selector.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-selector.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/category-selector.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/category-selector.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/category-selector.js"
    },
    {
      "sha": "acb374f29f9544ecb3de33094ac6f70bff1eaab7",
      "filename": "app/assets/javascripts/select-kit/addon/components/color-palettes.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/color-palettes.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/color-palettes.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/color-palettes.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/color-palettes.js"
    },
    {
      "sha": "e3845efba10350f62c7ad5c677925b57b5974f56",
      "filename": "app/assets/javascripts/select-kit/addon/components/color-palettes/color-palettes-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/color-palettes/color-palettes-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/color-palettes/color-palettes-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/color-palettes/color-palettes-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/color-palettes/color-palettes-row.js"
    },
    {
      "sha": "70bebbbb0dee2ec6a593b03ecd661e0914ceb67f",
      "filename": "app/assets/javascripts/select-kit/addon/components/combo-box.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/combo-box.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/combo-box.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/combo-box.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/combo-box.js"
    },
    {
      "sha": "3c7472d5258a2f28fc427f41996bf5c1ec3308b6",
      "filename": "app/assets/javascripts/select-kit/addon/components/combo-box/combo-box-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/combo-box/combo-box-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/combo-box/combo-box-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/combo-box/combo-box-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/combo-box/combo-box-header.js"
    },
    {
      "sha": "adaccf2953cd19660d6782cac032c723ecba899d",
      "filename": "app/assets/javascripts/select-kit/addon/components/composer-actions.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/composer-actions.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/composer-actions.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/composer-actions.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/composer-actions.js"
    },
    {
      "sha": "9c4f5aac070eb6f42fc9cd8947c34601cb261bd6",
      "filename": "app/assets/javascripts/select-kit/addon/components/create-color-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/create-color-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/create-color-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/create-color-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/create-color-row.js"
    },
    {
      "sha": "af07d69bc538511d143d3249604e24aaca27802d",
      "filename": "app/assets/javascripts/select-kit/addon/components/dropdown-select-box.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/dropdown-select-box.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/dropdown-select-box.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/dropdown-select-box.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/dropdown-select-box.js"
    },
    {
      "sha": "7404513b68407293707d8f635e075e23ee17672a",
      "filename": "app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/dropdown-select-box/dropdown-select-box-header.js"
    },
    {
      "sha": "0944404e08b9dae7b2a7058ccb37dd19f5322bdd",
      "filename": "app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/dropdown-select-box/dropdown-select-box-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/dropdown-select-box/dropdown-select-box-row.js"
    },
    {
      "sha": "a2770936e5f80c841e347f9ff630218ee5798157",
      "filename": "app/assets/javascripts/select-kit/addon/components/future-date-input-selector.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/future-date-input-selector.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/future-date-input-selector.js"
    },
    {
      "sha": "b120d70dd60502f53352a980851174b7737795ab",
      "filename": "app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/future-date-input-selector/future-date-input-selector-header.js"
    },
    {
      "sha": "69836359d73aa0070ef8cfa4c77e81609fd38451",
      "filename": "app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/future-date-input-selector-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/future-date-input-selector/future-date-input-selector-row.js"
    },
    {
      "sha": "705e8081ab4df007db707039753e6608cdc6bc66",
      "filename": "app/assets/javascripts/select-kit/addon/components/future-date-input-selector/mixin.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/mixin.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/mixin.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/future-date-input-selector/mixin.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/future-date-input-selector/mixin.js"
    },
    {
      "sha": "cf7cfb9a648741144d5ef345aa0bc2aa45697cfe",
      "filename": "app/assets/javascripts/select-kit/addon/components/group-dropdown.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/group-dropdown.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/group-dropdown.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/group-dropdown.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/group-dropdown.js"
    },
    {
      "sha": "7e3c82a2e58abaa60a5c12ea12dbd8997414fd65",
      "filename": "app/assets/javascripts/select-kit/addon/components/group-members-dropdown.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/group-members-dropdown.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/group-members-dropdown.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/group-members-dropdown.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/group-members-dropdown.js"
    },
    {
      "sha": "7e137afc9506ec98c59178b3d87314b6055c6b8f",
      "filename": "app/assets/javascripts/select-kit/addon/components/group-notifications-button.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/group-notifications-button.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/group-notifications-button.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/group-notifications-button.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/group-notifications-button.js"
    },
    {
      "sha": "dfa074452e1d7c0ad65a710c5d511b8aadc3a45a",
      "filename": "app/assets/javascripts/select-kit/addon/components/icon-picker.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/icon-picker.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/icon-picker.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/icon-picker.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/icon-picker.js"
    },
    {
      "sha": "b22f8dc535f8a2c6d376fa0dea87d9f14fcfe142",
      "filename": "app/assets/javascripts/select-kit/addon/components/list-setting.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/list-setting.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/list-setting.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/list-setting.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/list-setting.js"
    },
    {
      "sha": "94b9fa055ad811713f2739d6329b9db89faf1fdb",
      "filename": "app/assets/javascripts/select-kit/addon/components/mini-tag-chooser.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/mini-tag-chooser.js"
    },
    {
      "sha": "5c634dba57126768d5bc0c752a5acd54581e41a1",
      "filename": "app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/mini-tag-chooser-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/mini-tag-chooser-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/mini-tag-chooser-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/mini-tag-chooser-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/mini-tag-chooser/mini-tag-chooser-header.js"
    },
    {
      "sha": "7b4ebf9259c1f650f163626739ebcebaabfb3c2b",
      "filename": "app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/selected-collection.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/selected-collection.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/selected-collection.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/mini-tag-chooser/selected-collection.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/mini-tag-chooser/selected-collection.js"
    },
    {
      "sha": "1252e47b1a83df5063c7ce5d6619a907fbedbe04",
      "filename": "app/assets/javascripts/select-kit/addon/components/multi-select.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/multi-select.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/multi-select.js"
    },
    {
      "sha": "3e83ecde6dae71be348a0d78748dd91a49f41366",
      "filename": "app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-filter.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-filter.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-filter.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-filter.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/multi-select/multi-select-filter.js"
    },
    {
      "sha": "83972945422f3e53196ef1cb28fc4eb9478a83d7",
      "filename": "app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/multi-select/multi-select-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/multi-select/multi-select-header.js"
    },
    {
      "sha": "b3f3d4fb15e1a93d589721a00082b3fb2a50aa68",
      "filename": "app/assets/javascripts/select-kit/addon/components/multi-select/selected-category.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/selected-category.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/selected-category.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/multi-select/selected-category.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/multi-select/selected-category.js"
    },
    {
      "sha": "a109d3df2bf160044fa978238e10e4aa3bf32b6c",
      "filename": "app/assets/javascripts/select-kit/addon/components/multi-select/selected-color.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/selected-color.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/multi-select/selected-color.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/multi-select/selected-color.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/multi-select/selected-color.js"
    },
    {
      "sha": "7d2aa1ef26bee6b5d71cff1fadf82974e3dd4cca",
      "filename": "app/assets/javascripts/select-kit/addon/components/none-category-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/none-category-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/none-category-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/none-category-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/none-category-row.js"
    },
    {
      "sha": "32dc2ad7ba16053fb14da7cec9b8433e82037a91",
      "filename": "app/assets/javascripts/select-kit/addon/components/notifications-button.js",
      "status": "renamed",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-button.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-button.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/notifications-button.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -13,8 +13,7 @@ export default DropdownSelectBoxComponent.extend({\n     autoFilterable: false,\n     filterable: false,\n     i18nPrefix: \"\",\n-    i18nPostfix: \"\",\n-    showCaret: true\n+    i18nPostfix: \"\"\n   },\n \n   modifyComponentForRow() {",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/notifications-button.js"
    },
    {
      "sha": "ccdebb2d4aeebadb50f7eb8f895454bdd6a7849b",
      "filename": "app/assets/javascripts/select-kit/addon/components/notifications-button/notifications-button-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-button/notifications-button-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-button/notifications-button-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/notifications-button/notifications-button-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/notifications-button/notifications-button-row.js"
    },
    {
      "sha": "fba0d1e62aa5f9ff428cd691507fc45473313afe",
      "filename": "app/assets/javascripts/select-kit/addon/components/notifications-filter.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-filter.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-filter.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/notifications-filter.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/notifications-filter.js"
    },
    {
      "sha": "246108d61f6f737a3dedfb2931065c1cb7e0d69c",
      "filename": "app/assets/javascripts/select-kit/addon/components/notifications-filter/notifications-filter-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-filter/notifications-filter-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/notifications-filter/notifications-filter-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/notifications-filter/notifications-filter-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/notifications-filter/notifications-filter-header.js"
    },
    {
      "sha": "9268f36ded8209d1ac45dea1e89a5670c36a7c29",
      "filename": "app/assets/javascripts/select-kit/addon/components/period-chooser.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/period-chooser.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/period-chooser.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/period-chooser.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/period-chooser.js"
    },
    {
      "sha": "0b6ff3960301dfc9b70ee160ce9b9058fa82371f",
      "filename": "app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/period-chooser/period-chooser-header.js"
    },
    {
      "sha": "649f04c6f2f96064dd4f79f8b8c2983b09610c88",
      "filename": "app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/period-chooser/period-chooser-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/period-chooser/period-chooser-row.js"
    },
    {
      "sha": "15feeeb8174172f842c1fc63f01ddb92e3013f07",
      "filename": "app/assets/javascripts/select-kit/addon/components/pinned-button.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/pinned-button.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/pinned-button.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/pinned-button.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/pinned-button.js"
    },
    {
      "sha": "f220617fe12c429a04cd226d809cdcd44e9fcb45",
      "filename": "app/assets/javascripts/select-kit/addon/components/pinned-options.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/pinned-options.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/pinned-options.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/pinned-options.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/pinned-options.js"
    },
    {
      "sha": "77e46499ba01de02b88467e2ad5333a70efaeb36",
      "filename": "app/assets/javascripts/select-kit/addon/components/search-advanced-category-chooser.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/search-advanced-category-chooser.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/search-advanced-category-chooser.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/search-advanced-category-chooser.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/search-advanced-category-chooser.js"
    },
    {
      "sha": "02acfb5a2e1c579911206566393966524dac83fa",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit.js",
      "status": "renamed",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,5 +1,6 @@\n import I18n from \"I18n\";\n-import EmberObject, { computed, get, guidFor } from \"@ember/object\";\n+import EmberObject, { computed, get } from \"@ember/object\";\n+import { guidFor } from \"@ember/object/internals\";\n import Component from \"@ember/component\";\n import deprecated from \"discourse-common/lib/deprecated\";\n import { makeArray } from \"discourse-common/lib/helpers\";\n@@ -271,7 +272,8 @@ export default Component.extend(\n       selectedNameComponent: \"selected-name\",\n       castInteger: false,\n       preventsClickPropagation: false,\n-      focusAfterOnChange: true\n+      focusAfterOnChange: true,\n+      triggerOnChangeOnTab: true\n     },\n \n     autoFilterable: computed(\"content.[]\", \"selectKit.filter\", function() {",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit.js"
    },
    {
      "sha": "ed4c78ae0b07ae0d8d92c28648c1c7e7ac5ae50a",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/errors-collection.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/errors-collection.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/errors-collection.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/errors-collection.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/errors-collection.js"
    },
    {
      "sha": "d590cfd3bc7f84b522d9f86f5e117fddaa967d89",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-body.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-body.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-body.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-body.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/select-kit-body.js"
    },
    {
      "sha": "661a43d7b5ea4ac2ebcd2648e22100af2fe1c941",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-collection.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-collection.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-collection.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-collection.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/select-kit-collection.js"
    },
    {
      "sha": "4ab476091c0dcdc1a97844a3d344dc71588eb93c",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-create-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-create-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-create-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-create-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/select-kit-create-row.js"
    },
    {
      "sha": "b5b9bccd544e3c5a340371b4626801dbd99284c7",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-filter.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-filter.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-filter.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-filter.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/select-kit-filter.js"
    },
    {
      "sha": "5697826f59f69714d8c079162b2a5205ac9684dc",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-header.js",
      "status": "renamed",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -140,7 +140,11 @@ export default Component.extend(UtilsMixin, {\n       this._focusFilterInput();\n     } else if (event.keyCode === 9) {\n       // Tab\n-      if (this.selectKit.highlighted && this.selectKit.isExpanded) {\n+      if (\n+        this.selectKit.highlighted &&\n+        this.selectKit.isExpanded &&\n+        this.selectKit.options.triggerOnChangeOnTab\n+      ) {\n         this.selectKit.select(\n           this.getValue(this.selectKit.highlighted),\n           this.selectKit.highlighted",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/select-kit-header.js"
    },
    {
      "sha": "49b922d14b94489978969d62ffadd07bd7c9e502",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-none-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-none-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-none-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-none-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/select-kit-none-row.js"
    },
    {
      "sha": "c3ab6024b08ca751fe5fa277162d4c175c33509c",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/select-kit-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/select-kit-row.js"
    },
    {
      "sha": "1ff4a8c8a9b1fb446b6af8c9c691b59b8c10afe5",
      "filename": "app/assets/javascripts/select-kit/addon/components/select-kit/single-select-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/single-select-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/select-kit/single-select-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/select-kit/single-select-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/select-kit/single-select-header.js"
    },
    {
      "sha": "48e03ed8205be7574443ab36b78cdc6b90aff70b",
      "filename": "app/assets/javascripts/select-kit/addon/components/selected-color.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/selected-color.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/selected-color.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/selected-color.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/selected-color.js"
    },
    {
      "sha": "e1c75a6e5f87ed8b255bc8900daa960a858d07fb",
      "filename": "app/assets/javascripts/select-kit/addon/components/selected-name.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/selected-name.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/selected-name.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/selected-name.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/selected-name.js"
    },
    {
      "sha": "7338d80ecfdb0c01ac4e48d65a90d469fa6888a2",
      "filename": "app/assets/javascripts/select-kit/addon/components/single-select.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/single-select.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/single-select.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/single-select.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/single-select.js"
    },
    {
      "sha": "3013c3df1ee8a9e9fd692f752617bb7f74faa43a",
      "filename": "app/assets/javascripts/select-kit/addon/components/tag-chooser-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-chooser-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-chooser-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/tag-chooser-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/tag-chooser-row.js"
    },
    {
      "sha": "5cf4a8330328b7f3c5e9f92cb5915c370f1df918",
      "filename": "app/assets/javascripts/select-kit/addon/components/tag-chooser.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-chooser.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-chooser.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/tag-chooser.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/tag-chooser.js"
    },
    {
      "sha": "26641e6be24f99fb445548a2a88ce8ae5151e3c2",
      "filename": "app/assets/javascripts/select-kit/addon/components/tag-drop.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-drop.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-drop.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/tag-drop.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/tag-drop.js"
    },
    {
      "sha": "ea8a0c5983508b41ff2cb6644fb85a67f21351b1",
      "filename": "app/assets/javascripts/select-kit/addon/components/tag-drop/tag-drop-header.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-drop/tag-drop-header.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-drop/tag-drop-header.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/tag-drop/tag-drop-header.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/tag-drop/tag-drop-header.js"
    },
    {
      "sha": "24a3af4ba3a4c9237bea77be3f5fb6a675c71905",
      "filename": "app/assets/javascripts/select-kit/addon/components/tag-group-chooser.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-group-chooser.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-group-chooser.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/tag-group-chooser.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/tag-group-chooser.js"
    },
    {
      "sha": "67f961fbe36ffad2e1021ec6feb94282cbb93fc7",
      "filename": "app/assets/javascripts/select-kit/addon/components/tag-notifications-button.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-notifications-button.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-notifications-button.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/tag-notifications-button.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/tag-notifications-button.js"
    },
    {
      "sha": "7ababa8f1485f11675a285ca175c9a18fc89b353",
      "filename": "app/assets/javascripts/select-kit/addon/components/tag-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/tag-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/tag-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/tag-row.js"
    },
    {
      "sha": "10a5c3ea2c7751598ecdcaf0bf817d1056924d3f",
      "filename": "app/assets/javascripts/select-kit/addon/components/timezone-input.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/timezone-input.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/timezone-input.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/timezone-input.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/timezone-input.js"
    },
    {
      "sha": "2fffef964cd591fc2ff891b9f79141a89707adde",
      "filename": "app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/toolbar-popup-menu-options.js"
    },
    {
      "sha": "1625cf3e5b61d6c4fbdccc5371cf84426a40c495",
      "filename": "app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.js"
    },
    {
      "sha": "b924b924955983329a5e5f3cf97a0e5924bd630b",
      "filename": "app/assets/javascripts/select-kit/addon/components/topic-footer-mobile-dropdown.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/topic-footer-mobile-dropdown.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/topic-footer-mobile-dropdown.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/topic-footer-mobile-dropdown.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/topic-footer-mobile-dropdown.js"
    },
    {
      "sha": "d9c09001823119b5e0f046a5c177e0a3d67640cf",
      "filename": "app/assets/javascripts/select-kit/addon/components/topic-notifications-button.js",
      "status": "renamed",
      "additions": 10,
      "deletions": 2,
      "changes": 12,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/topic-notifications-button.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/topic-notifications-button.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/topic-notifications-button.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,20 +1,28 @@\n import Component from \"@ember/component\";\n-import { action } from \"@ember/object\";\n+import { action, computed } from \"@ember/object\";\n \n export default Component.extend({\n   layoutName: \"select-kit/templates/components/topic-notifications-button\",\n   classNames: [\"topic-notifications-button\"],\n+  classNameBindings: [\"isLoading\"],\n   appendReason: true,\n   showFullTitle: true,\n   placement: \"bottom-start\",\n   notificationLevel: null,\n   topic: null,\n   showCaret: true,\n+  isLoading: false,\n+  icon: computed(\"isLoading\", function() {\n+    return this.isLoading ? \"spinner\" : null;\n+  }),\n \n   @action\n   changeTopicNotificationLevel(levelId) {\n     if (levelId !== this.notificationLevel) {\n-      this.topic.details.updateNotifications(levelId);\n+      this.set(\"isLoading\", true);\n+      this.topic.details\n+        .updateNotifications(levelId)\n+        .finally(() => this.set(\"isLoading\", false));\n     }\n   }\n });",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/topic-notifications-button.js"
    },
    {
      "sha": "5548eb27417a7cc980143332df6535af8c454f19",
      "filename": "app/assets/javascripts/select-kit/addon/components/topic-notifications-options.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/topic-notifications-options.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/topic-notifications-options.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/topic-notifications-options.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/topic-notifications-options.js"
    },
    {
      "sha": "2342c89b97e86b0d045e7c4d1caff8c35267c418",
      "filename": "app/assets/javascripts/select-kit/addon/components/user-chooser.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/user-chooser.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/user-chooser.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/user-chooser.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/user-chooser.js"
    },
    {
      "sha": "b85ac70d61b656f66ee66369e7a545ce50a932c8",
      "filename": "app/assets/javascripts/select-kit/addon/components/user-chooser/user-row.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/user-chooser/user-row.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/user-chooser/user-row.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/user-chooser/user-row.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/user-chooser/user-row.js"
    },
    {
      "sha": "936b9e25e9ff2bdf89ff9821e9d0dbca59bfb86d",
      "filename": "app/assets/javascripts/select-kit/addon/components/user-notifications-dropdown.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/user-notifications-dropdown.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/components/user-notifications-dropdown.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/user-notifications-dropdown.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/components/user-notifications-dropdown.js"
    },
    {
      "sha": "50b05977f54c9e2cbdcdf41071a2b4cc4439ff53",
      "filename": "app/assets/javascripts/select-kit/addon/mixins/plugin-api.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/mixins/plugin-api.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/mixins/plugin-api.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/mixins/plugin-api.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/mixins/plugin-api.js"
    },
    {
      "sha": "8e96cf4f79a2cfc92c37fd95c638e70bd23a241a",
      "filename": "app/assets/javascripts/select-kit/addon/mixins/tags.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/mixins/tags.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/mixins/tags.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/mixins/tags.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/mixins/tags.js"
    },
    {
      "sha": "6940678b291220f4f82402ad9a3f3b3fdf22c46f",
      "filename": "app/assets/javascripts/select-kit/addon/mixins/utils.js",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/mixins/utils.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/mixins/utils.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/mixins/utils.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/mixins/utils.js"
    },
    {
      "sha": "a800565e6d18e295c54ef2a62ee1f6c8b032be80",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/category-drop/category-drop-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/category-drop/category-drop-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/category-drop/category-drop-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/category-drop/category-drop-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/category-drop/category-drop-header.hbs"
    },
    {
      "sha": "cff579c047afad45adac5b811e07139504e2593a",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/category-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/category-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/category-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/category-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/category-row.hbs"
    },
    {
      "sha": "53501d9f83d325d06eb9d6f6998a3c6d38aa372c",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/color-palettes/color-palettes-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/color-palettes/color-palettes-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/color-palettes/color-palettes-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/color-palettes/color-palettes-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/color-palettes/color-palettes-row.hbs"
    },
    {
      "sha": "5213bceac9dbf0c0db790ea4fb898a77e4ca5817",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/combo-box/combo-box-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/combo-box/combo-box-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/combo-box/combo-box-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/combo-box/combo-box-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/combo-box/combo-box-header.hbs"
    },
    {
      "sha": "838b39e22e95f96598b7a6ace1915579f1a4c691",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/create-color-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/create-color-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/create-color-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/create-color-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/create-color-row.hbs"
    },
    {
      "sha": "297c4fde9db6e52caa56bec02e9c58bdd6c8b616",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/dropdown-select-box/dropdown-select-box-header.hbs"
    },
    {
      "sha": "e654ef8a11b4cfdc33096b663a392c78b7800111",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/dropdown-select-box/dropdown-select-box-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/dropdown-select-box/dropdown-select-box-row.hbs"
    },
    {
      "sha": "171ef3f3a636d412bc725c5c9514c13878b2ad42",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/future-date-input-selector/future-date-input-selector-header.hbs"
    },
    {
      "sha": "9a4a708c9597c91dadb83b74c8a9fad5eb11fff9",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/future-date-input-selector/future-date-input-selector-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/future-date-input-selector/future-date-input-selector-row.hbs"
    },
    {
      "sha": "a2826cffb8394e96fdbc9fa130918b0fa6aac0c7",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/mini-tag-chooser-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/mini-tag-chooser-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/mini-tag-chooser-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/mini-tag-chooser-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/mini-tag-chooser/mini-tag-chooser-header.hbs"
    },
    {
      "sha": "a5d613354d03e7b9f4e44fd28738b3c8c87fdb82",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/selected-collection.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/selected-collection.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/selected-collection.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/mini-tag-chooser/selected-collection.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/mini-tag-chooser/selected-collection.hbs"
    },
    {
      "sha": "e0d1f54f00f70991f3c59e5deebb3f14e9f4ad74",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/multi-select.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/multi-select.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/multi-select.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/multi-select.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/multi-select.hbs"
    },
    {
      "sha": "78f0d8f6aadbf2fe2711e633e834961960f4e64f",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/multi-select/multi-select-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/multi-select/multi-select-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/multi-select/multi-select-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/multi-select/multi-select-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/multi-select/multi-select-header.hbs"
    },
    {
      "sha": "5d35d2b794101182d998b7c90dc5f570f0fce4fc",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/multi-select/selected-category.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/multi-select/selected-category.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/multi-select/selected-category.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/multi-select/selected-category.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/multi-select/selected-category.hbs"
    },
    {
      "sha": "21cee39d91e0fa27937f5c7493578dfa16fa6414",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/notifications-filter/notifications-filter-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/notifications-filter/notifications-filter-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/notifications-filter/notifications-filter-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/notifications-filter/notifications-filter-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/notifications-filter/notifications-filter-header.hbs"
    },
    {
      "sha": "ae393d67c0cafdfae3bbf26cbb6b092ab6edca22",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/period-chooser/period-chooser-header.hbs"
    },
    {
      "sha": "a0a5977c8318508135229bd2f65df96827da9965",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/period-chooser/period-chooser-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/period-chooser/period-chooser-row.hbs"
    },
    {
      "sha": "91bfe147ff62017f37a4b7cab0105a0aa89b130f",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/pinned-button.hbs",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/pinned-button.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/pinned-button.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/pinned-button.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,4 @@\n+<p class=\"reason\">\n+  {{pinned-options value=pinned topic=topic}}\n+  <span class=\"text\">{{html-safe reasonText}}</span>\n+</p>"
    },
    {
      "sha": "71befd8decb9f70829ce37f6c08a3047bfb4b753",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/select-kit/errors-collection.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/errors-collection.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/errors-collection.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/select-kit/errors-collection.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/select-kit/errors-collection.hbs"
    },
    {
      "sha": "cc9c19b3b4fac63d61f0aaf267855a9ad67da8f1",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-body.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-body.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-body.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-body.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/select-kit/select-kit-body.hbs"
    },
    {
      "sha": "3a3cae0cecfe0582752b54ad219f50593b592c4b",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-collection.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-collection.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-collection.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-collection.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/select-kit/select-kit-collection.hbs"
    },
    {
      "sha": "30965ec78eb45af91eed03d77396113a1fd286fe",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-filter.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-filter.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-filter.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-filter.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/select-kit/select-kit-filter.hbs"
    },
    {
      "sha": "b27647f8b4b117c9764f500d976a5f2ae39fa13e",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/select-kit/select-kit-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/select-kit/select-kit-row.hbs"
    },
    {
      "sha": "37bb407decca6c3bad6ff4fc53c212b05f378868",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/select-kit/single-select-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/single-select-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/select-kit/single-select-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/select-kit/single-select-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/select-kit/single-select-header.hbs"
    },
    {
      "sha": "7fb7650bf1bb68127cdcf3ec487c3b4253897576",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/selected-name.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/selected-name.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/selected-name.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/selected-name.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/selected-name.hbs"
    },
    {
      "sha": "a3b71cba23de48e84ec776930044f82107e4e33a",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/single-select.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/single-select.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/single-select.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/single-select.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/single-select.hbs"
    },
    {
      "sha": "ef4dbda96b58de929b1f08a7bbf9a7352283c6b3",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/tag-chooser-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/tag-chooser-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/tag-chooser-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/tag-chooser-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/tag-chooser-row.hbs"
    },
    {
      "sha": "a800565e6d18e295c54ef2a62ee1f6c8b032be80",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/tag-drop/tag-drop-header.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/tag-drop/tag-drop-header.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/tag-drop/tag-drop-header.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/tag-drop/tag-drop-header.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/tag-drop/tag-drop-header.hbs"
    },
    {
      "sha": "da8360699bd3456c3dcb460685f4da0847fa6091",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/tag-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/tag-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/tag-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/tag-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/tag-row.hbs"
    },
    {
      "sha": "0b82f33dcc4719402d7d8c2ee402474f3c30da49",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/toolbar-popup-menu-options/toolbar-popup-menu-options-heading.hbs"
    },
    {
      "sha": "f21111ebbd5de5d66fe4f7db0c2e94a8e89913ce",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/topic-notifications-button.hbs",
      "status": "added",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/topic-notifications-button.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/topic-notifications-button.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/topic-notifications-button.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,30 @@\n+{{#if appendReason}}\n+  <p class=\"reason\">\n+    {{topic-notifications-options\n+      value=notificationLevel\n+      topic=topic\n+      onChange=(action \"changeTopicNotificationLevel\")\n+      options=(hash\n+        icon=icon\n+        showFullTitle=showFullTitle\n+        placement=placement\n+        preventsClickPropagation=true\n+        showCaret=showCaret\n+      )\n+    }}\n+    <span class=\"text\">{{html-safe topic.details.notificationReasonText}}</span>\n+  </p>\n+{{else}}\n+  {{topic-notifications-options\n+    value=notificationLevel\n+    topic=topic\n+    onChange=(action \"changeTopicNotificationLevel\")\n+    options=(hash\n+      icon=icon\n+      showFullTitle=showFullTitle\n+      placement=placement\n+      preventsClickPropagation=true\n+      showCaret=showCaret\n+    )\n+  }}\n+{{/if}}"
    },
    {
      "sha": "2fc47dda495bb46c03c9e3e472bb7c31859965f2",
      "filename": "app/assets/javascripts/select-kit/addon/templates/components/user-chooser/user-row.hbs",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/user-chooser/user-row.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/select-kit/addon/templates/components/user-chooser/user-row.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/templates/components/user-chooser/user-row.hbs?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "previous_filename": "app/assets/javascripts/select-kit/app/templates/components/user-chooser/user-row.hbs"
    },
    {
      "sha": "f54bdb6b5fec93cb82f97311fb388d6fc2eb9ee6",
      "filename": "app/assets/javascripts/select-kit/app/templates/components/pinned-button.hbs",
      "status": "removed",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/assets/javascripts/select-kit/app/templates/components/pinned-button.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/assets/javascripts/select-kit/app/templates/components/pinned-button.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/app/templates/components/pinned-button.hbs?ref=20780a1eeed56b321daf18ee6bbfe681a51d1bf4",
      "patch": "@@ -1,5 +0,0 @@\n-{{pinned-options value=pinned topic=topic}}\n-\n-<p class=\"reason\">\n-  {{html-safe reasonText}}\n-</p>"
    },
    {
      "sha": "50dd20e56ebd4c4f16401abeec51a490f22c0aa0",
      "filename": "app/assets/javascripts/select-kit/app/templates/components/topic-notifications-button.hbs",
      "status": "removed",
      "additions": 0,
      "deletions": 17,
      "changes": 17,
      "blob_url": "https://github.com/discourse/discourse/blob/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/assets/javascripts/select-kit/app/templates/components/topic-notifications-button.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/assets/javascripts/select-kit/app/templates/components/topic-notifications-button.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/app/templates/components/topic-notifications-button.hbs?ref=20780a1eeed56b321daf18ee6bbfe681a51d1bf4",
      "patch": "@@ -1,17 +0,0 @@\n-{{topic-notifications-options\n-  value=notificationLevel\n-  topic=topic\n-  onChange=(action \"changeTopicNotificationLevel\")\n-  options=(hash\n-    showFullTitle=showFullTitle\n-    placement=placement\n-    preventsClickPropagation=true\n-    showCaret=showCaret\n-  )\n-}}\n-\n-{{#if appendReason}}\n-  <p class=\"reason\">\n-    {{html-safe topic.details.notificationReasonText}}\n-  </p>\n-{{/if}}"
    },
    {
      "sha": "4e2a7adc0724e0f0aa53c1ef9cd79fca119a76ce",
      "filename": "app/assets/javascripts/wizard-application.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/wizard-application.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/javascripts/wizard-application.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/wizard-application.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,6 +1,6 @@\n //= require_tree ./discourse-common/addon\n //= require i18n-patches\n-//= require_tree ./select-kit/app\n+//= require_tree ./select-kit/addon\n //= require wizard/router\n //= require wizard/wizard\n //= require_tree ./wizard/templates"
    },
    {
      "sha": "a80e54c4fdaa10bf1d4bd729be1096ce0e9f0bb0",
      "filename": "app/assets/stylesheets/common/base/_topic-list.scss",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/_topic-list.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/_topic-list.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/base/_topic-list.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -53,7 +53,6 @@\n     color: $primary-medium;\n   }\n   span.badge-category {\n-    font-weight: normal;\n     color: $primary-medium;\n   }\n   a.discourse-tag {"
    },
    {
      "sha": "05a2902905955ae2ffa1b648c8d91798d6e40e79",
      "filename": "app/assets/stylesheets/common/base/alert.scss",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/alert.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/alert.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/base/alert.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,6 +3,7 @@\n   background-color: $danger-low;\n   color: $primary;\n   position: relative;\n+  margin-bottom: 1em;\n \n   .close {\n     font-size: $font-up-3;"
    },
    {
      "sha": "bff0addac1ab46d7f581b7b9478023270f9af49c",
      "filename": "app/assets/stylesheets/common/base/crawler_layout.scss",
      "status": "modified",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/crawler_layout.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/crawler_layout.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/base/crawler_layout.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -27,6 +27,36 @@ body.crawler {\n \n   .topic-list {\n     margin-bottom: 1em;\n+    @media (max-width: 850px) {\n+      td {\n+        word-break: break-all;\n+        &.posters {\n+          a:not(:last-of-type) {\n+            display: none;\n+          }\n+          a:last-of-type {\n+            display: block;\n+          }\n+        }\n+      }\n+\n+      td,\n+      th {\n+        &.views {\n+          display: none;\n+        }\n+      }\n+\n+      .link-top-line {\n+        a.title {\n+          padding: 0;\n+        }\n+      }\n+\n+      .link-bottom-line {\n+        margin-top: 0.25em;\n+      }\n+    }\n   }\n \n   footer {"
    },
    {
      "sha": "48c361c1647092d376a41a14b71e0d3848d90e92",
      "filename": "app/assets/stylesheets/common/base/topic-post.scss",
      "status": "modified",
      "additions": 46,
      "deletions": 5,
      "changes": 51,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/topic-post.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/topic-post.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/base/topic-post.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1005,10 +1005,51 @@ a.mention-group {\n }\n \n #topic-footer-buttons {\n-  .reason {\n-    color: $primary-high;\n-    display: inline;\n-    margin: 0 0 0 8px;\n-    line-height: $line-height-medium;\n+  padding: 0.5em 0;\n+\n+  .topic-footer-main-buttons {\n+    margin: 0 0 -0.5em 0;\n+    display: flex;\n+    flex-wrap: wrap;\n+\n+    > .btn {\n+      margin: 0 0.5em 0.5em 0;\n+      display: inline-flex;\n+      align-items: center;\n+\n+      .d-button-label {\n+        display: flex;\n+        flex: 1 0 auto;\n+        align-items: center;\n+      }\n+    }\n+\n+    .topic-admin-menu-button-container {\n+      display: inline-flex;\n+    }\n+\n+    .topic-admin-menu-button-container > span:not(:empty) {\n+      margin: 0 0.5em 0.5em 0;\n+    }\n+  }\n+\n+  .pinned-button:not(.is-hidden) + .topic-notifications-button {\n+    margin-top: 0;\n+  }\n+\n+  .pinned-button,\n+  .topic-notifications-button {\n+    margin: 1em 0;\n+\n+    .reason {\n+      color: $primary-high;\n+      display: inline-flex;\n+      margin: 0;\n+      align-items: center;\n+\n+      .text {\n+        margin-left: 0.5em;\n+      }\n+    }\n   }\n }"
    },
    {
      "sha": "4d5e9f428867036ebb03f11b436071097ed2842b",
      "filename": "app/assets/stylesheets/common/base/user.scss",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/user.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/base/user.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/base/user.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -653,6 +653,9 @@\n     padding: 5px 0;\n     font-weight: bold;\n   }\n+  .save-theme-alert {\n+    font-size: $font-down-1;\n+  }\n }\n \n .paginated-topics-list {"
    },
    {
      "sha": "20ed535931dc536c6d2388870b8685bfd4657f06",
      "filename": "app/assets/stylesheets/common/components/badges.scss",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/components/badges.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/components/badges.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/components/badges.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -17,7 +17,6 @@\n \n .badge-wrapper {\n   font-size: $font-down-1;\n-  font-weight: bold;\n   white-space: nowrap;\n   position: relative;\n   display: inline-flex;"
    },
    {
      "sha": "df43c9560354ac108a6cfd0ea39137b2bc3dcac0",
      "filename": "app/assets/stylesheets/common/select-kit/category-row.scss",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/category-row.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/category-row.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/select-kit/category-row.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -9,6 +9,9 @@\n       -ms-flex: 1 1 auto;\n       flex: 1 1 auto;\n     }\n+    .category-desc p {\n+      margin: 0;\n+    }\n     .category-status {\n       .badge-wrapper.box {\n         margin-bottom: 1px;"
    },
    {
      "sha": "3e51092ae3984568eb1cbe3839a3bdbd6e60f6cd",
      "filename": "app/assets/stylesheets/common/select-kit/pinned-button.scss",
      "status": "modified",
      "additions": 0,
      "deletions": 21,
      "changes": 21,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/pinned-button.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/pinned-button.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/select-kit/pinned-button.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,28 +1,7 @@\n #topic-footer-buttons {\n   .pinned-button {\n-    min-width: auto;\n-    margin: 1em 0;\n-\n     &.is-hidden {\n       display: none;\n     }\n-\n-    .btn {\n-      margin: 0;\n-    }\n-\n-    .reason {\n-      display: inline;\n-      line-height: $line-height-medium;\n-    }\n-  }\n-}\n-\n-.pinned-button {\n-  margin: 0;\n-  min-width: auto;\n-\n-  .pinned-options {\n-    display: inline;\n   }\n }"
    },
    {
      "sha": "a9769b597100cb6f3d6146e7f1126efb8bebdcda",
      "filename": "app/assets/stylesheets/common/select-kit/select-kit.scss",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/select-kit.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/select-kit.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/select-kit/select-kit.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -63,6 +63,11 @@\n     flex-direction: row;\n     min-height: 30px;\n \n+    .d-icon-spinner {\n+      -webkit-animation: rotate-forever 1s infinite linear;\n+      animation: rotate-forever 1s infinite linear;\n+    }\n+\n     .selected-name {\n       text-align: left;\n       flex: 0 1 auto;"
    },
    {
      "sha": "b3808031a1d92433dd013923413b28d061f71ace",
      "filename": "app/assets/stylesheets/common/select-kit/topic-notifications-button.scss",
      "status": "modified",
      "additions": 10,
      "deletions": 19,
      "changes": 29,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/topic-notifications-button.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/common/select-kit/topic-notifications-button.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/select-kit/topic-notifications-button.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,27 +1,18 @@\n-#topic-footer-buttons {\n-  .topic-notifications-button {\n-    min-width: auto;\n-    margin: 1em 0;\n+.topic-notifications-button {\n+  &.is-loading {\n+    pointer-events: none;\n+    user-select: none;\n \n-    .btn {\n+    .d-icon-spinner {\n       margin: 0;\n     }\n \n-    .reason {\n-      display: inline;\n-      line-height: $line-height-medium;\n+    .selected-name .d-icon {\n+      display: none;\n     }\n-  }\n-}\n-\n-.topic-notifications-button .topic-notifications-options {\n-  min-width: auto;\n-}\n-\n-.topic-notifications-button {\n-  margin: 0;\n \n-  .topic-notifications-options {\n-    display: inline-flex;\n+    .topic-notifications-options {\n+      opacity: 0.5;\n+    }\n   }\n }"
    },
    {
      "sha": "e9213e897b3a3a5df8354f00f33262ae16697c11",
      "filename": "app/assets/stylesheets/desktop.scss",
      "status": "modified",
      "additions": 1,
      "deletions": 19,
      "changes": 20,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/desktop.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/desktop.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/desktop.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,24 +1,6 @@\n @import \"common\";\n \n-/* @import \"desktop/*\"; TODO: get this working again */\n-\n-@import \"desktop/alert\";\n-@import \"desktop/banner\";\n-@import \"desktop/compose\";\n-@import \"desktop/discourse\";\n-@import \"desktop/header\";\n-@import \"desktop/login\";\n-@import \"desktop/modal\";\n-@import \"desktop/category-list\";\n-@import \"desktop/latest-topic-list\";\n-@import \"desktop/topic-list\";\n-@import \"desktop/topic-post\";\n-@import \"desktop/topic\";\n-@import \"desktop/upload\";\n-@import \"desktop/user\";\n-@import \"desktop/history\";\n-@import \"desktop/group\";\n-@import \"desktop/admin_customize\";\n+@import \"desktop/*\";\n \n // Import all component-specific files\n @import \"desktop/components/*\";"
    },
    {
      "sha": "f3f57eac668ffc07fb6abccb520e85518a6bbacd",
      "filename": "app/assets/stylesheets/desktop/alert.scss",
      "status": "removed",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/assets/stylesheets/desktop/alert.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/assets/stylesheets/desktop/alert.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/desktop/alert.scss?ref=20780a1eeed56b321daf18ee6bbfe681a51d1bf4",
      "patch": "@@ -1,3 +0,0 @@\n-.alert {\n-  margin-bottom: 1em;\n-}"
    },
    {
      "sha": "5adc17d3eb138d41c8634ed426207bdc6c1d6b0a",
      "filename": "app/assets/stylesheets/desktop/topic-post.scss",
      "status": "modified",
      "additions": 4,
      "deletions": 13,
      "changes": 17,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/desktop/topic-post.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/desktop/topic-post.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/desktop/topic-post.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -451,20 +451,15 @@ pre.copy-codeblocks:hover .copy-cmd {\n   }\n }\n \n-@mixin topic-footer-button {\n-  margin-bottom: 5px;\n-  margin-right: 10px;\n-}\n-\n #topic-footer-buttons {\n-  padding: 10px 10px 0 0;\n-  float: left;\n-  .btn {\n-    @include topic-footer-button;\n+  max-width: calc(690px + (11px * 2) + 45px);\n+\n+  .bookmark {\n     .d-icon-bookmark.bookmarked {\n       color: $tertiary;\n     }\n   }\n+\n   .bookmark.bookmarked .d-icon-bookmark,\n   .bookmark.bookmarked .d-icon-discourse-bookmark-clock {\n     color: $tertiary;\n@@ -474,10 +469,6 @@ pre.copy-codeblocks:hover .copy-cmd {\n   }\n }\n \n-#topic-footer-button {\n-  width: 757px;\n-}\n-\n .suggested-topics {\n   clear: left;\n   padding: 20px 0 15px 0;"
    },
    {
      "sha": "a3202ca43c1e43d0a191c968371418058f6bf762",
      "filename": "app/assets/stylesheets/mobile.scss",
      "status": "modified",
      "additions": 1,
      "deletions": 32,
      "changes": 33,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/mobile.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,37 +1,6 @@\n @import \"common\";\n \n-/* @import \"mobile/*\"; TODO: get this working again */\n-\n-@import \"mobile/buttons\";\n-@import \"mobile/alert\";\n-@import \"mobile/banner\";\n-@import \"mobile/compose\";\n-@import \"mobile/discourse\";\n-@import \"mobile/header\";\n-@import \"mobile/login\";\n-@import \"mobile/modal\";\n-@import \"mobile/topic-list\";\n-@import \"mobile/topic-post\";\n-@import \"mobile/topic\";\n-@import \"mobile/upload\";\n-@import \"mobile/user\";\n-@import \"mobile/history\";\n-@import \"mobile/lightbox\";\n-@import \"mobile/directory\";\n-@import \"mobile/search\";\n-@import \"mobile/emoji\";\n-@import \"mobile/ring\";\n-@import \"mobile/group\";\n-@import \"mobile/dashboard\";\n-@import \"mobile/admin_badges\";\n-@import \"mobile/admin_customize\";\n-@import \"mobile/admin_reports\";\n-@import \"mobile/admin_report\";\n-@import \"mobile/admin_report_table\";\n-@import \"mobile/admin_report_counters\";\n-@import \"mobile/admin_emojis\";\n-@import \"mobile/menu-panel\";\n-@import \"mobile/reviewables\";\n+@import \"mobile/*\";\n \n // Import all component-specific files\n @import \"mobile/components/*\";"
    },
    {
      "sha": "12e60245e5775d0524f9d5cd592ca7ec6077db28",
      "filename": "app/assets/stylesheets/mobile/alert.scss",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/alert.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/alert.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/mobile/alert.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,7 +1,8 @@\n-// there are (n) new or updated topics, click to show\n .alert.alert-info {\n-  margin: 0;\n+  margin-bottom: 0.5em;\n   &.clickable {\n+    // there are (n) new or updated topics, click to show\n+    margin-bottom: 0;\n     padding: 1em;\n   }\n }"
    },
    {
      "sha": "fc308f058808fc9176f35be7849727dc1ba9fa77",
      "filename": "app/assets/stylesheets/mobile/banner.scss",
      "status": "modified",
      "additions": 1,
      "deletions": 6,
      "changes": 7,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/banner.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/banner.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/mobile/banner.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,11 +3,6 @@\n // --------------------------------------------------\n \n #banner {\n-  // go full width on mobile, by extending into the 10px wrap\n-  // borders on left and right\n-  margin: 0 -10px;\n   max-height: 180px;\n-  @media all and (max-height: 499px) {\n-    max-height: 100px;\n-  }\n+  height: 20vh;\n }"
    },
    {
      "sha": "c9406abca6b11b0de485e57a288d05a7568aca4a",
      "filename": "app/assets/stylesheets/mobile/discourse.scss",
      "status": "modified",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/discourse.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/discourse.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/mobile/discourse.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -63,11 +63,6 @@ blockquote {\n   margin-bottom: 9px;\n }\n \n-// categories should not be bold on mobile; they fight with the topic title too much\n-.badge-wrapper {\n-  font-weight: normal;\n-}\n-\n .mobile-nav {\n   margin: 0;\n   padding: 0;"
    },
    {
      "sha": "d84b4a727cfc7d107253e9af67cece5b1913493e",
      "filename": "app/assets/stylesheets/mobile/topic-post.scss",
      "status": "modified",
      "additions": 4,
      "deletions": 19,
      "changes": 23,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/topic-post.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/assets/stylesheets/mobile/topic-post.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/mobile/topic-post.scss?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -36,6 +36,7 @@ span.badge-posts {\n     .double-button {\n       display: flex;\n       flex: 0 1 auto;\n+      align-items: center;\n       button {\n         &.like,\n         &.read-indicator,\n@@ -235,20 +236,16 @@ a.reply-to-tab {\n }\n \n #topic-footer-buttons {\n-  @include clearfix;\n-  padding: 20px 0 0 0;\n   .d-icon-bookmark.bookmarked,\n   .d-icon-discourse-bookmark-clock.bookmarked {\n     color: $tertiary;\n   }\n-  .combobox {\n-    margin-right: 0.5em;\n+\n+  .topic-footer-mobile-dropdown {\n+    margin: 0 0.5em 0.5em 0;\n     width: 160px;\n-    margin-bottom: 0.5em;\n   }\n-}\n \n-#topic-footer-buttons {\n   .topic-notifications-button,\n   .pinned-button {\n     display: flex;\n@@ -263,11 +260,6 @@ a.reply-to-tab {\n   }\n }\n \n-#topic-footer-button {\n-  width: 100px;\n-  margin: 0 auto;\n-}\n-\n .suggested-topics {\n   clear: left;\n   padding: 20px 0 15px 0;\n@@ -292,13 +284,6 @@ span.post-count {\n   opacity: 0.8;\n }\n \n-#topic-footer-buttons {\n-  .btn {\n-    margin-bottom: 0.5em;\n-    margin-right: 0.5em;\n-  }\n-}\n-\n #topic-title {\n   z-index: z(\"base\") + 1;\n   margin: 0 0 0 0 !important;"
    },
    {
      "sha": "3f3f9e15a36a4eff19688d9bae66e94a2e4c4904",
      "filename": "app/controllers/about_controller.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/controllers/about_controller.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/controllers/about_controller.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/controllers/about_controller.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -16,7 +16,7 @@ def index\n         render :index\n       end\n       format.json do\n-        render_serialized(@about, AboutSerializer)\n+        render_json_dump(AboutSerializer.new(@about, scope: guardian))\n       end\n     end\n   end"
    },
    {
      "sha": "5eadbbcf6d708f08411891fcc1e8983bf658a3e3",
      "filename": "app/controllers/list_controller.rb",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/controllers/list_controller.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/controllers/list_controller.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/controllers/list_controller.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -331,7 +331,13 @@ def set_category\n \n     params[:category] = @category.id.to_s\n \n-    @description_meta = @category.description_text\n+    @description_meta = if @category.uncategorized?\n+      I18n.t('category.uncategorized_description', locale: SiteSetting.default_locale)\n+    else\n+      @category.description_text\n+    end\n+    @description_meta = SiteSetting.site_description if @description_meta.blank?\n+\n     if !guardian.can_see?(@category)\n       if SiteSetting.detailed_404\n         raise Discourse::InvalidAccess"
    },
    {
      "sha": "6520ec70975e9de808d0fb605adb142a32050fa9",
      "filename": "app/controllers/themes_controller.rb",
      "status": "removed",
      "additions": 0,
      "deletions": 31,
      "changes": 31,
      "blob_url": "https://github.com/discourse/discourse/blob/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/controllers/themes_controller.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/20780a1eeed56b321daf18ee6bbfe681a51d1bf4/app/controllers/themes_controller.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/controllers/themes_controller.rb?ref=20780a1eeed56b321daf18ee6bbfe681a51d1bf4",
      "patch": "@@ -1,31 +0,0 @@\n-# frozen_string_literal: true\n-\n-class ThemesController < ::ApplicationController\n-  def assets\n-    theme_ids = params[:ids].to_s.split(\"-\").map(&:to_i)\n-\n-    if params[:ids] == \"default\"\n-      theme_ids = nil\n-    else\n-      raise Discourse::NotFound unless guardian.allow_themes?(theme_ids)\n-    end\n-\n-    targets = view_context.mobile_view? ? [:mobile, :mobile_theme] : [:desktop, :desktop_theme]\n-    targets << :admin if guardian.is_staff?\n-    targets.append(*Discourse.find_plugin_css_assets(mobile_view: true, desktop_view: true))\n-\n-    object = targets.map do |target|\n-      Stylesheet::Manager.stylesheet_data(target, theme_ids).map do |hash|\n-        next hash unless Rails.env.development?\n-\n-        dup_hash = hash.dup\n-        dup_hash[:new_href] = dup_hash[:new_href].dup\n-        dup_hash[:new_href] << (dup_hash[:new_href].include?(\"?\") ? \"&\" : \"?\")\n-        dup_hash[:new_href] << SecureRandom.hex\n-        dup_hash\n-      end\n-    end.flatten\n-\n-    render json: object.as_json\n-  end\n-end"
    },
    {
      "sha": "14364d45c326c3ce432e9f08a9af5778930a7771",
      "filename": "app/helpers/email_helper.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 6,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/helpers/email_helper.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/helpers/email_helper.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/helpers/email_helper.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -25,12 +25,8 @@ def email_topic_link(topic)\n     raw \"<a href='#{Discourse.base_url}#{url}' style='color: ##{@anchor_color}'>#{title}</a>\"\n   end\n \n-  def email_html_template(binding_arg)\n-    template = EmailStyle.new.html.sub(\n-      '%{email_content}',\n-      '<%= yield %><% if defined?(html_body) %><%= html_body %><% end %>'\n-    )\n-    ERB.new(template).result(binding_arg)\n+  def email_html_template\n+    EmailStyle.new.html.sub('%{email_content}', yield).html_safe\n   end\n \n   protected"
    },
    {
      "sha": "3d0d8ae905f9553729232400d95f43e8b2089dab",
      "filename": "app/models/application_request.rb",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/application_request.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/application_request.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/application_request.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -16,15 +16,16 @@ class ApplicationRequest < ActiveRecord::Base\n   include CachedCounting\n \n   def self.disable\n-    @enabled = false\n+    @disabled = true\n   end\n \n   def self.enable\n-    @enabled = true\n+    @disabled = false\n   end\n \n   def self.increment!(type, opts = nil)\n-    perform_increment!(redis_key(type), opts) if @enabled\n+    return if @disabled\n+    perform_increment!(redis_key(type), opts)\n   end\n \n   def self.write_cache!(date = nil)"
    },
    {
      "sha": "6ecfe9d3afe0497875439e2e27a18adbcbba40c4",
      "filename": "app/models/category.rb",
      "status": "modified",
      "additions": 9,
      "deletions": 17,
      "changes": 26,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/category.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/category.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/category.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -709,37 +709,29 @@ def seeded?\n     ].include? id\n   end\n \n-  @@url_cache = DistributedCache.new('category_url')\n-\n-  def clear_url_cache\n-    @@url_cache.clear\n-  end\n-\n   def full_slug(separator = \"-\")\n-    start_idx = \"#{Discourse.base_uri}/c/\".length\n+    start_idx = \"#{Discourse.base_uri}/c/\".size\n     url[start_idx..-1].gsub(\"/\", separator)\n   end\n \n-  def url\n-    url = @@url_cache[self.id]\n-    unless url\n-      url = \"#{Discourse.base_uri}/c/#{slug_path.join('/')}\"\n+  @@url_cache = DistributedCache.new(\"category_url\")\n \n-      @@url_cache[self.id] = url\n-    end\n+  def clear_url_cache\n+    @@url_cache.clear\n+  end\n \n-    url\n+  def url\n+    @@url_cache[self.id] ||= \"#{Discourse.base_uri}/c/#{slug_path.join('/')}\"\n   end\n \n   def url_with_id\n     self.parent_category ? \"#{url}/#{self.id}\" : \"#{Discourse.base_uri}/c/#{self.slug}/#{self.id}\"\n   end\n \n-  # If the name changes, try and update the category definition topic too if it's\n-  # an exact match\n+  # If the name changes, try and update the category definition topic too if it's an exact match\n   def rename_category_definition\n-    old_name = saved_changes.transform_values(&:first)[\"name\"]\n     return unless topic.present?\n+    old_name = saved_changes.transform_values(&:first)[\"name\"]\n     if topic.title == I18n.t(\"category.topic_prefix\", category: old_name)\n       topic.update_attribute(:title, I18n.t(\"category.topic_prefix\", category: name))\n     end"
    },
    {
      "sha": "21e5a137dcf733d88caa80fd98677b714816fa08",
      "filename": "app/models/global_setting.rb",
      "status": "modified",
      "additions": 18,
      "deletions": 6,
      "changes": 24,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/global_setting.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/global_setting.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/global_setting.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -164,9 +164,15 @@ def self.redis_config\n         c[:port] = redis_port if redis_port\n \n         if redis_slave_host && redis_slave_port\n-          c[:slave_host] = redis_slave_host\n-          c[:slave_port] = redis_slave_port\n-          c[:connector] = DiscourseRedis::Connector\n+          if ENV[\"RAILS_FAILOVER\"]\n+            c[:replica_host] = redis_slave_host\n+            c[:replica_port] = redis_slave_port\n+            c[:connector] = RailsFailover::Redis::Connector\n+          else\n+            c[:slave_host] = redis_slave_host\n+            c[:slave_port] = redis_slave_port\n+            c[:connector] = DiscourseRedis::Connector\n+          end\n         end\n \n         c[:password] = redis_password if redis_password.present?\n@@ -188,9 +194,15 @@ def self.message_bus_redis_config\n         c[:port] = message_bus_redis_port if message_bus_redis_port\n \n         if message_bus_redis_slave_host && message_bus_redis_slave_port\n-          c[:slave_host] = message_bus_redis_slave_host\n-          c[:slave_port] = message_bus_redis_slave_port\n-          c[:connector] = DiscourseRedis::Connector\n+          if ENV[\"RAILS_FAILOVER\"]\n+            c[:replica_host] = message_bus_redis_slave_host\n+            c[:replica_port] = message_bus_redis_slave_port\n+            c[:connector] = RailsFailover::Redis::Connector\n+          else\n+            c[:slave_host] = message_bus_redis_slave_host\n+            c[:slave_port] = message_bus_redis_slave_port\n+            c[:connector] = DiscourseRedis::Connector\n+          end\n         end\n \n         c[:password] = message_bus_redis_password if message_bus_redis_password.present?"
    },
    {
      "sha": "8199a53cf6260c59a79d7159b9636149fb823758",
      "filename": "app/models/group_archived_message.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/group_archived_message.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/group_archived_message.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/group_archived_message.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,7 +1,7 @@\n # frozen_string_literal: true\n \n class GroupArchivedMessage < ActiveRecord::Base\n-  belongs_to :user\n+  belongs_to :group\n   belongs_to :topic\n \n   def self.move_to_inbox!(group_id, topic)"
    },
    {
      "sha": "e1a3a1f391e5b51e5b1ad378860d9a2182c7ea63",
      "filename": "app/models/post.rb",
      "status": "modified",
      "additions": 5,
      "deletions": 9,
      "changes": 14,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/post.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/post.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/post.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -159,14 +159,6 @@ def self.find_by_detail(key, value)\n     includes(:post_details).find_by(post_details: { key: key, value: value })\n   end\n \n-  def self.excerpt_size=(sz)\n-    @excerpt_size = sz\n-  end\n-\n-  def self.excerpt_size\n-    @excerpt_size || 220\n-  end\n-\n   def whisper?\n     post_type == Post.types[:whisper]\n   end\n@@ -482,7 +474,7 @@ def excerpt(maxlength = nil, options = {})\n   end\n \n   def excerpt_for_topic\n-    Post.excerpt(cooked, Post.excerpt_size, strip_links: true, strip_images: true, post: self)\n+    Post.excerpt(cooked, SiteSetting.topic_excerpt_maxlength, strip_links: true, strip_images: true, post: self)\n   end\n \n   def is_first_post?\n@@ -658,6 +650,10 @@ def rebake!(invalidate_broken_images: false, invalidate_oneboxes: false, priorit\n       baked_version: BAKED_VERSION\n     )\n \n+    if is_first_post?\n+      topic.update_excerpt(excerpt_for_topic)\n+    end\n+\n     if invalidate_broken_images\n       custom_fields.delete(BROKEN_IMAGES)\n       save_custom_fields"
    },
    {
      "sha": "38affdb327ba2b2eae6dd528f0f398a53ad2b820",
      "filename": "app/models/topic.rb",
      "status": "modified",
      "additions": 11,
      "deletions": 4,
      "changes": 15,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/topic.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/topic.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/topic.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -33,11 +33,11 @@ def self.share_thumbnail_size\n   end\n \n   def self.thumbnail_sizes\n-    [ self.share_thumbnail_size ]\n+    [ self.share_thumbnail_size ] + DiscoursePluginRegistry.topic_thumbnail_sizes\n   end\n \n-  def thumbnail_job_redis_key(extra_sizes)\n-    \"generate_topic_thumbnail_enqueue_#{id}_#{extra_sizes.inspect}\"\n+  def thumbnail_job_redis_key(sizes)\n+    \"generate_topic_thumbnail_enqueue_#{id}_#{sizes.inspect}\"\n   end\n \n   def filtered_topic_thumbnails(extra_sizes: [])\n@@ -79,7 +79,7 @@ def thumbnail_info(enqueue_if_missing: false, extra_sizes: [])\n     if SiteSetting.create_thumbnails &&\n        enqueue_if_missing &&\n        records.length < thumbnail_sizes.length &&\n-       Discourse.redis.set(thumbnail_job_redis_key(extra_sizes), 1, nx: true, ex: 1.minute)\n+       Discourse.redis.set(thumbnail_job_redis_key(thumbnail_sizes), 1, nx: true, ex: 1.minute)\n \n       Jobs.enqueue(:generate_topic_thumbnails, { topic_id: id, extra_sizes: extra_sizes })\n     end\n@@ -1476,6 +1476,13 @@ def convert_to_private_message(user)\n     private_topic\n   end\n \n+  def update_excerpt(excerpt)\n+    update_column(:excerpt, excerpt)\n+    if archetype == \"banner\"\n+      ApplicationController.banner_json_cache.clear\n+    end\n+  end\n+\n   def pm_with_non_human_user?\n     sql = <<~SQL\n     SELECT 1 FROM topics"
    },
    {
      "sha": "362ee79f4ac959ab0b5c0c4e8400b23c6586fa59",
      "filename": "app/models/topic_embed.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/topic_embed.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/topic_embed.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/topic_embed.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -109,6 +109,8 @@ def self.find_remote(url)\n \n     url = UrlHelper.escape_uri(url)\n     original_uri = URI.parse(url)\n+    raise URI::InvalidURIError unless original_uri.is_a?(URI::HTTP)\n+\n     opts = {\n       tags: %w[div p code pre h1 h2 h3 b em i strong a img ul li ol blockquote],\n       attributes: %w[href src class],"
    },
    {
      "sha": "31c931c172b2ce5bffb91a84efd32bbbf62313ef",
      "filename": "app/models/upload.rb",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/upload.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/upload.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/upload.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -448,7 +448,3 @@ def short_url_basename\n #  index_uploads_on_url                     (url)\n #  index_uploads_on_user_id                 (user_id)\n #\n-# Foreign Keys\n-#\n-#  fk_rails_...  (access_control_post_id => posts.id)\n-#"
    },
    {
      "sha": "d9678d1a1c75219d1c3193cfcbc8d7ca3dbc905d",
      "filename": "app/models/user.rb",
      "status": "modified",
      "additions": 62,
      "deletions": 67,
      "changes": 129,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/user.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/user.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/user.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -7,102 +7,95 @@ class User < ActiveRecord::Base\n   include SecondFactorManager\n   include HasDestroyedWebHook\n \n+  DEFAULT_FEATURED_BADGE_COUNT = 3\n+\n+  # not deleted on user delete\n   has_many :posts\n-  has_many :notifications, dependent: :delete_all\n-  has_many :topic_users, dependent: :delete_all\n+  has_many :topics\n+  has_many :uploads\n+\n   has_many :category_users, dependent: :destroy\n   has_many :tag_users, dependent: :destroy\n   has_many :user_api_keys, dependent: :destroy\n-  has_many :topics\n-  has_many :bookmarks\n-\n-  # dependent deleting handled via before_destroy\n-  has_many :user_actions\n-  has_many :post_actions\n-\n-  DEFAULT_FEATURED_BADGE_COUNT = 3\n-\n-  has_many :user_badges, -> { for_enabled_badges }, dependent: :destroy\n-  has_many :badges, through: :user_badges\n-  has_many :default_featured_user_badges,\n-            -> { for_enabled_badges.grouped_with_count.where(\"featured_rank <= ?\", DEFAULT_FEATURED_BADGE_COUNT) },\n-            class_name: \"UserBadge\"\n-\n-  has_many :email_logs, dependent: :delete_all\n-  has_many :incoming_emails, dependent: :delete_all\n-  has_many :post_timings\n   has_many :topic_allowed_users, dependent: :destroy\n-  has_many :topics_allowed, through: :topic_allowed_users, source: :topic\n+  has_many :user_archived_messages, dependent: :destroy\n+  has_many :email_change_requests, dependent: :destroy\n   has_many :email_tokens, dependent: :destroy\n-  has_many :user_visits, dependent: :destroy\n   has_many :invites, dependent: :destroy\n   has_many :topic_links, dependent: :destroy\n-  has_many :uploads\n-  has_many :user_warnings\n-  has_many :user_archived_messages, dependent: :destroy\n-  has_many :email_change_requests, dependent: :destroy\n-\n-  # see before_destroy\n-  has_many :directory_items\n-  has_many :user_auth_tokens, dependent: :destroy\n-  has_many :user_auth_token_logs, dependent: :destroy\n-\n-  has_many :group_users, dependent: :destroy\n-  has_many :groups, through: :group_users\n-  has_many :group_requests, dependent: :destroy\n-  has_many :secure_categories, through: :groups, source: :categories\n-\n   has_many :user_uploads, dependent: :destroy\n   has_many :user_emails, dependent: :destroy\n-\n-  has_one :primary_email, -> { where(primary: true)  }, class_name: 'UserEmail', dependent: :destroy\n+  has_many :user_associated_accounts, dependent: :destroy\n+  has_many :oauth2_user_infos, dependent: :destroy\n+  has_many :user_second_factors, dependent: :destroy\n+  has_many :user_badges, -> { for_enabled_badges }, dependent: :destroy\n+  has_many :user_auth_tokens, dependent: :destroy\n+  has_many :group_users, dependent: :destroy\n+  has_many :user_warnings, dependent: :destroy\n+  has_many :api_keys, dependent: :destroy\n+  has_many :push_subscriptions, dependent: :destroy\n+  has_many :acting_group_histories, dependent: :destroy, foreign_key: :acting_user_id, class_name: 'GroupHistory'\n+  has_many :targeted_group_histories, dependent: :destroy, foreign_key: :target_user_id, class_name: 'GroupHistory'\n+  has_many :reviewable_scores, dependent: :destroy\n \n   has_one :user_option, dependent: :destroy\n   has_one :user_avatar, dependent: :destroy\n-  has_many :user_associated_accounts, dependent: :destroy\n   has_one :github_user_info, dependent: :destroy\n-  has_many :oauth2_user_infos, dependent: :destroy\n-  has_many :user_second_factors, dependent: :destroy\n+  has_one :primary_email, -> { where(primary: true)  }, class_name: 'UserEmail', dependent: :destroy\n+  has_one :user_stat, dependent: :destroy\n+  has_one :user_profile, dependent: :destroy, inverse_of: :user\n+  has_one :single_sign_on_record, dependent: :destroy\n+  has_one :anonymous_user_master, class_name: 'AnonymousUser', dependent: :destroy\n+  has_one :anonymous_user_shadow, ->(record) { where(active: true) }, foreign_key: :master_user_id, class_name: 'AnonymousUser', dependent: :destroy\n \n-  has_many :totps, -> {\n-    where(method: UserSecondFactor.methods[:totp], enabled: true)\n-  }, class_name: \"UserSecondFactor\"\n+  # delete all is faster but bypasses callbacks\n+  has_many :bookmarks, dependent: :delete_all\n+  has_many :notifications, dependent: :delete_all\n+  has_many :topic_users, dependent: :delete_all\n+  has_many :email_logs, dependent: :delete_all\n+  has_many :incoming_emails, dependent: :delete_all\n+  has_many :user_visits, dependent: :delete_all\n+  has_many :user_auth_token_logs, dependent: :delete_all\n+  has_many :group_requests, dependent: :delete_all\n+  has_many :muted_user_records, class_name: 'MutedUser', dependent: :delete_all\n+  has_many :ignored_user_records, class_name: 'IgnoredUser', dependent: :delete_all\n \n+  # dependent deleting handled via before_destroy (special cases)\n+  has_many :user_actions\n+  has_many :post_actions\n+  has_many :post_timings\n+  has_many :directory_items\n   has_many :security_keys, -> {\n     where(enabled: true)\n   }, class_name: \"UserSecurityKey\"\n \n-  has_one :anonymous_user_master, class_name: 'AnonymousUser'\n-  has_one :anonymous_user_shadow, ->(record) { where(active: true) }, foreign_key: :master_user_id, class_name: 'AnonymousUser'\n+  has_many :badges, through: :user_badges\n+  has_many :default_featured_user_badges,\n+            -> { for_enabled_badges.grouped_with_count.where(\"featured_rank <= ?\", DEFAULT_FEATURED_BADGE_COUNT) },\n+            class_name: \"UserBadge\"\n+\n+  has_many :topics_allowed, through: :topic_allowed_users, source: :topic\n+  has_many :groups, through: :group_users\n+  has_many :secure_categories, through: :groups, source: :categories\n+\n+  # deleted in user_second_factors relationship\n+  has_many :totps, -> {\n+    where(method: UserSecondFactor.methods[:totp], enabled: true)\n+  }, class_name: \"UserSecondFactor\"\n \n   has_one :master_user, through: :anonymous_user_master\n   has_one :shadow_user, through: :anonymous_user_shadow, source: :user\n \n-  has_one :user_stat, dependent: :destroy\n-  has_one :user_profile, dependent: :destroy, inverse_of: :user\n   has_one :profile_background_upload, through: :user_profile\n   has_one :card_background_upload, through: :user_profile\n-  has_one :single_sign_on_record, dependent: :destroy\n   belongs_to :approved_by, class_name: 'User'\n   belongs_to :primary_group, class_name: 'Group'\n \n-  has_many :muted_user_records, class_name: 'MutedUser'\n   has_many :muted_users, through: :muted_user_records\n-\n-  has_many :ignored_user_records, class_name: 'IgnoredUser'\n   has_many :ignored_users, through: :ignored_user_records\n \n-  has_many :api_keys, dependent: :destroy\n-\n-  has_many :push_subscriptions, dependent: :destroy\n-\n   belongs_to :uploaded_avatar, class_name: 'Upload'\n \n-  has_many :acting_group_histories, dependent: :destroy, foreign_key: :acting_user_id, class_name: 'GroupHistory'\n-  has_many :targeted_group_histories, dependent: :destroy, foreign_key: :target_user_id, class_name: 'GroupHistory'\n-\n-  has_many :reviewable_scores, dependent: :destroy\n-\n   delegate :last_sent_email_address, to: :email_logs\n \n   validates_presence_of :username\n@@ -164,6 +157,9 @@ class User < ActiveRecord::Base\n     DirectoryItem.where(user_id: self.id)\n       .where('period_type in (?)', DirectoryItem.period_types.values)\n       .delete_all\n+\n+    # our relationship filters on enabled, this makes sure everything is deleted\n+    UserSecurityKey.where(user_id: self.id).delete_all\n   end\n \n   # Skip validating email, for example from a particular auth provider plugin\n@@ -933,7 +929,7 @@ def email_confirmed?\n \n   def activate\n     if email_token = self.email_tokens.active.where(email: self.email).first\n-      user = EmailToken.confirm(email_token.token, skip_reviewable: true)\n+      EmailToken.confirm(email_token.token, skip_reviewable: true)\n     end\n     self.update!(active: true)\n     create_reviewable\n@@ -1119,10 +1115,9 @@ def number_of_flagged_posts\n   end\n \n   def number_of_rejected_posts\n-    Post.with_deleted\n-      .where(user_id: self.id)\n-      .joins('INNER JOIN reviewables r ON posts.id = r.target_id')\n-      .where(r: { status: Reviewable.statuses[:rejected], type: ReviewableQueuedPost.name })\n+    ReviewableQueuedPost\n+      .where(status: Reviewable.statuses[:rejected])\n+      .where(created_by_id: self.id)\n       .count\n   end\n "
    },
    {
      "sha": "bd2751d6b45e2bc2160396a935f38c0f6c1bc6bf",
      "filename": "app/models/user_avatar.rb",
      "status": "modified",
      "additions": 10,
      "deletions": 2,
      "changes": 12,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/user_avatar.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/user_avatar.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/user_avatar.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -5,21 +5,29 @@ class UserAvatar < ActiveRecord::Base\n   belongs_to :gravatar_upload, class_name: 'Upload'\n   belongs_to :custom_upload, class_name: 'Upload'\n \n+  @@custom_user_gravatar_email_hash = {\n+    Discourse::SYSTEM_USER_ID => User.email_hash(\"info@discourse.org\")\n+  }\n+\n+  def self.register_custom_user_gravatar_email_hash(user_id, email)\n+    @@custom_user_gravatar_email_hash[user_id] = User.email_hash(email)\n+  end\n+\n   def contains_upload?(id)\n     gravatar_upload_id == id || custom_upload_id == id\n   end\n \n   def update_gravatar!\n     DistributedMutex.synchronize(\"update_gravatar_#{user_id}\") do\n       begin\n-        self.update!(last_gravatar_download_attempt: Time.now)\n+        self.update!(last_gravatar_download_attempt: Time.zone.now)\n \n         max = Discourse.avatar_sizes.max\n \n         # The user could be deleted before this executes\n         return if user.blank? || user.primary_email.blank?\n \n-        email_hash = user_id == Discourse::SYSTEM_USER_ID ? User.email_hash(\"info@discourse.org\") : user.email_hash\n+        email_hash = @@custom_user_gravatar_email_hash[user_id] || user.email_hash\n         gravatar_url = \"https://#{SiteSetting.gravatar_base_url}/avatar/#{email_hash}.png?s=#{max}&d=404&reset_cache=#{SecureRandom.urlsafe_base64(5)}\"\n \n         # follow redirects in case gravatar change rules on us"
    },
    {
      "sha": "442f14cb8cec2a0ba4cc5472c6da2eae7d953462",
      "filename": "app/models/web_hook_event_type.rb",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/web_hook_event_type.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/models/web_hook_event_type.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/web_hook_event_type.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -7,8 +7,6 @@ class WebHookEventType < ActiveRecord::Base\n   GROUP = 4\n   CATEGORY = 5\n   TAG = 6\n-  FLAG = 7\n-  QUEUED_POST = 8\n   REVIEWABLE = 9\n   NOTIFICATION = 10\n   SOLVED = 11"
    },
    {
      "sha": "8230c590a4cef75917fe38671a6688371cb4fa69",
      "filename": "app/serializers/about_serializer.rb",
      "status": "modified",
      "additions": 10,
      "deletions": 1,
      "changes": 11,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/serializers/about_serializer.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/serializers/about_serializer.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/serializers/about_serializer.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -21,7 +21,16 @@ class AboutCategoryModsSerializer < ApplicationSerializer\n              :title,\n              :locale,\n              :version,\n-             :https\n+             :https,\n+             :can_see_about_stats\n+\n+  def can_see_about_stats\n+    scope.can_see_about_stats?\n+  end\n+\n+  def include_stats?\n+    can_see_about_stats\n+  end\n \n   def stats\n     object.class.fetch_cached_stats || Jobs::AboutStats.new.execute({})"
    },
    {
      "sha": "a5027c53030502c5eec601d05158b090d8752527",
      "filename": "app/services/badge_granter.rb",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/services/badge_granter.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/services/badge_granter.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/services/badge_granter.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,11 +3,11 @@\n class BadgeGranter\n \n   def self.disable_queue\n-    @queue_enabled = false\n+    @queue_disabled = true\n   end\n \n   def self.enable_queue\n-    @queue_enabled = true\n+    @queue_disabled = false\n   end\n \n   def initialize(badge, user, opts = {})\n@@ -124,7 +124,7 @@ def self.revoke_all(badge)\n   end\n \n   def self.queue_badge_grant(type, opt)\n-    return if !SiteSetting.enable_badges || !@queue_enabled\n+    return if !SiteSetting.enable_badges || @queue_disabled\n     payload = nil\n \n     case type"
    },
    {
      "sha": "99b2e94995c81cc61d0ea1b6c09255a5cb58c416",
      "filename": "app/views/email/default_template.html",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/email/default_template.html",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/email/default_template.html",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/views/email/default_template.html?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,6 +3,8 @@\n \n <head>\n   <meta http-equiv=\"Content-type\" name=\"viewport\" content=\"initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width\">\n+  <!-- prevent ios zooming + autoscaling -->\n+  <meta name=\"x-apple-disable-message-reformatting\" />\n   <title></title>\n </head>\n "
    },
    {
      "sha": "611eba0df497bc6c0d61d08ddfeb8aa5e87f0956",
      "filename": "app/views/layouts/email_template.html.erb",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/layouts/email_template.html.erb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/layouts/email_template.html.erb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/views/layouts/email_template.html.erb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -2,5 +2,8 @@\n   <%= yield %>\n   <% if defined?(html_body) %><%= html_body %><% end %>\n <% else %>\n-  <%= email_html_template(binding).html_safe %>\n+  <%= email_html_template do %>\n+    <%= yield %>\n+    <% if defined?(html_body) %><%= html_body %><% end %>\n+  <% end %>\n <% end %>"
    },
    {
      "sha": "4a249e8f32d770b99dc8e993bb934298197d0f0c",
      "filename": "app/views/layouts/publish.html.erb",
      "status": "modified",
      "additions": 1,
      "deletions": 6,
      "changes": 7,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/layouts/publish.html.erb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/layouts/publish.html.erb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/views/layouts/publish.html.erb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -2,13 +2,8 @@\n <html>\n   <head>\n     <meta charset=\"utf-8\">\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover\">\n-\n+    <%= render partial: \"layouts/head\" %>\n     <%= render partial: \"common/discourse_publish_stylesheet\" %>\n-\n-    <%- if @canonical_url -%>\n-      <link rel=\"canonical\" href=\"<%= @canonical_url %>\" />\n-    <%- end -%>\n   </head>\n   <body class=\"<%= @body_classes.to_a.join(' ') %>\">\n     <%= yield %>"
    },
    {
      "sha": "2338d39c6a5b1b616be84533c878be2c3ac189b3",
      "filename": "app/views/list/list.erb",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/list/list.erb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/app/views/list/list.erb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/views/list/list.erb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -47,8 +47,8 @@\n       <tr>\n         <th><%= t 'js.topic.title' %></th>\n         <th></th>\n-        <th><%= t 'js.replies' %></th>\n-        <th><%= t 'js.views' %></th>\n+        <th class=\"replies\"><%= t 'js.replies' %></th>\n+        <th class=\"views\"><%= t 'js.views' %></th>\n         <th><%= t 'js.activity' %></th>\n       </tr>\n     </thead>\n@@ -101,10 +101,10 @@\n               <% end %>\n             <% end %>\n           </td>\n-          <td>\n+          <td class=\"replies\">\n             <span class='posts' title='<%= t 'posts' %>'><%= t.posts_count %></span>\n           </td>\n-          <td>\n+          <td class=\"views\">\n             <span class='views' title='<%= t 'views' %>'><%= t.views %></span>\n           </td>\n           <td>"
    },
    {
      "sha": "0157dc82895250944cbfaf618c2295ac29101aa6",
      "filename": "config/application.rb",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/application.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/application.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/application.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -27,6 +27,10 @@\n \n require_relative '../lib/plugin_gem'\n \n+if ENV['RAILS_FAILOVER']\n+  require 'rails_failover'\n+end\n+\n # Global config\n require_relative '../app/models/global_setting'\n GlobalSetting.configure!\n@@ -250,7 +254,7 @@ def config.database_configuration\n     # Our templates shouldn't start with 'discourse/app/templates'\n     config.handlebars.templates_root = {\n       'discourse/app/templates' => '',\n-      'select-kit/app/templates' => 'select-kit/templates/'\n+      'select-kit/addon/templates' => 'select-kit/templates/'\n     }\n \n     config.handlebars.raw_template_namespace = \"__DISCOURSE_RAW_TEMPLATES\""
    },
    {
      "sha": "f28c59a3b1d23975dfdc4e60d73531f0532c3d5a",
      "filename": "config/initializers/001-redis.rb",
      "status": "modified",
      "additions": 16,
      "deletions": 1,
      "changes": 17,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/initializers/001-redis.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/initializers/001-redis.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/initializers/001-redis.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -2,5 +2,20 @@\n \n if Rails.env.development? && ENV['DISCOURSE_FLUSH_REDIS']\n   puts \"Flushing redis (development mode)\"\n-  Discourse.redis.flushall\n+  Discourse.redis.flushdb\n+end\n+\n+if ENV['RAILS_FAILOVER']\n+  message_bus_keepalive_interval = MessageBus.keepalive_interval\n+\n+  RailsFailover::Redis.register_master_up_callback do\n+    MessageBus.keepalive_interval = message_bus_keepalive_interval\n+    Discourse.clear_readonly!\n+    Discourse.request_refresh!\n+  end\n+\n+  RailsFailover::Redis.register_master_down_callback do\n+    # Disables MessageBus keepalive when Redis is in readonly mode\n+    MessageBus.keepalive_interval = 0\n+  end\n end"
    },
    {
      "sha": "3c3618ef96ee6e860ded9543cc8172152e2e7e91",
      "filename": "config/locales/client.en.yml",
      "status": "modified",
      "additions": 2,
      "deletions": 7,
      "changes": 9,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/locales/client.en.yml",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/locales/client.en.yml",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/locales/client.en.yml?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -963,6 +963,7 @@ en:\n       api_approved: \"Approved:\"\n       api_last_used_at: \"Last used at:\"\n       theme: \"Theme\"\n+      save_to_change_theme: 'Theme will be updated after you click \"%{save_text}\"'\n       home: \"Default Home Page\"\n       staged: \"Staged\"\n \n@@ -2100,7 +2101,7 @@ en:\n         help: \"Move message back to Inbox\"\n       edit_message:\n         help: \"Edit first post of the message\"\n-        title: \"Edit Message\"\n+        title: \"Edit\"\n       defer:\n         help: \"Mark as unread\"\n         title: \"Defer\"\n@@ -3598,12 +3599,6 @@ en:\n         tag_event:\n           name: \"Tag Event\"\n           details: \"When a tag is created, updated or destroyed.\"\n-        flag_event:\n-          name: \"Flag Event\"\n-          details: \"When a flag is created, agreed, disagreed or ignored.\"\n-        queued_post_event:\n-          name: \"Post Approval Event\"\n-          details: \"When a new queued post is created, approved or rejected.\"\n         reviewable_event:\n           name: \"Reviewable Event\"\n           details: \"When a new item is ready for review and when its status is updated.\""
    },
    {
      "sha": "2341f05c729289d9e900f909207dd8ee743f33a4",
      "filename": "config/locales/server.en.yml",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/locales/server.en.yml",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/locales/server.en.yml",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/locales/server.en.yml?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1467,6 +1467,7 @@ en:\n     exclude_rel_nofollow_domains: \"A list of domains where nofollow should not be added to links. example.com will automatically allow sub.example.com as well. As a minimum, you should add the domain of this site to help web crawlers find all content. If other parts of your website are at other domains, add those too.\"\n \n     post_excerpt_maxlength: \"Maximum length of a post excerpt / summary.\"\n+    topic_excerpt_maxlength: \"Maximum length of a topic excerpt / summary, generated from the first post in a topic.\"\n     show_pinned_excerpt_mobile: \"Show excerpt on pinned topics in mobile view.\"\n     show_pinned_excerpt_desktop: \"Show excerpt on pinned topics in desktop view.\"\n     post_onebox_maxlength: \"Maximum length of a oneboxed Discourse post in characters.\""
    },
    {
      "sha": "69ade71938ad585bddcf1021838783a6e67baf9a",
      "filename": "config/routes.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 3,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/routes.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/routes.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/routes.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -23,6 +23,7 @@\n   post \"webhooks/sparkpost\" => \"webhooks#sparkpost\"\n \n   scope path: nil, constraints: { format: /.*/ } do\n+    Sidekiq::Web.set :sessions, Rails.application.config.session_options\n     if Rails.env.development?\n       mount Sidekiq::Web => \"/sidekiq\"\n       mount Logster::Web => \"/logs\"\n@@ -120,7 +121,6 @@\n       put \"unsuspend\"\n       put \"revoke_admin\", constraints: AdminConstraint.new\n       put \"grant_admin\", constraints: AdminConstraint.new\n-      post \"generate_api_key\", constraints: AdminConstraint.new\n       put \"revoke_moderation\", constraints: AdminConstraint.new\n       put \"grant_moderation\", constraints: AdminConstraint.new\n       put \"approve\"\n@@ -950,8 +950,6 @@\n   get \"/safe-mode\" => \"safe_mode#index\"\n   post \"/safe-mode\" => \"safe_mode#enter\", as: \"safe_mode_enter\"\n \n-  get \"/themes/assets/:ids\" => \"themes#assets\"\n-\n   unless Rails.env.production?\n     get \"/qunit\" => \"qunit#index\"\n     get \"/wizard/qunit\" => \"wizard#qunit\""
    },
    {
      "sha": "6209cc621aaa3f56a9274b7f7ecade0e68138663",
      "filename": "config/site_settings.yml",
      "status": "modified",
      "additions": 9,
      "deletions": 2,
      "changes": 11,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/site_settings.yml",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/config/site_settings.yml",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/site_settings.yml?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -394,7 +394,7 @@ login:\n     default: false\n   github_client_id:\n     default: \"\"\n-    regex: \"^[a-f0-9]+$\"\n+    regex: \"^[a-zA-Z0-9\\\\.]+$\"\n   github_client_secret:\n     default: \"\"\n     regex: \"^[a-f0-9]+$\"\n@@ -819,6 +819,12 @@ posting:\n       ja: 120\n       zh_CN: 120\n       zh_TW: 120\n+  topic_excerpt_maxlength:\n+    default: 220\n+    locale_default:\n+      ja: 120\n+      zh_CN: 120\n+      zh_TW: 120\n   show_pinned_excerpt_mobile:\n     client: true\n     default: true\n@@ -1382,7 +1388,8 @@ security:\n       - Lax\n       - Strict\n       - Disabled\n-    regex: \"^(Lax|Strict|Disabled)$\"\n+      - None\n+    regex: \"^(Lax|Strict|Disabled|None)$\"\n   enable_escaped_fragments: true\n   allow_index_in_robots_txt: true\n   moderators_create_categories: false"
    },
    {
      "sha": "ec666ec5ad22844762100a67704cce92bb77dd09",
      "filename": "db/fixtures/007_web_hook_event_types.rb",
      "status": "modified",
      "additions": 0,
      "deletions": 10,
      "changes": 10,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/fixtures/007_web_hook_event_types.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/fixtures/007_web_hook_event_types.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/db/fixtures/007_web_hook_event_types.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -30,16 +30,6 @@\n   b.name = \"tag\"\n end\n \n-WebHookEventType.seed do |b|\n-  b.id = WebHookEventType::FLAG\n-  b.name = \"flag\"\n-end\n-\n-WebHookEventType.seed do |b|\n-  b.id = WebHookEventType::QUEUED_POST\n-  b.name = \"queued_post\"\n-end\n-\n WebHookEventType.seed do |b|\n   b.id = WebHookEventType::REVIEWABLE\n   b.name = \"reviewable\""
    },
    {
      "sha": "57b1885e350e4d4589813b81f01bb33c7d7a9999",
      "filename": "db/migrate/20200409033412_create_bookmarks_from_post_action_bookmarks.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/migrate/20200409033412_create_bookmarks_from_post_action_bookmarks.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/migrate/20200409033412_create_bookmarks_from_post_action_bookmarks.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/db/migrate/20200409033412_create_bookmarks_from_post_action_bookmarks.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -16,6 +16,7 @@ def up\n         INNER JOIN posts ON posts.id = post_actions.post_id\n         LEFT JOIN bookmarks ON bookmarks.post_id = post_actions.post_id AND bookmarks.user_id = post_actions.user_id\n         INNER JOIN topics ON topics.id = posts.topic_id\n+        INNER JOIN users ON users.id = post_actions.user_id\n         WHERE bookmarks.id IS NULL AND post_action_type_id = :type_id AND post_actions.deleted_at IS NULL AND posts.deleted_at IS NULL\n         LIMIT 2000\n         SQL"
    },
    {
      "sha": "448b7fb771b58787295bac6eadbfdc899c6e4745",
      "filename": "db/migrate/20200514075356_remove_flag_web_hooks.rb",
      "status": "added",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/migrate/20200514075356_remove_flag_web_hooks.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/migrate/20200514075356_remove_flag_web_hooks.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/db/migrate/20200514075356_remove_flag_web_hooks.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,21 @@\n+# frozen_string_literal: true\n+\n+class RemoveFlagWebHooks < ActiveRecord::Migration[6.0]\n+  def up\n+    flag_event_type_id = 7\n+\n+    DB.exec <<~SQL\n+    DELETE FROM web_hook_event_types_hooks\n+    WHERE web_hook_event_type_id = #{flag_event_type_id}\n+    SQL\n+\n+    DB.exec <<~SQL\n+    DELETE FROM web_hook_event_types\n+    WHERE id = #{flag_event_type_id}\n+    SQL\n+  end\n+\n+  def down\n+    raise ActiveRecord::IrreversibleMigration\n+  end\n+end"
    },
    {
      "sha": "632e5013dc929c37a99768cbab0e0e0c5d43c074",
      "filename": "db/migrate/20200514075407_remove_queued_post_web_hooks.rb",
      "status": "added",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/migrate/20200514075407_remove_queued_post_web_hooks.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/migrate/20200514075407_remove_queued_post_web_hooks.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/db/migrate/20200514075407_remove_queued_post_web_hooks.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,21 @@\n+# frozen_string_literal: true\n+\n+class RemoveQueuedPostWebHooks < ActiveRecord::Migration[6.0]\n+  def up\n+    queued_post_event_type_id = 8\n+\n+    DB.exec <<~SQL\n+    DELETE FROM web_hook_event_types_hooks\n+    WHERE web_hook_event_type_id = #{queued_post_event_type_id}\n+    SQL\n+\n+    DB.exec <<~SQL\n+    DELETE FROM web_hook_event_types\n+    WHERE id = #{queued_post_event_type_id}\n+    SQL\n+  end\n+\n+  def down\n+    raise ActiveRecord::IrreversibleMigration\n+  end\n+end"
    },
    {
      "sha": "80fee6dab4f523c70e448fca074fee61e68d8eb6",
      "filename": "db/post_migrate/20200520001619_remove_fks_from_bookmarks.rb",
      "status": "added",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/post_migrate/20200520001619_remove_fks_from_bookmarks.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/post_migrate/20200520001619_remove_fks_from_bookmarks.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/db/post_migrate/20200520001619_remove_fks_from_bookmarks.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,9 @@\n+# frozen_string_literal: true\n+\n+class RemoveFksFromBookmarks < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_foreign_key :bookmarks, :topics\n+    remove_foreign_key :bookmarks, :posts\n+    remove_foreign_key :bookmarks, :users\n+  end\n+end"
    },
    {
      "sha": "36c8d0fbb729d0531ce65dec327fa9879dc0e855",
      "filename": "db/post_migrate/20200522004855_remove_access_control_post_fk.rb",
      "status": "added",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/post_migrate/20200522004855_remove_access_control_post_fk.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/db/post_migrate/20200522004855_remove_access_control_post_fk.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/db/post_migrate/20200522004855_remove_access_control_post_fk.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,7 @@\n+# frozen_string_literal: true\n+\n+class RemoveAccessControlPostFk < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_foreign_key :uploads, column: :access_control_post_id\n+  end\n+end"
    },
    {
      "sha": "7b26356989eed8235ea11d2d3f6b59e0ce8207cf",
      "filename": "lib/backup_restore/backup_file_handler.rb",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/backup_restore/backup_file_handler.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/backup_restore/backup_file_handler.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/backup_restore/backup_file_handler.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -65,9 +65,10 @@ def decompress_archive\n       return if !@is_archive\n \n       log \"Unzipping archive, this may take a while...\"\n-      pipeline = Compression::Pipeline.new([Compression::Tar.new, Compression::Gzip.new])\n-      unzipped_path = pipeline.decompress(@tmp_directory, @archive_path, available_size)\n-      pipeline.strip_directory(unzipped_path, @tmp_directory)\n+      Discourse::Utils.execute_command(\n+        'tar', '--extract', '--gzip', '--file', @archive_path, '--directory', @tmp_directory,\n+        failure_message: \"Failed to decompress archive.\"\n+      )\n     end\n \n     def extract_db_dump"
    },
    {
      "sha": "ab382a4d15c0eac4947d2d34a2746c24fe2df929",
      "filename": "lib/discourse_plugin_registry.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/discourse_plugin_registry.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/discourse_plugin_registry.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/discourse_plugin_registry.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -75,6 +75,8 @@ def self.define_filtered_register(register_name)\n \n   define_filtered_register :editable_group_custom_fields\n \n+  define_filtered_register :topic_thumbnail_sizes\n+\n   def self.register_auth_provider(auth_provider)\n     self.auth_providers << auth_provider\n   end"
    },
    {
      "sha": "6b630b7b34d73598de8b71c85fd8ee8d841aa546",
      "filename": "lib/discourse_redis.rb",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/discourse_redis.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/discourse_redis.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/discourse_redis.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -266,12 +266,6 @@ def delete_prefixed(prefix)\n     end\n   end\n \n-  def flushdb\n-    DiscourseRedis.ignore_readonly do\n-      keys.each { |k| del(k) }\n-    end\n-  end\n-\n   def reconnect\n     @redis._client.reconnect\n   end"
    },
    {
      "sha": "f42fa73057b2c1b3f2d9e0ca9b974954504c6016",
      "filename": "lib/file_store/s3_store.rb",
      "status": "modified",
      "additions": 25,
      "deletions": 2,
      "changes": 27,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/file_store/s3_store.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/file_store/s3_store.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/file_store/s3_store.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -79,12 +79,35 @@ def copy_file(url, source, destination)\n     def has_been_uploaded?(url)\n       return false if url.blank?\n \n+      begin\n+        parsed_url = URI.parse(URI.encode(url))\n+      rescue URI::InvalidURIError\n+        return false\n+      end\n+\n       base_hostname = URI.parse(absolute_base_url).hostname\n-      return true if url[base_hostname]\n+      if url[base_hostname]\n+        # if the hostnames match it means the upload is in the same\n+        # bucket on s3. however, the bucket folder path may differ in\n+        # some cases, and we do not want to assume the url is uploaded\n+        # here. e.g. the path of the current site could be /prod and the\n+        # other site could be /staging\n+        if s3_bucket_folder_path.present?\n+          return parsed_url.path.starts_with?(\"/#{s3_bucket_folder_path}\")\n+        else\n+          return true\n+        end\n+        return false\n+      end\n \n       return false if SiteSetting.Upload.s3_cdn_url.blank?\n       cdn_hostname = URI.parse(SiteSetting.Upload.s3_cdn_url || \"\").hostname\n-      cdn_hostname.presence && url[cdn_hostname]\n+      return true if cdn_hostname.presence && url[cdn_hostname]\n+      false\n+    end\n+\n+    def s3_bucket_folder_path\n+      @s3_helper.s3_bucket_folder_path\n     end\n \n     def s3_bucket_name"
    },
    {
      "sha": "5a82623f8f72404ba9962b9f5f7f846e62ae1a7f",
      "filename": "lib/freedom_patches/translate_accelerator.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/freedom_patches/translate_accelerator.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/freedom_patches/translate_accelerator.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/freedom_patches/translate_accelerator.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -164,7 +164,7 @@ def overrides_by_locale(locale)\n \n       by_site[locale].with_indifferent_access\n     rescue ActiveRecord::StatementInvalid => e\n-      if PG::UndefinedTable === e.cause\n+      if PG::UndefinedTable === e.cause || PG::UndefinedColumn === e.cause\n         {}\n       else\n         raise"
    },
    {
      "sha": "456461fead6860eaacfdaf2ae6a8f8dff0fb98f2",
      "filename": "lib/guardian.rb",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/guardian.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/guardian.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/guardian.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -493,6 +493,10 @@ def can_publish_page?(topic)\n     is_staff?\n   end\n \n+  def can_see_about_stats?\n+    true\n+  end\n+\n   def auth_token\n     if cookie = request&.cookies[Auth::DefaultCurrentUserProvider::TOKEN_COOKIE]\n       UserAuthToken.hash_token(cookie)"
    },
    {
      "sha": "ab48f7cbead1f3c0c62abfe9e35ef45a7f140f6e",
      "filename": "lib/plugin/instance.rb",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/plugin/instance.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/plugin/instance.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/plugin/instance.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -165,6 +165,16 @@ def register_editable_group_custom_field(field)\n     DiscoursePluginRegistry.register_editable_group_custom_field(field, self)\n   end\n \n+  # Request a new size for topic thumbnails\n+  # Will respect plugin enabled setting is enabled\n+  # Size should be an array with two elements [max_width, max_height]\n+  def register_topic_thumbnail_size(size)\n+    if !(size.kind_of?(Array) && size.length == 2)\n+      raise ArgumentError.new(\"Topic thumbnail dimension is not valid\")\n+    end\n+    DiscoursePluginRegistry.register_topic_thumbnail_size(size, self)\n+  end\n+\n   def custom_avatar_column(column)\n     reloadable_patch do |plugin|\n       AvatarLookup.lookup_columns << column"
    },
    {
      "sha": "42c1bda864f28d0deb56674dcb496257136ebb94",
      "filename": "lib/plugin_initialization_guard.rb",
      "status": "modified",
      "additions": 38,
      "deletions": 27,
      "changes": 65,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/plugin_initialization_guard.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/plugin_initialization_guard.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/plugin_initialization_guard.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -6,33 +6,44 @@ def plugin_initialization_guard(&block)\n   rescue => error\n     plugins_directory = Rails.root + 'plugins'\n \n-    plugin_path = error.backtrace_locations.lazy.map do |location|\n-      Pathname.new(location.absolute_path)\n-        .ascend\n-        .lazy\n-        .find { |path| path.parent == plugins_directory }\n-    end.next\n-\n-    raise unless plugin_path\n-\n-    stack_trace = error.backtrace.each_with_index.inject([]) do |messages, (line, index)|\n-      if index == 0\n-        messages << \"#{line}: #{error} (#{error.class})\"\n-      else\n-        messages << \"\\t#{index}: from #{line}\"\n-      end\n-    end.reverse.join(\"\\n\")\n-\n-    STDERR.puts <<~MESSAGE\n-      #{stack_trace}\n-\n-      ** INCOMPATIBLE PLUGIN **\n-\n-      You are unable to build Discourse due to errors in the plugin at\n-      #{plugin_path}\n-\n-      Please try removing this plugin and rebuilding again!\n-    MESSAGE\n+    if error.backtrace && error.backtrace_locations\n+      plugin_path = error.backtrace_locations.lazy.map do |location|\n+        Pathname.new(location.absolute_path)\n+          .ascend\n+          .lazy\n+          .find { |path| path.parent == plugins_directory }\n+      end.next\n+\n+      raise unless plugin_path\n+\n+      stack_trace = error.backtrace.each_with_index.inject([]) do |messages, (line, index)|\n+        if index == 0\n+          messages << \"#{line}: #{error} (#{error.class})\"\n+        else\n+          messages << \"\\t#{index}: from #{line}\"\n+        end\n+      end.reverse.join(\"\\n\")\n+\n+      STDERR.puts <<~MESSAGE\n+        #{stack_trace}\n+\n+        ** INCOMPATIBLE PLUGIN **\n+\n+        You are unable to build Discourse due to errors in the plugin at\n+        #{plugin_path}\n+\n+        Please try removing this plugin and rebuilding again!\n+      MESSAGE\n+    else\n+      STDERR.puts <<~MESSAGE\n+        ** PLUGIN FAILURE **\n+\n+        You are unable to build Discourse due to this error during plugin\n+        initialization:\n+\n+        #{error}\n+      MESSAGE\n+    end\n     exit 1\n   end\n end"
    },
    {
      "sha": "c3b9556df21ab6125bbbf72969aeeca23f63dc08",
      "filename": "lib/post_creator.rb",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/post_creator.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/post_creator.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/post_creator.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -374,6 +374,10 @@ def transaction(&blk)\n   # discourse post.\n   def create_embedded_topic\n     return unless @opts[:embed_url].present?\n+\n+    original_uri = URI.parse(@opts[:embed_url])\n+    raise Discourse::InvalidParameters.new(:embed_url) unless original_uri.is_a?(URI::HTTP)\n+\n     embed = TopicEmbed.new(topic_id: @post.topic_id, post_id: @post.id, embed_url: @opts[:embed_url])\n     rollback_from_errors!(embed) unless embed.save\n   end"
    },
    {
      "sha": "d610fccf375e77deea98347aca4f6e68ccf59f4c",
      "filename": "lib/post_revisor.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 5,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/post_revisor.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/post_revisor.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/post_revisor.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -567,11 +567,7 @@ def revise_topic\n   end\n \n   def update_topic_excerpt\n-    excerpt = @post.excerpt_for_topic\n-    @topic.update_column(:excerpt, excerpt)\n-    if @topic.archetype == \"banner\"\n-      ApplicationController.banner_json_cache.clear\n-    end\n+    @topic.update_excerpt(@post.excerpt_for_topic)\n   end\n \n   def update_category_description"
    },
    {
      "sha": "87fe005b075e629442f24f231e2399024b3e25bd",
      "filename": "lib/tasks/bookmarks.rake",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/tasks/bookmarks.rake",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/tasks/bookmarks.rake",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/tasks/bookmarks.rake?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -22,6 +22,7 @@ task \"bookmarks:sync_to_table\" => :environment do |_t, args|\n         INNER JOIN posts ON posts.id = post_actions.post_id\n         LEFT JOIN bookmarks ON bookmarks.post_id = post_actions.post_id AND bookmarks.user_id = post_actions.user_id\n         INNER JOIN topics ON topics.id = posts.topic_id\n+        INNER JOIN users ON users.id = post_actions.user_id\n         WHERE bookmarks.id IS NULL AND post_action_type_id = :type_id AND post_actions.deleted_at IS NULL AND posts.deleted_at IS NULL\n         LIMIT 2000\n       SQL"
    },
    {
      "sha": "bab30135a1771653104fcbc508267d030d2d50d4",
      "filename": "lib/topic_query_params.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/topic_query_params.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/lib/topic_query_params.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/topic_query_params.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,7 +3,7 @@\n module TopicQueryParams\n   def build_topic_list_options\n     options = {}\n-    params[:tags] = [params[:tag_id].parameterize] if params[:tag_id].present? && guardian.can_tag_pms?\n+    params[:tags] = [params[:tag_id]] if params[:tag_id].present? && guardian.can_tag_pms?\n \n     TopicQuery.public_valid_options.each do |key|\n       if params.key?(key)"
    },
    {
      "sha": "fda50b482993ff34b95e29f0081f877bd3f42159",
      "filename": "plugins/discourse-narrative-bot/db/fixtures/001_discobot.rb",
      "status": "modified",
      "additions": 6,
      "deletions": 19,
      "changes": 25,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/db/fixtures/001_discobot.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/db/fixtures/001_discobot.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/plugins/discourse-narrative-bot/db/fixtures/001_discobot.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -4,20 +4,20 @@\n \n def seed_primary_email\n   UserEmail.seed do |ue|\n-    ue.id = -2\n+    ue.id = DiscourseNarrativeBot::BOT_USER_ID\n     ue.email = \"discobot_email\"\n     ue.primary = true\n-    ue.user_id = -2\n+    ue.user_id = DiscourseNarrativeBot::BOT_USER_ID\n   end\n end\n \n-unless user = User.find_by(id: -2)\n+unless user = User.find_by(id: DiscourseNarrativeBot::BOT_USER_ID)\n   suggested_username = UserNameSuggester.suggest(discobot_username)\n \n   seed_primary_email\n \n   User.seed do |u|\n-    u.id = -2\n+    u.id = DiscourseNarrativeBot::BOT_USER_ID\n     u.name = discobot_username\n     u.username = suggested_username\n     u.username_lower = suggested_username.downcase\n@@ -26,22 +26,9 @@ def seed_primary_email\n     u.approved = true\n     u.trust_level = TrustLevel[4]\n   end\n-\n-  # TODO Pull the user avatar from that thread for now. In the future, pull it from a local file or from some central discobot repo.\n-  if !Rails.env.test?\n-    begin\n-      UserAvatar.import_url_for_user(\n-        \"https://cdn.discourse.org/dev/uploads/default/original/2X/e/edb63d57a720838a7ce6a68f02ba4618787f2299.png\",\n-        User.find(-2),\n-        override_gravatar: true\n-      )\n-    rescue\n-      # In case the avatar can't be downloaded, don't fail seed\n-    end\n-  end\n end\n \n-bot = User.find(-2)\n+bot = User.find(DiscourseNarrativeBot::BOT_USER_ID)\n \n # ensure discobot has a primary email\n unless bot.primary_email\n@@ -62,4 +49,4 @@ def seed_primary_email\n   )\n end\n \n-Group.user_trust_level_change!(-2, TrustLevel[4])\n+Group.user_trust_level_change!(DiscourseNarrativeBot::BOT_USER_ID, TrustLevel[4])"
    },
    {
      "sha": "c9029730814dacbfaaccddd6aee63c72d28e0bd3",
      "filename": "plugins/discourse-narrative-bot/db/post_migrate/20200520015508_clear_last_gravatar_download_attempt_on_user_avatars.rb",
      "status": "added",
      "additions": 15,
      "deletions": 0,
      "changes": 15,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/db/post_migrate/20200520015508_clear_last_gravatar_download_attempt_on_user_avatars.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/db/post_migrate/20200520015508_clear_last_gravatar_download_attempt_on_user_avatars.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/plugins/discourse-narrative-bot/db/post_migrate/20200520015508_clear_last_gravatar_download_attempt_on_user_avatars.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -0,0 +1,15 @@\n+# frozen_string_literal: true\n+\n+class ClearLastGravatarDownloadAttemptOnUserAvatars < ActiveRecord::Migration[6.0]\n+  def up\n+    execute <<~SQL\n+      UPDATE user_avatars\n+      SET last_gravatar_download_attempt = null\n+      WHERE user_id = -2 AND custom_upload_id IS NULL AND gravatar_upload_id IS NULL\n+    SQL\n+  end\n+\n+  def down\n+    raise ActiveRecord::IrreversibleMigration\n+  end\n+end"
    },
    {
      "sha": "61047c0e8b2808cc879dcdeca69e65f1a9ceefde",
      "filename": "plugins/discourse-narrative-bot/plugin.rb",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/plugin.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/plugin.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/plugins/discourse-narrative-bot/plugin.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -55,6 +55,7 @@\n \n   module ::DiscourseNarrativeBot\n     PLUGIN_NAME = \"discourse-narrative-bot\".freeze\n+    BOT_USER_ID = -2\n \n     class Engine < ::Rails::Engine\n       engine_name PLUGIN_NAME\n@@ -271,4 +272,9 @@ def fetch_avatar(user)\n       end\n     end\n   end\n+\n+  UserAvatar.register_custom_user_gravatar_email_hash(\n+    DiscourseNarrativeBot::BOT_USER_ID,\n+    \"discobot@discourse.org\"\n+  )\n end"
    },
    {
      "sha": "6914dff1d2f0d19c481f7fa837a8568e2842c4d1",
      "filename": "plugins/discourse-narrative-bot/spec/discourse_narrative_bot/track_selector_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/spec/discourse_narrative_bot/track_selector_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/spec/discourse_narrative_bot/track_selector_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/plugins/discourse-narrative-bot/spec/discourse_narrative_bot/track_selector_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -472,7 +472,7 @@\n           let(:post) { Fabricate(:post, topic: topic) }\n \n           after do\n-            Discourse.redis.flushall\n+            Discourse.redis.flushdb\n           end\n \n           describe 'when random reply massage has been displayed in the last 6 hours' do"
    },
    {
      "sha": "874e40cfe816afc26beb67f15f35114d261078e8",
      "filename": "plugins/discourse-narrative-bot/spec/jobs/send_advanced_tutorial_message_spec.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/spec/jobs/send_advanced_tutorial_message_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/plugins/discourse-narrative-bot/spec/jobs/send_advanced_tutorial_message_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/plugins/discourse-narrative-bot/spec/jobs/send_advanced_tutorial_message_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,5 +1,7 @@\n # frozen_string_literal: true\n \n+require 'rails_helper'\n+\n RSpec.describe Jobs::SendAdvancedTutorialMessage do\n   before do\n     Jobs.run_immediately!"
    },
    {
      "sha": "8c14233a5ba95040fd167e9329da3cc71931c4a0",
      "filename": "spec/components/auth/default_current_user_provider_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/auth/default_current_user_provider_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/auth/default_current_user_provider_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/components/auth/default_current_user_provider_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -237,7 +237,7 @@ def provider(url, opts = nil)\n     end\n \n     after do\n-      Discourse.redis.flushall\n+      Discourse.redis.flushdb\n     end\n \n     it \"should not update last seen for suspended users\" do"
    },
    {
      "sha": "abc9a5917a8d3fc4cff0109916499c113da6b420",
      "filename": "spec/components/discourse_redis_spec.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/discourse_redis_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/discourse_redis_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/components/discourse_redis_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -21,11 +21,11 @@\n     let(:raw_redis) { Redis.new(DiscourseRedis.config) }\n \n     before do\n-      raw_redis.flushall\n+      raw_redis.flushdb\n     end\n \n     after do\n-      raw_redis.flushall\n+      raw_redis.flushdb\n     end\n \n     describe 'when namespace is enabled' do"
    },
    {
      "sha": "606955551a1b94b5dfc204a117ee3efd629489b2",
      "filename": "spec/components/email/processor_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/email/processor_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/email/processor_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/components/email/processor_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -5,7 +5,7 @@\n \n describe Email::Processor do\n   after do\n-    Discourse.redis.flushall\n+    Discourse.redis.flushdb\n   end\n \n   let(:from) { \"foo@bar.com\" }"
    },
    {
      "sha": "15c36b05be6dff84e5038b8cd872f4464131ef40",
      "filename": "spec/components/file_store/s3_store_spec.rb",
      "status": "modified",
      "additions": 16,
      "deletions": 1,
      "changes": 17,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/file_store/s3_store_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/file_store/s3_store_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/components/file_store/s3_store_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -251,7 +251,7 @@\n \n       before do\n         optimized_image.update!(\n-          url: \"//s3-upload-bucket.s3.dualstack.us-west-1.amazonaws.com#{image_path}\"\n+          url: \"//s3-upload-bucket.s3.dualstack.us-west-1.amazonaws.com/#{image_path}\"\n         )\n       end\n \n@@ -272,6 +272,12 @@\n           SiteSetting.s3_upload_bucket = \"s3-upload-bucket/discourse-uploads\"\n         end\n \n+        before do\n+          optimized_image.update!(\n+            url: \"//s3-upload-bucket.s3.dualstack.us-west-1.amazonaws.com/discourse-uploads/#{image_path}\"\n+          )\n+        end\n+\n         it \"removes the file from s3 with the right paths\" do\n           s3_helper.expects(:s3_bucket).returns(s3_bucket).at_least_once\n           s3_object = stub\n@@ -298,6 +304,15 @@\n \n   describe \".has_been_uploaded?\" do\n \n+    it \"doesn't crash for invalid URLs\" do\n+      expect(store.has_been_uploaded?(\"https://site.discourse.com/#bad#6\")).to eq(false)\n+    end\n+\n+    it \"doesn't crash if URL contains non-ascii characters\" do\n+      expect(store.has_been_uploaded?(\"//s3-upload-bucket.s3.dualstack.us-east-1.amazonaws.com/1337.png\")).to eq(true)\n+      expect(store.has_been_uploaded?(\"//s3-upload-bucket.s3.amazonaws.com/1337.png\")).to eq(false)\n+    end\n+\n     it \"identifies S3 uploads\" do\n       expect(store.has_been_uploaded?(\"//s3-upload-bucket.s3.dualstack.us-east-1.amazonaws.com/1337.png\")).to eq(true)\n     end"
    },
    {
      "sha": "10b6afc9413f4854f0b97bae71fc113c92f053b5",
      "filename": "spec/components/guardian/user_guardian_spec.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/guardian/user_guardian_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/guardian/user_guardian_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/components/guardian/user_guardian_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -25,13 +25,13 @@\n   end\n \n   let :already_uploaded do\n-    u = Upload.new(user_id: 999, id: 2)\n+    u = Upload.new(user_id: 9999, id: 2)\n     user_avatar.custom_upload_id = u.id\n     u\n   end\n \n   let :not_my_upload do\n-    Upload.new(user_id: 999, id: 3)\n+    Upload.new(user_id: 9999, id: 3)\n   end\n \n   let(:moderator_upload) do"
    },
    {
      "sha": "c5ef73c4d231d93a2ad7414d0e3bf7870624aa79",
      "filename": "spec/components/pretty_text_spec.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/pretty_text_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/pretty_text_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/components/pretty_text_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -508,7 +508,7 @@ def cook(*args)\n         ['apple', 'banana'].each { |w| Fabricate(:watched_word, word: w, action: WatchedWord.actions[:censor]) }\n         expect(PrettyText.cook(\"# banana\")).not_to include('banana')\n       ensure\n-        Discourse.redis.flushall\n+        Discourse.redis.flushdb\n       end\n     end\n   end\n@@ -1166,7 +1166,7 @@ def strip_image_wrapping(html)\n   end\n \n   describe \"censoring\" do\n-    after(:all) { Discourse.redis.flushall }\n+    after(:all) { Discourse.redis.flushdb }\n \n     def expect_cooked_match(raw, expected_cooked)\n       expect(PrettyText.cook(raw)).to eq(expected_cooked)"
    },
    {
      "sha": "599ea3c5aa5310212a2dd5fa88fa6ce4b8eb6a1f",
      "filename": "spec/components/search_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/search_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/components/search_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/components/search_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -444,7 +444,7 @@ def new_post(raw, topic = nil, created_at: nil)\n       end\n \n       let(:expected_blurb) do\n-        \"...to satisfy any test conditions that require content longer than the typical test post raw content. elephant\"\n+        \"...quire content longer than the typical test post raw content. It really is some long content, folks. elephant\"\n       end\n \n       it 'returns the post' do"
    },
    {
      "sha": "77a234d9814d200d21a7956229814b3701869bbc",
      "filename": "spec/fabricators/post_fabricator.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/fabricators/post_fabricator.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/fabricators/post_fabricator.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/fabricators/post_fabricator.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -10,7 +10,7 @@\n Fabricator(:post_with_long_raw_content, from: :post) do\n   raw 'This is a sample post with semi-long raw content. The raw content is also more than\n       two hundred characters to satisfy any test conditions that require content longer\n-      than the typical test post raw content.'\n+      than the typical test post raw content. It really is some long content, folks.'\n end\n \n Fabricator(:post_with_youtube, from: :post) do"
    },
    {
      "sha": "9edc591791fb132266cf0894438476fc194bb01d",
      "filename": "spec/fabricators/web_hook_fabricator.rb",
      "status": "modified",
      "additions": 0,
      "deletions": 16,
      "changes": 16,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/fabricators/web_hook_fabricator.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/fabricators/web_hook_fabricator.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/fabricators/web_hook_fabricator.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -71,22 +71,6 @@\n   end\n end\n \n-Fabricator(:flag_web_hook, from: :web_hook) do\n-  transient flag_hook: WebHookEventType.find_by(name: 'flag')\n-\n-  after_build do |web_hook, transients|\n-    web_hook.web_hook_event_types = [transients[:flag_hook]]\n-  end\n-end\n-\n-Fabricator(:queued_post_web_hook, from: :web_hook) do\n-  transient queued_post_hook: WebHookEventType.find_by(name: 'queued_post')\n-\n-  after_build do |web_hook, transients|\n-    web_hook.web_hook_event_types = [transients[:queued_post_hook]]\n-  end\n-end\n-\n Fabricator(:reviewable_web_hook, from: :web_hook) do\n   transient reviewable_hook: WebHookEventType.find_by(name: 'reviewable')\n "
    },
    {
      "sha": "395dd19df156fcc5b789469ff959d1b9a1fe3e58",
      "filename": "spec/integration/email_style_spec.rb",
      "status": "modified",
      "additions": 105,
      "deletions": 94,
      "changes": 199,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/integration/email_style_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/integration/email_style_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/integration/email_style_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,128 +3,139 @@\n require \"rails_helper\"\n \n describe EmailStyle do\n-  before do\n-    SiteSetting.email_custom_template = \"<body><h1>FOR YOU</h1><div>%{email_content}</div></body>\"\n-    SiteSetting.email_custom_css = 'h1 { color: red; } div.body { color: #FAB; }'\n-    SiteSetting.email_custom_css_compiled = SiteSetting.email_custom_css\n-  end\n-\n-  after do\n-    SiteSetting.remove_override!(:email_custom_template)\n-    SiteSetting.remove_override!(:email_custom_css)\n-  end\n-\n-  context 'invite' do\n-    fab!(:invite) { Fabricate(:invite) }\n-    let(:invite_mail) { InviteMailer.send_invite(invite) }\n \n-    subject(:mail_html) { Email::Renderer.new(invite_mail).html }\n-\n-    it 'applies customizations' do\n-      expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n-      expect(mail_html).to match(\"#{Discourse.base_url}/invites/#{invite.invite_key}\")\n+  context \"ERB evaluation\" do\n+    it \"does not evaluate ERB outside of the email itself\" do\n+      SiteSetting.email_custom_template = \"<div>%{email_content}</div><%= (111 * 333) %>\"\n+      html = Email::Renderer.new(UserNotifications.signup(Fabricate(:user))).html\n+      expect(html).not_to match(\"36963\")\n     end\n+  end\n \n-    it 'applies customizations if compiled is missing' do\n-      SiteSetting.remove_override!(:email_custom_css_compiled)\n-      expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n-      expect(mail_html).to match(\"#{Discourse.base_url}/invites/#{invite.invite_key}\")\n+  context \"with a custom template\" do\n+    before do\n+      SiteSetting.email_custom_template = \"<body><h1>FOR YOU</h1><div>%{email_content}</div></body>\"\n+      SiteSetting.email_custom_css = 'h1 { color: red; } div.body { color: #FAB; }'\n+      SiteSetting.email_custom_css_compiled = SiteSetting.email_custom_css\n     end\n \n-    it 'can apply RTL attrs' do\n-      SiteSetting.default_locale = 'he'\n-      body_attrs = mail_html.match(/<body ([^>])+/)\n-      expect(body_attrs[0]&.downcase).to match(/text-align:\\s*right/)\n-      expect(body_attrs[0]&.downcase).to include('dir=\"rtl\"')\n+    after do\n+      SiteSetting.remove_override!(:email_custom_template)\n+      SiteSetting.remove_override!(:email_custom_css)\n     end\n-  end\n \n-  context 'user_replied' do\n-    let(:response_by_user) { Fabricate(:user, name: \"John Doe\") }\n-    let(:category) { Fabricate(:category, name: 'India') }\n-    let(:topic) { Fabricate(:topic, category: category, title: \"Super cool topic\") }\n-    let(:post) { Fabricate(:post, topic: topic, raw: 'This is My super duper cool topic') }\n-    let(:response) { Fabricate(:basic_reply, topic: post.topic, user: response_by_user) }\n-    let(:user) { Fabricate(:user) }\n-    let(:notification) { Fabricate(:replied_notification, user: user, post: response) }\n-\n-    let(:mail) do\n-      UserNotifications.user_replied(\n-        user,\n-        post: response,\n-        notification_type: notification.notification_type,\n-        notification_data_hash: notification.data_hash\n-      )\n-    end\n+    context 'invite' do\n+      fab!(:invite) { Fabricate(:invite) }\n+      let(:invite_mail) { InviteMailer.send_invite(invite) }\n \n-    subject(:mail_html) { Email::Renderer.new(mail).html }\n+      subject(:mail_html) { Email::Renderer.new(invite_mail).html }\n \n-    it \"customizations are applied to html part of emails\" do\n-      expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n-      matches = mail_html.match(/<div style=\"([^\"]+)\">#{post.raw}/)\n-      expect(matches[1]).to include('color: #FAB;') # custom\n-      expect(matches[1]).to include('padding-top:5px;') # div.body\n-    end\n-\n-    # TODO: translation override\n-  end\n+      it 'applies customizations' do\n+        expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n+        expect(mail_html).to match(\"#{Discourse.base_url}/invites/#{invite.invite_key}\")\n+      end\n \n-  context 'signup' do\n-    let(:signup_mail) { UserNotifications.signup(Fabricate(:user)) }\n-    subject(:mail_html) { Email::Renderer.new(signup_mail).html }\n+      it 'applies customizations if compiled is missing' do\n+        SiteSetting.remove_override!(:email_custom_css_compiled)\n+        expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n+        expect(mail_html).to match(\"#{Discourse.base_url}/invites/#{invite.invite_key}\")\n+      end\n \n-    it \"customizations are applied to html part of emails\" do\n-      expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n-      expect(mail_html).to include('activate-account')\n+      it 'can apply RTL attrs' do\n+        SiteSetting.default_locale = 'he'\n+        body_attrs = mail_html.match(/<body ([^>])+/)\n+        expect(body_attrs[0]&.downcase).to match(/text-align:\\s*right/)\n+        expect(body_attrs[0]&.downcase).to include('dir=\"rtl\"')\n+      end\n     end\n \n-    context 'translation override' do\n-      before do\n-        TranslationOverride.upsert!(\n-          'en',\n-          'user_notifications.signup.text_body_template',\n-          \"CLICK THAT LINK: %{base_url}/u/activate-account/%{email_token}\"\n+    context 'user_replied' do\n+      let(:response_by_user) { Fabricate(:user, name: \"John Doe\") }\n+      let(:category) { Fabricate(:category, name: 'India') }\n+      let(:topic) { Fabricate(:topic, category: category, title: \"Super cool topic\") }\n+      let(:post) { Fabricate(:post, topic: topic, raw: 'This is My super duper cool topic') }\n+      let(:response) { Fabricate(:basic_reply, topic: post.topic, user: response_by_user) }\n+      let(:user) { Fabricate(:user) }\n+      let(:notification) { Fabricate(:replied_notification, user: user, post: response) }\n+\n+      let(:mail) do\n+        UserNotifications.user_replied(\n+          user,\n+          post: response,\n+          notification_type: notification.notification_type,\n+          notification_data_hash: notification.data_hash\n         )\n       end\n \n-      after do\n-        TranslationOverride.revert!('en', ['user_notifications.signup.text_body_template'])\n-      end\n+      subject(:mail_html) { Email::Renderer.new(mail).html }\n \n-      it \"applies customizations when translation override exists\" do\n+      it \"customizations are applied to html part of emails\" do\n         expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n-        expect(mail_html.scan('CLICK THAT LINK').count).to eq(1)\n+        matches = mail_html.match(/<div style=\"([^\"]+)\">#{post.raw}/)\n+        expect(matches[1]).to include('color: #FAB;') # custom\n+        expect(matches[1]).to include('padding-top:5px;') # div.body\n       end\n+\n+      # TODO: translation override\n     end\n \n-    context 'with some bad css' do\n-      before do\n-        SiteSetting.email_custom_css = '@import \"nope.css\"; h1 {{{ size: really big; '\n-        SiteSetting.email_custom_css_compiled = SiteSetting.email_custom_css\n-      end\n+    context 'signup' do\n+      let(:signup_mail) { UserNotifications.signup(Fabricate(:user)) }\n+      subject(:mail_html) { Email::Renderer.new(signup_mail).html }\n \n-      it \"can render the html\" do\n-        expect(mail_html.scan(/<h1\\s*(?:style=\"\"){0,1}>FOR YOU<\\/h1>/).count).to eq(1)\n+      it \"customizations are applied to html part of emails\" do\n+        expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n         expect(mail_html).to include('activate-account')\n       end\n-    end\n-  end\n \n-  context 'digest' do\n-    fab!(:popular_topic) { Fabricate(:topic, user: Fabricate(:coding_horror), created_at: 1.hour.ago) }\n-    let(:summary_email) { UserNotifications.digest(Fabricate(:user)) }\n-    subject(:mail_html) { Email::Renderer.new(summary_email).html }\n+      context 'translation override' do\n+        before do\n+          TranslationOverride.upsert!(\n+            'en',\n+            'user_notifications.signup.text_body_template',\n+            \"CLICK THAT LINK: %{base_url}/u/activate-account/%{email_token}\"\n+          )\n+        end\n+\n+        after do\n+          TranslationOverride.revert!('en', ['user_notifications.signup.text_body_template'])\n+        end\n+\n+        it \"applies customizations when translation override exists\" do\n+          expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n+          expect(mail_html.scan('CLICK THAT LINK').count).to eq(1)\n+        end\n+      end\n \n-    it \"customizations are applied to html part of emails\" do\n-      expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n-      expect(mail_html).to include(popular_topic.title)\n+      context 'with some bad css' do\n+        before do\n+          SiteSetting.email_custom_css = '@import \"nope.css\"; h1 {{{ size: really big; '\n+          SiteSetting.email_custom_css_compiled = SiteSetting.email_custom_css\n+        end\n+\n+        it \"can render the html\" do\n+          expect(mail_html.scan(/<h1\\s*(?:style=\"\"){0,1}>FOR YOU<\\/h1>/).count).to eq(1)\n+          expect(mail_html).to include('activate-account')\n+        end\n+      end\n     end\n \n-    it \"doesn't apply customizations if apply_custom_styles_to_digest is disabled\" do\n-      SiteSetting.apply_custom_styles_to_digest = false\n-      expect(mail_html).to_not include('<h1 style=\"color: red;\">FOR YOU</h1>')\n-      expect(mail_html).to_not include('FOR YOU')\n-      expect(mail_html).to include(popular_topic.title)\n+    context 'digest' do\n+      fab!(:popular_topic) { Fabricate(:topic, user: Fabricate(:coding_horror), created_at: 1.hour.ago) }\n+      let(:summary_email) { UserNotifications.digest(Fabricate(:user)) }\n+      subject(:mail_html) { Email::Renderer.new(summary_email).html }\n+\n+      it \"customizations are applied to html part of emails\" do\n+        expect(mail_html.scan('<h1 style=\"color: red;\">FOR YOU</h1>').count).to eq(1)\n+        expect(mail_html).to include(popular_topic.title)\n+      end\n+\n+      it \"doesn't apply customizations if apply_custom_styles_to_digest is disabled\" do\n+        SiteSetting.apply_custom_styles_to_digest = false\n+        expect(mail_html).to_not include('<h1 style=\"color: red;\">FOR YOU</h1>')\n+        expect(mail_html).to_not include('FOR YOU')\n+        expect(mail_html).to include(popular_topic.title)\n+      end\n     end\n   end\n end"
    },
    {
      "sha": "dcdbb084d5aa4de24189ebddcfabc73a6c36a73a",
      "filename": "spec/integration/topic_thumbnail_spec.rb",
      "status": "modified",
      "additions": 34,
      "deletions": 1,
      "changes": 35,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/integration/topic_thumbnail_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/integration/topic_thumbnail_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/integration/topic_thumbnail_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -10,7 +10,7 @@\n \n   context 'latest' do\n     def get_topic\n-      Discourse.redis.del(topic.thumbnail_job_redis_key([]))\n+      Discourse.redis.del(topic.thumbnail_job_redis_key(Topic.thumbnail_sizes))\n       get '/latest.json'\n       response.parsed_body[\"topic_list\"][\"topics\"][0]\n     end\n@@ -84,5 +84,38 @@ def get_topic\n         expect(thumbnails.length).to eq(5)\n       end\n     end\n+\n+    context \"with a plugin\" do\n+      before do\n+        plugin = Plugin::Instance.new\n+        plugin.register_topic_thumbnail_size [512, 512]\n+      end\n+\n+      after do\n+        DiscoursePluginRegistry.reset!\n+      end\n+\n+      it \"includes the theme specified resolutions\" do\n+        topic_json = nil\n+\n+        expect do\n+          topic_json = get_topic\n+        end.to change { Jobs::GenerateTopicThumbnails.jobs.size }.by(1)\n+\n+        # Run the job\n+        args = Jobs::GenerateTopicThumbnails.jobs.last[\"args\"].first\n+        Jobs::GenerateTopicThumbnails.new.execute(args.with_indifferent_access)\n+\n+        # Request again\n+        expect do\n+          topic_json = get_topic\n+        end.to change { Jobs::GenerateTopicThumbnails.jobs.size }.by(0)\n+\n+        thumbnails = topic_json[\"thumbnails\"]\n+\n+        # Original + Optimized + 1 plugin request\n+        expect(thumbnails.length).to eq(3)\n+      end\n+    end\n   end\n end"
    },
    {
      "sha": "25379d0ba39085512ff8d7f8ade6790f337989b6",
      "filename": "spec/jobs/bookmark_reminder_notifications_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/jobs/bookmark_reminder_notifications_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/jobs/bookmark_reminder_notifications_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/jobs/bookmark_reminder_notifications_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -22,7 +22,7 @@\n     bookmark1.update_column(:reminder_at, five_minutes_ago - 10.minutes)\n     bookmark2.update_column(:reminder_at, five_minutes_ago - 5.minutes)\n     bookmark3.update_column(:reminder_at, five_minutes_ago)\n-    Discourse.redis.flushall\n+    Discourse.redis.flushdb\n   end\n \n   it \"sends every reminder and marks the reminder_at to nil for all bookmarks, as well as last sent date\" do"
    },
    {
      "sha": "3d9a6d77f64320efefd39f7ccd2410d7de514834",
      "filename": "spec/lib/bookmark_reminder_notification_handler_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/lib/bookmark_reminder_notification_handler_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/lib/bookmark_reminder_notification_handler_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/lib/bookmark_reminder_notification_handler_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -8,7 +8,7 @@\n   fab!(:user) { Fabricate(:user) }\n \n   before do\n-    Discourse.redis.flushall\n+    Discourse.redis.flushdb\n   end\n \n   describe \"#send_notification\" do"
    },
    {
      "sha": "5bc5206bced7b304c8326ccd473269354cfe7a97",
      "filename": "spec/models/post_spec.rb",
      "status": "modified",
      "additions": 38,
      "deletions": 0,
      "changes": 38,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/post_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/post_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/models/post_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1158,6 +1158,25 @@ def post_with_body(body, user = nil)\n     expect(post.custom_fields).to eq(\"Tommy\" => \"Hanks\", \"Vincent\" => \"Vega\")\n   end\n \n+  describe \"#excerpt_for_topic\" do\n+    it \"returns a topic excerpt, defaulting to 220 chars\" do\n+      expected_excerpt = \"This is a sample post with semi-long raw content. The raw content is also more than \\ntwo hundred characters to satisfy any test conditions that require content longer \\nthan the typical test post raw content. It really is&hellip;\"\n+      post = Fabricate(:post_with_long_raw_content)\n+      post.rebake!\n+      excerpt = post.excerpt_for_topic\n+      expect(excerpt).to eq(expected_excerpt)\n+    end\n+\n+    it \"respects the site setting for topic excerpt\" do\n+      SiteSetting.topic_excerpt_maxlength = 10\n+      expected_excerpt = \"This is a &hellip;\"\n+      post = Fabricate(:post_with_long_raw_content)\n+      post.rebake!\n+      excerpt = post.excerpt_for_topic\n+      expect(excerpt).to eq(expected_excerpt)\n+    end\n+  end\n+\n   describe \"#rebake!\" do\n     it \"will rebake a post correctly\" do\n       post = create_post\n@@ -1176,6 +1195,25 @@ def post_with_body(body, user = nil)\n       expect(post.cooked).to eq(first_cooked)\n       expect(result).to eq(true)\n     end\n+\n+    it \"updates the topic excerpt at the same time if it is the OP\" do\n+      post = create_post\n+      post.topic.update(excerpt: \"test\")\n+      DB.exec(\"UPDATE posts SET cooked = 'frogs' WHERE id = ?\", [ post.id ])\n+      post.reload\n+      result = post.rebake!\n+      post.topic.reload\n+      expect(post.topic.excerpt).not_to eq(\"test\")\n+    end\n+\n+    it \"does not update the topic excerpt if the post is not the OP\" do\n+      post = create_post\n+      post2 = create_post\n+      post.topic.update(excerpt: \"test\")\n+      result = post2.rebake!\n+      post.topic.reload\n+      expect(post.topic.excerpt).to eq(\"test\")\n+    end\n   end\n \n   describe \"#set_owner\" do"
    },
    {
      "sha": "c91781e6dd7756f020155d97ce23097c61e2fec9",
      "filename": "spec/models/topic_embed_spec.rb",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/topic_embed_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/topic_embed_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/models/topic_embed_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -308,6 +308,14 @@\n       end\n     end\n \n+    context \"non-http URL\" do\n+      let(:url) { '/test.txt' }\n+\n+      it \"throws an error\" do\n+        expect { TopicEmbed.find_remote(url) }.to raise_error(URI::InvalidURIError)\n+      end\n+    end\n+\n     context \"emails\" do\n       let(:url) { 'http://example.com/foo' }\n       let(:contents) { '<p><a href=\"mailto:foo%40example.com\">URL encoded @ symbol</a></p><p><a href=\"mailto:bar@example.com\">normal mailto link</a></p>' }"
    },
    {
      "sha": "d1d5d1cc9115e94bafa544eca87361d9375012e0",
      "filename": "spec/models/topic_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/topic_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/topic_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/models/topic_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -33,7 +33,7 @@\n \n       describe 'censored words' do\n         after do\n-          Discourse.redis.flushall\n+          Discourse.redis.flushdb\n         end\n \n         describe 'when title contains censored words' do"
    },
    {
      "sha": "4d2592c788f70be7f2e5401448d1cf21fc89b481",
      "filename": "spec/models/user_spec.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 7,
      "changes": 9,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/user_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/models/user_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/models/user_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1578,20 +1578,15 @@ def hash(password, salt)\n \n     describe '#number_of_rejected_posts' do\n       it 'counts rejected posts' do\n-        post = Fabricate(:post, user: user)\n-\n-        Fabricate(:reviewable_queued_post, target: post, status: Reviewable.statuses[:rejected])\n+        Fabricate(:reviewable_queued_post, created_by: user, status: Reviewable.statuses[:rejected])\n \n         expect(user.number_of_rejected_posts).to eq(1)\n       end\n \n       it 'ignore non-rejected posts' do\n-        post = Fabricate(:post, user: user)\n-\n-        Fabricate(:reviewable_queued_post, target: post, status: Reviewable.statuses[:approved])\n+        Fabricate(:reviewable_queued_post, created_by: user, status: Reviewable.statuses[:approved])\n \n         expect(user.number_of_rejected_posts).to eq(0)\n-\n       end\n     end\n   end"
    },
    {
      "sha": "064c699a12ba3122796bde0b577d78f239e3cb4b",
      "filename": "spec/multisite/s3_store_spec.rb",
      "status": "modified",
      "additions": 43,
      "deletions": 0,
      "changes": 43,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/multisite/s3_store_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/multisite/s3_store_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/multisite/s3_store_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -217,4 +217,47 @@ def build_upload\n       end\n     end\n   end\n+\n+  describe \"#has_been_uploaded?\" do\n+    before do\n+      SiteSetting.s3_region = 'us-west-1'\n+      SiteSetting.s3_upload_bucket = \"s3-upload-bucket/test\"\n+      SiteSetting.s3_access_key_id = \"s3-access-key-id\"\n+      SiteSetting.s3_secret_access_key = \"s3-secret-access-key\"\n+      SiteSetting.enable_s3_uploads = true\n+    end\n+\n+    let(:store) { FileStore::S3Store.new }\n+    let(:client) { Aws::S3::Client.new(stub_responses: true) }\n+    let(:resource) { Aws::S3::Resource.new(client: client) }\n+    let(:s3_bucket) { resource.bucket(SiteSetting.s3_upload_bucket) }\n+    let(:s3_helper) { store.s3_helper }\n+\n+    it \"returns false for blank urls\" do\n+      url = \"\"\n+      expect(store.has_been_uploaded?(url)).to eq(false)\n+    end\n+\n+    it \"returns true if the base hostname is the same for both urls\" do\n+      url = \"https://s3-upload-bucket.s3.dualstack.us-west-1.amazonaws.com/test/original/2X/d/dd7964f5fd13e1103c5244ca30abe1936c0a4b88.png\"\n+      expect(store.has_been_uploaded?(url)).to eq(true)\n+    end\n+\n+    it \"returns false if the base hostname is the same for both urls BUT the bucket name is different in the path\" do\n+      bucket = \"someotherbucket\"\n+      url = \"https://s3-upload-bucket.s3.dualstack.us-west-1.amazonaws.com/#{bucket}/original/2X/d/dd7964f5fd13e1103c5244ca30abe1936c0a4b88.png\"\n+      expect(store.has_been_uploaded?(url)).to eq(false)\n+    end\n+\n+    it \"returns false if the hostnames do not match and the s3_cdn_url is blank\" do\n+      url = \"https://www.someotherhostname.com/test/original/2X/d/dd7964f5fd13e1103c5244ca30abe1936c0a4b88.png\"\n+      expect(store.has_been_uploaded?(url)).to eq(false)\n+    end\n+\n+    it \"returns true if the s3_cdn_url is present and matches the url hostname\" do\n+      SiteSetting.s3_cdn_url = \"https://www.someotherhostname.com\"\n+      url = \"https://www.someotherhostname.com/test/original/2X/d/dd7964f5fd13e1103c5244ca30abe1936c0a4b88.png\"\n+      expect(store.has_been_uploaded?(url)).to eq(true)\n+    end\n+  end\n end"
    },
    {
      "sha": "256de296583bb391c35b11ac18f569d669242260",
      "filename": "spec/rails_helper.rb",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/rails_helper.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/rails_helper.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/rails_helper.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -128,6 +128,12 @@ def self.test_setup(x = nil)\n     # code that runs inside jobs. run_later! means they are put on the redis\n     # queue and never processed.\n     Jobs.run_later!\n+\n+    # Don't track ApplicationRequests in test mode unless opted in\n+    ApplicationRequest.disable\n+\n+    # Don't queue badge grant in test mode\n+    BadgeGranter.disable_queue\n   end\n end\n "
    },
    {
      "sha": "a10b7663043156f5e90c3d757b412d62d0ef61e2",
      "filename": "spec/requests/about_controller_spec.rb",
      "status": "modified",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/about_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/about_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/about_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -36,5 +36,21 @@\n         expect(response.body).to include(\"<title>About - Discourse</title>\")\n       end\n     end\n+\n+    it \"serializes stats when 'Guardian#can_see_about_stats?' is true\" do\n+      Guardian.any_instance.stubs(:can_see_about_stats?).returns(true)\n+      get \"/about.json\"\n+\n+      expect(response.status).to eq(200)\n+      expect(response.parsed_body[\"about\"].keys).to include(\"stats\")\n+    end\n+\n+    it \"does not serialize stats when 'Guardian#can_see_about_stats?' is false\" do\n+      Guardian.any_instance.stubs(:can_see_about_stats?).returns(false)\n+      get \"/about.json\"\n+\n+      expect(response.status).to eq(200)\n+      expect(response.parsed_body[\"about\"].keys).not_to include(\"stats\")\n+    end\n   end\n end"
    },
    {
      "sha": "03b9245744d209f4f3f368f88e332ea6f7beb471",
      "filename": "spec/requests/admin/backups_controller_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/admin/backups_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/admin/backups_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/admin/backups_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -35,7 +35,7 @@ def map_preloaded\n   end\n \n   after do\n-    Discourse.redis.flushall\n+    Discourse.redis.flushdb\n \n     @paths&.each { |path| File.delete(path) if File.exists?(path) }\n     @paths = nil"
    },
    {
      "sha": "099372cad0061edb01c477727cccc258594b21d9",
      "filename": "spec/requests/admin/users_controller_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/admin/users_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/admin/users_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/admin/users_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -293,7 +293,7 @@\n     fab!(:another_user) { Fabricate(:coding_horror) }\n \n     after do\n-      Discourse.redis.flushall\n+      Discourse.redis.flushdb\n     end\n \n     it \"raises an error when the user doesn't have permission\" do"
    },
    {
      "sha": "bc913c58a04e1ceadf9c1682b4ab7acca6e70afb",
      "filename": "spec/requests/list_controller_spec.rb",
      "status": "modified",
      "additions": 12,
      "deletions": 1,
      "changes": 13,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/list_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/list_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/list_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -128,7 +128,7 @@\n     let(:moderator) { Fabricate(:moderator) }\n     let(:admin) { Fabricate(:admin) }\n     let(:tag) { Fabricate(:tag) }\n-    let(:private_message) { Fabricate(:private_message_topic) }\n+    let(:private_message) { Fabricate(:private_message_topic, user: admin) }\n \n     before do\n       SiteSetting.tagging_enabled = true\n@@ -149,6 +149,17 @@\n         expect(response.status).to eq(200)\n       end\n     end\n+\n+    it 'should work for tag with unicode name' do\n+      unicode_tag = Fabricate(:tag, name: 'hello-')\n+      Fabricate(:topic_tag, tag: unicode_tag, topic: private_message)\n+\n+      sign_in(admin)\n+      get \"/topics/private-messages-tags/#{admin.username}/#{UrlHelper.encode_component(unicode_tag.name)}.json\"\n+      expect(response.status).to eq(200)\n+      expect(response.parsed_body[\"topic_list\"][\"topics\"].first[\"id\"])\n+        .to eq(private_message.id)\n+    end\n   end\n \n   describe '#private_messages_group' do"
    },
    {
      "sha": "ff355ada967a1e89b67994874c011c3081d656a7",
      "filename": "spec/requests/posts_controller_spec.rb",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/posts_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/posts_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/posts_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -675,6 +675,17 @@\n           I18n.t(\"invalid_params\", message: \"category\")\n         )\n       end\n+\n+      it 'will raise an error if specified embed_url is invalid' do\n+        user = Fabricate(:admin)\n+        master_key = Fabricate(:api_key).key\n+\n+        post \"/posts.json\",\n+          params: { title: 'this is a test title', raw: 'this is test body', embed_url: '/test.txt' },\n+          headers: { HTTP_API_USERNAME: user.username, HTTP_API_KEY: master_key }\n+\n+        expect(response.status).to eq(422)\n+      end\n     end\n \n     describe \"when logged in\" do"
    },
    {
      "sha": "dac11690d3eb8fad130c81b7fbcf1f1773222aba",
      "filename": "spec/requests/search_controller_spec.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/search_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/search_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/search_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -26,11 +26,11 @@\n     before do\n       # TODO be a bit more strategic here instead of junking\n       # all of redis\n-      Discourse.redis.flushall\n+      Discourse.redis.flushdb\n     end\n \n     after do\n-      Discourse.redis.flushall\n+      Discourse.redis.flushdb\n     end\n \n     context \"when overloaded\" do"
    },
    {
      "sha": "9649f57f5ba1df3d4493110b564085677beccd74",
      "filename": "spec/requests/topics_controller_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/topics_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/topics_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/topics_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -2127,7 +2127,7 @@ def headers(locale)\n     let(:topic) { post.topic }\n \n     after do\n-      Discourse.redis.flushall\n+      Discourse.redis.flushdb\n     end\n \n     it 'returns first post of the topic' do"
    },
    {
      "sha": "580c0c72f05dc8d3222482f7e3df65678a70863b",
      "filename": "spec/requests/webhooks_controller_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/webhooks_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/requests/webhooks_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/webhooks_controller_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -3,7 +3,7 @@\n require \"rails_helper\"\n \n describe WebhooksController do\n-  before { Discourse.redis.flushall }\n+  before { Discourse.redis.flushdb }\n \n   let(:email) { \"em@il.com\" }\n   let(:message_id) { \"12345@il.com\" }"
    },
    {
      "sha": "f6249b275bbd0a6009f93b7c4b7cbae594675c75",
      "filename": "spec/serializers/topic_view_serializer_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/serializers/topic_view_serializer_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/serializers/topic_view_serializer_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/serializers/topic_view_serializer_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -60,7 +60,7 @@ def serialize_topic(topic, user_arg)\n       it 'should have thumbnails' do\n         SiteSetting.create_thumbnails = true\n \n-        Discourse.redis.del(topic.thumbnail_job_redis_key([]))\n+        Discourse.redis.del(topic.thumbnail_job_redis_key(Topic.thumbnail_sizes))\n         json = nil\n \n         expect do"
    },
    {
      "sha": "5cf70b658398d8b75df188c60f7141e3266ffff0",
      "filename": "spec/services/word_watcher_spec.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/services/word_watcher_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/spec/services/word_watcher_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/services/word_watcher_spec.rb?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -7,7 +7,7 @@\n   let(:raw) { \"Do you like liquorice?\\n\\nI really like them. One could even say that I am *addicted* to liquorice. Anf if\\nyou can mix it up with some anise, then I'm in heaven ;)\" }\n \n   after do\n-    Discourse.redis.flushall\n+    Discourse.redis.flushdb\n   end\n \n   describe '.word_matcher_regexp' do"
    },
    {
      "sha": "2247c8cbee78c6597a806fa99d5c05bceb8504b4",
      "filename": "test/javascripts/acceptance/category-chooser-test.js",
      "status": "modified",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/acceptance/category-chooser-test.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/acceptance/category-chooser-test.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/acceptance/category-chooser-test.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -29,3 +29,19 @@ QUnit.test(\"prefill category when category_id is set\", async assert => {\n     1\n   );\n });\n+\n+QUnit.test(\"filter is case insensitive\", async assert => {\n+  const categoryChooser = selectKit(\".category-chooser\");\n+\n+  await visit(\"/\");\n+  await click(\"#create-topic\");\n+  await categoryChooser.expand();\n+  await categoryChooser.fillInFilter(\"bug\");\n+\n+  assert.ok(categoryChooser.rows().length, 1);\n+\n+  await categoryChooser.emptyFilter();\n+  await categoryChooser.fillInFilter(\"Bug\");\n+\n+  assert.ok(categoryChooser.rows().length, 1);\n+});"
    },
    {
      "sha": "a3d8472b5357416f02955947a3888bb12567a792",
      "filename": "test/javascripts/acceptance/emoji-picker-test.js",
      "status": "modified",
      "additions": 0,
      "deletions": 13,
      "changes": 13,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/acceptance/emoji-picker-test.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/acceptance/emoji-picker-test.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/acceptance/emoji-picker-test.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -168,19 +168,6 @@ QUnit.test(\n   }\n );\n \n-QUnit.test(\"emoji picker lazy loads emojis\", async assert => {\n-  await visit(\"/t/internationalization-localization/280\");\n-  await click(\"#topic-footer-buttons .btn.create\");\n-\n-  await click(\"button.emoji.btn\");\n-\n-  assert.equal(\n-    find('.emoji-picker button[title=\"massage_woman\"]').css(\"background-image\"),\n-    \"none\",\n-    \"it doesn't load invisible emojis\"\n-  );\n-});\n-\n QUnit.test(\"emoji picker persists state\", async assert => {\n   await visit(\"/t/internationalization-localization/280\");\n   await click(\"#topic-footer-buttons .btn.create\");"
    },
    {
      "sha": "20afdcd1677d35ae37c7164e43a08c337da6e595",
      "filename": "test/javascripts/acceptance/preferences-test.js",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/acceptance/preferences-test.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/acceptance/preferences-test.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/acceptance/preferences-test.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,7 +1,6 @@\n import I18n from \"I18n\";\n import { acceptance, updateCurrentUser } from \"helpers/qunit-helpers\";\n import selectKit from \"helpers/select-kit-helper\";\n-\n import User from \"discourse/models/user\";\n \n acceptance(\"User Preferences\", {"
    },
    {
      "sha": "4c7de6a87a32f10d42d2b964e89a650768956a31",
      "filename": "test/javascripts/fixtures/about.js",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/fixtures/about.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/fixtures/about.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/fixtures/about.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -1,6 +1,7 @@\n export default {\n   \"about.json\": {\n     about: {\n+      can_see_about_stats: true,\n       stats: {\n         topic_count: 27480,\n         post_count: 490358,"
    },
    {
      "sha": "f7959913263656472eed85b85559d5f084f2c828",
      "filename": "test/javascripts/helpers/select-kit-helper.js",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/discourse/discourse/blob/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/helpers/select-kit-helper.js",
      "raw_url": "https://github.com/discourse/discourse/raw/d9a02d1336dd86e7fff4f14735fb0f1970555abd/test/javascripts/helpers/select-kit-helper.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/helpers/select-kit-helper.js?ref=d9a02d1336dd86e7fff4f14735fb0f1970555abd",
      "patch": "@@ -32,6 +32,11 @@ async function selectKitFillInFilter(filter, selector) {\n   );\n }\n \n+async function selectKitEmptyFilter(selector) {\n+  checkSelectKitIsNotCollapsed(selector);\n+  await fillIn(`${selector} .filter-input`, \"\");\n+}\n+\n async function selectKitSelectRowByValue(value, selector) {\n   checkSelectKitIsNotCollapsed(selector);\n   await click(`${selector} .select-kit-row[data-value='${value}']`);\n@@ -180,6 +185,10 @@ export default function selectKit(selector) {\n       await selectKitFillInFilter(filter, selector);\n     },\n \n+    async emptyFilter() {\n+      await selectKitEmptyFilter(selector);\n+    },\n+\n     async keyboard(value, target) {\n       await keyboardHelper(value, target, selector);\n     },"
    }
  ]
}
