{
  "sha": "3098a75a0529b39bb5b1232c97947ff1282641bf",
  "node_id": "C_kwDOCQOkhNoAKDMwOThhNzVhMDUyOWIzOWJiNWIxMjMyYzk3OTQ3ZmYxMjgyNjQxYmY",
  "commit": {
    "author": {
      "name": "qwqcode",
      "email": "qwqcode@gmail.com",
      "date": "2024-04-15T07:05:42Z"
    },
    "committer": {
      "name": "qwqcode",
      "email": "qwqcode@gmail.com",
      "date": "2024-04-15T07:05:42Z"
    },
    "message": "perf(ui/version_check): beautify version upgrade notice",
    "tree": {
      "sha": "955e5893226a5227bcd05b31214383ce8499b76e",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/trees/955e5893226a5227bcd05b31214383ce8499b76e"
    },
    "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/commits/3098a75a0529b39bb5b1232c97947ff1282641bf",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYIAB0WIQS0Ev3sdPZbHkWwzmLUbg8O6nwTagUCZhzRxgAKCRDUbg8O6nwT\nakmWAQCSKKMWHUPrLpj82VEEn2G338X2YoH64BYlyWBSlYSoogD6A+P/DiGDjPG+\nTXXqsZ06fw3wLKYMl62tHewIUU7Pdw8=\n=hkNt\n-----END PGP SIGNATURE-----",
      "payload": "tree 955e5893226a5227bcd05b31214383ce8499b76e\nparent d71ac6d1569cc75b3e1a0a9f4b4f1a7edbb5943d\nauthor qwqcode <qwqcode@gmail.com> 1713164742 +0800\ncommitter qwqcode <qwqcode@gmail.com> 1713164742 +0800\n\nperf(ui/version_check): beautify version upgrade notice\n"
    }
  },
  "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/3098a75a0529b39bb5b1232c97947ff1282641bf",
  "html_url": "https://github.com/ArtalkJS/Artalk/commit/3098a75a0529b39bb5b1232c97947ff1282641bf",
  "comments_url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/3098a75a0529b39bb5b1232c97947ff1282641bf/comments",
  "author": {
    "login": "qwqcode",
    "id": 22412567,
    "node_id": "MDQ6VXNlcjIyNDEyNTY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qwqcode",
    "html_url": "https://github.com/qwqcode",
    "followers_url": "https://api.github.com/users/qwqcode/followers",
    "following_url": "https://api.github.com/users/qwqcode/following{/other_user}",
    "gists_url": "https://api.github.com/users/qwqcode/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qwqcode/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qwqcode/subscriptions",
    "organizations_url": "https://api.github.com/users/qwqcode/orgs",
    "repos_url": "https://api.github.com/users/qwqcode/repos",
    "events_url": "https://api.github.com/users/qwqcode/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qwqcode/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "qwqcode",
    "id": 22412567,
    "node_id": "MDQ6VXNlcjIyNDEyNTY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qwqcode",
    "html_url": "https://github.com/qwqcode",
    "followers_url": "https://api.github.com/users/qwqcode/followers",
    "following_url": "https://api.github.com/users/qwqcode/following{/other_user}",
    "gists_url": "https://api.github.com/users/qwqcode/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qwqcode/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qwqcode/subscriptions",
    "organizations_url": "https://api.github.com/users/qwqcode/orgs",
    "repos_url": "https://api.github.com/users/qwqcode/repos",
    "events_url": "https://api.github.com/users/qwqcode/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qwqcode/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d71ac6d1569cc75b3e1a0a9f4b4f1a7edbb5943d",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/d71ac6d1569cc75b3e1a0a9f4b4f1a7edbb5943d",
      "html_url": "https://github.com/ArtalkJS/Artalk/commit/d71ac6d1569cc75b3e1a0a9f4b4f1a7edbb5943d"
    }
  ],
  "stats": {
    "total": 43,
    "additions": 32,
    "deletions": 11
  },
  "files": [
    {
      "sha": "cb98113f33aaaf03b7c9e357971b66a92f2b0b38",
      "filename": "ui/artalk/src/i18n/en.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fen.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fen.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fen.ts?ref=3098a75a0529b39bb5b1232c97947ff1282641bf",
      "patch": "@@ -79,7 +79,7 @@ const en = {\n   deleteFail: 'Delete Failed',\n   reqGot: 'Request got',\n   reqAborted: 'Request timed out or terminated unexpectedly',\n-  updateMsg: 'Please update Artalk {name} to get the full experience',\n+  updateMsg: 'Please update Artalk {name} to get the best experience!',\n   currentVersion: 'Current Version',\n   ignore: 'Ignore',\n   open: 'Open',"
    },
    {
      "sha": "5373155f4115350b4f79ffce7f00391e66f76ada",
      "filename": "ui/artalk/src/i18n/jp.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fjp.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fjp.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fjp.ts?ref=3098a75a0529b39bb5b1232c97947ff1282641bf",
      "patch": "@@ -83,7 +83,7 @@ export default defineLocaleExternal(\n     deleteFail: '削除に失敗しました',\n     reqGot: 'リクエストが受信されました',\n     reqAborted: 'リクエストがタイムアウトまたは予期せず中止されました',\n-    updateMsg: '完全な体験を得るにはArtalk {name}を更新してください',\n+    updateMsg: 'Artalk {name} を更新して、より良い体験をしてください！',\n     currentVersion: '現在のバージョン',\n     ignore: '無視',\n     open: '開く',"
    },
    {
      "sha": "70dda4da98302248f5723646bf98a8d670126a49",
      "filename": "ui/artalk/src/i18n/zh-CN.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-CN.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-CN.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-CN.ts?ref=3098a75a0529b39bb5b1232c97947ff1282641bf",
      "patch": "@@ -81,7 +81,7 @@ const zhCN: I18n = {\n   deleteFail: '删除失败',\n   reqGot: '请求响应',\n   reqAborted: '请求超时或意外终止',\n-  updateMsg: '请更新 Artalk {name} 以获得完整体验',\n+  updateMsg: '请更新 Artalk {name} 以获得更好的体验！',\n   currentVersion: '当前版本',\n   ignore: '忽略',\n   open: '打开',"
    },
    {
      "sha": "2d4ecf4b3cef0dc004ca31aa7c2521029f5fb1c6",
      "filename": "ui/artalk/src/i18n/zh-TW.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-TW.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-TW.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fi18n%2Fzh-TW.ts?ref=3098a75a0529b39bb5b1232c97947ff1282641bf",
      "patch": "@@ -81,7 +81,7 @@ export default defineLocaleExternal('zh-TW', {\n   deleteFail: '刪除失敗',\n   reqGot: '請求已接收',\n   reqAborted: '請求超時或意外終止',\n-  updateMsg: '請更新 Artalk {name} 以獲得完整體驗',\n+  updateMsg: '請更新 Artalk {name} 以獲得更好的體驗！',\n   currentVersion: '當前版本',\n   ignore: '忽略',\n   open: '打開',"
    },
    {
      "sha": "3eb09035105e42460d28242ad4e06d60bd2ef163",
      "filename": "ui/artalk/src/plugins/version-check.ts",
      "status": "modified",
      "additions": 7,
      "deletions": 7,
      "changes": 14,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fplugins%2Fversion-check.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fplugins%2Fversion-check.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fplugins%2Fversion-check.ts?ref=3098a75a0529b39bb5b1232c97947ff1282641bf",
      "patch": "@@ -21,17 +21,17 @@ function versionCheck(list: List, feVer: string, beVer: string) {\n   if (sameVer) return\n \n   const errEl = Utils.createElement(\n-    `<div>${$t('updateMsg', { name: comp < 0 ? $t('frontend') : $t('backend') })}` +\n-      `<br/><br/><span style=\"color: var(--at-color-meta);\">` +\n+    `<div class=\"atk-version-check-notice\">${$t('updateMsg', {\n+      name: comp < 0 ? $t('frontend') : $t('backend'),\n+    })}<span class=\"atk-info\">` +\n       `${$t('currentVersion')}: ${$t('frontend')} ${feVer} / ${$t('backend')} ${beVer}` +\n-      `</span><br/><br/></div>`,\n+      `</span></div>`,\n   )\n-  const ignoreBtn = Utils.createElement(`<span style=\"cursor:pointer\">${$t('ignore')}</span>`)\n+  const ignoreBtn = Utils.createElement(`<span class=\"atk-ignore-btn\">${$t('ignore')}</span>`)\n   ignoreBtn.onclick = () => {\n-    Ui.setError(list.$el.parentElement!, null)\n+    errEl.remove()\n     IgnoreVersionCheck = true\n-    list.ctx.fetch({ offset: 0 })\n   }\n   errEl.append(ignoreBtn)\n-  Ui.setError(list.$el.parentElement!, errEl, '<span class=\"atk-warn-title\">Artalk Warn</span>')\n+  list.$el.parentElement!.prepend(errEl)\n }"
    },
    {
      "sha": "370033f6762b50186c0fb6b445a67caa70975f59",
      "filename": "ui/artalk/src/style/main.scss",
      "status": "modified",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fstyle%2Fmain.scss",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/3098a75a0529b39bb5b1232c97947ff1282641bf/ui%2Fartalk%2Fsrc%2Fstyle%2Fmain.scss",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fstyle%2Fmain.scss?ref=3098a75a0529b39bb5b1232c97947ff1282641bf",
      "patch": "@@ -368,6 +368,27 @@\n   }\n }\n \n+.atk-version-check-notice {\n+  background: var(--at-color-bg-grey);\n+  border-radius: $block-radius;\n+  padding: 10px 20px;\n+  margin-bottom: 10px;\n+  font-size: 14px;\n+\n+  .atk-info {\n+    color: var(--at-color-meta);\n+  }\n+\n+  .atk-ignore-btn {\n+    cursor: pointer;\n+    float: right;\n+\n+    &:hover {\n+      opacity: 0.8;\n+    }\n+  }\n+}\n+\n .atk-layer-dialog-wrap {\n   $formInputHeight: 30px;\n   @extend .atk-full-layer;"
    }
  ]
}
