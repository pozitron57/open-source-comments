{
  "sha": "de5e1b4000df8e8220a219a712b117541dc63676",
  "node_id": "C_kwDOCQOkhNoAKGRlNWUxYjQwMDBkZjhlODIyMGEyMTlhNzEyYjExNzU0MWRjNjM2NzY",
  "commit": {
    "author": {
      "name": "Otstar Lin",
      "email": "i@ixk.me",
      "date": "2024-04-02T14:29:08Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2024-04-02T14:29:08Z"
    },
    "message": "fix(ui/lifecycle): keep root element during destroy (#810)",
    "tree": {
      "sha": "ce3c08c0fd38ffa4fb5f12419aa84d006d6bdbc3",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/trees/ce3c08c0fd38ffa4fb5f12419aa84d006d6bdbc3"
    },
    "url": "https://api.github.com/repos/ArtalkJS/Artalk/git/commits/de5e1b4000df8e8220a219a712b117541dc63676",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsFcBAABCAAQBQJmDBY0CRC1aQ7uu5UhlAAAgrgQAC7DZvh/nmvPuy1a8bWjWQYq\n4jHJ6cdkFBgRRq4RIiNKb4ZENf/tiKRZezN3hi0JXGdtVl2i2zfejdCV6hakWJiI\ninWNW94f2ljfIpQd+ZT28c4y5HjiZpoqeGcTNE2//VObE8AgMOy88gUCEPHD9esX\nr4WpE8JS5L0WjCIpN/Sjf7S1C4Ck/GSuzMzqqAI+cLHpgfYnoeECxhixUt9Al8mi\nhqj8je34LfELG7g6YqDMeG1Z7D7iq1xnK2tXL65fzkHfhrmBkguQiOTFIFYnqoGg\nud7yCZ9U80NiMC1488Rkyz2QYWqCQWdidLFuFYsGXYUfPMcuDlxqWMBfmDuvXpNb\nE4eSylEhuBQuiuv6z9C6HHo/lO7UCfzyGWntW/8ZW6cuDP3XzfR8eRVexCDmpgB3\nthsSx8CD1YoKgRH2hYBa/DqCIsPJKvCZ7VX8/obDS5S2DK6sJC6D+Fy/ML2iqWim\nmQYMcxO568+jUHoCBnjUA1ux0pPDJequKOmKeMCR7RGDtBiLvItzBC8wy4H271LZ\nYWy3NPeeRlpnZK3vr29kQ8QxznAsR86iLzTlvboXqH//r+4TixOSHXiDtkq6kj8k\nsUeAfz49PjpqW9/7R4tr8JyJWk1IJB3iCGjM/3Tws6H7JmXrLaLGbOhQzbWHSXZS\nB7NRdDeh21/ZVsgB2D3d\n=fyJU\n-----END PGP SIGNATURE-----\n",
      "payload": "tree ce3c08c0fd38ffa4fb5f12419aa84d006d6bdbc3\nparent b60cb585b6fcb02a31a9beb230202eed98131997\nauthor Otstar Lin <i@ixk.me> 1712068148 +0800\ncommitter GitHub <noreply@github.com> 1712068148 +0800\n\nfix(ui/lifecycle): keep root element during destroy (#810)\n\n"
    }
  },
  "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/de5e1b4000df8e8220a219a712b117541dc63676",
  "html_url": "https://github.com/ArtalkJS/Artalk/commit/de5e1b4000df8e8220a219a712b117541dc63676",
  "comments_url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/de5e1b4000df8e8220a219a712b117541dc63676/comments",
  "author": {
    "login": "syfxlin",
    "id": 28844480,
    "node_id": "MDQ6VXNlcjI4ODQ0NDgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/28844480?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/syfxlin",
    "html_url": "https://github.com/syfxlin",
    "followers_url": "https://api.github.com/users/syfxlin/followers",
    "following_url": "https://api.github.com/users/syfxlin/following{/other_user}",
    "gists_url": "https://api.github.com/users/syfxlin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/syfxlin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/syfxlin/subscriptions",
    "organizations_url": "https://api.github.com/users/syfxlin/orgs",
    "repos_url": "https://api.github.com/users/syfxlin/repos",
    "events_url": "https://api.github.com/users/syfxlin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/syfxlin/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b60cb585b6fcb02a31a9beb230202eed98131997",
      "url": "https://api.github.com/repos/ArtalkJS/Artalk/commits/b60cb585b6fcb02a31a9beb230202eed98131997",
      "html_url": "https://github.com/ArtalkJS/Artalk/commit/b60cb585b6fcb02a31a9beb230202eed98131997"
    }
  ],
  "stats": {
    "total": 11,
    "additions": 5,
    "deletions": 6
  },
  "files": [
    {
      "sha": "5cd872f3552303e864ddfbb39b4ebff03f6a29a8",
      "filename": "ui/artalk/src/artalk.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/de5e1b4000df8e8220a219a712b117541dc63676/ui%2Fartalk%2Fsrc%2Fartalk.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/de5e1b4000df8e8220a219a712b117541dc63676/ui%2Fartalk%2Fsrc%2Fartalk.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Fsrc%2Fartalk.ts?ref=de5e1b4000df8e8220a219a712b117541dc63676",
      "patch": "@@ -59,7 +59,9 @@ export default class Artalk {\n   /** Destroy instance of Artalk */\n   public destroy() {\n     this.ctx.trigger('unmounted')\n-    this.ctx.$root.remove()\n+    while (this.ctx.$root.firstChild) {\n+      this.ctx.$root.removeChild(this.ctx.$root.firstChild)\n+    }\n   }\n \n   /** Add an event listener */"
    },
    {
      "sha": "12a181dd3ea45ed3e6b18783192eb4aa97806926",
      "filename": "ui/artalk/tests/ui-api.test.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 5,
      "changes": 7,
      "blob_url": "https://github.com/ArtalkJS/Artalk/blob/de5e1b4000df8e8220a219a712b117541dc63676/ui%2Fartalk%2Ftests%2Fui-api.test.ts",
      "raw_url": "https://github.com/ArtalkJS/Artalk/raw/de5e1b4000df8e8220a219a712b117541dc63676/ui%2Fartalk%2Ftests%2Fui-api.test.ts",
      "contents_url": "https://api.github.com/repos/ArtalkJS/Artalk/contents/ui%2Fartalk%2Ftests%2Fui-api.test.ts?ref=de5e1b4000df8e8220a219a712b117541dc63676",
      "patch": "@@ -158,10 +158,7 @@ describe('Artalk instance', () => {\n     artalk.destroy()\n \n     // detect if it is cleaned up\n-    const selectors = [`#${ContainerID}`, '.atk-layer-wrap']\n-    selectors.forEach(selector => {\n-      const el = document.querySelector(selector)\n-      expect(el).toBe(null)\n-    })\n+    expect(document.querySelector(`#${ContainerID}`)?.firstChild).toBe(null)\n+    expect(document.querySelector('.atk-layer-wrap')).toBe(null)\n   })\n })"
    }
  ]
}
