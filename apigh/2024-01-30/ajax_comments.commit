{
  "sha": "c593555b39845d11726f43e2bdcfbca1947e205a",
  "node_id": "MDY6Q29tbWl0MTAyMjI5NTU2OmM1OTM1NTViMzk4NDVkMTE3MjZmNDNlMmJkY2ZiY2ExOTQ3ZTIwNWE=",
  "commit": {
    "author": {
      "name": "Maksim Sergeev",
      "email": "hydroid89@gmail.com",
      "date": "2017-09-10T23:05:59Z"
    },
    "committer": {
      "name": "Maksim Sergeev",
      "email": "hydroid89@gmail.com",
      "date": "2017-09-10T23:05:59Z"
    },
    "message": "5",
    "tree": {
      "sha": "d9f7aa331b9141b32a4c0fddb3c5f98609608f60",
      "url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/git/trees/d9f7aa331b9141b32a4c0fddb3c5f98609608f60"
    },
    "url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/git/commits/c593555b39845d11726f43e2bdcfbca1947e205a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/commits/c593555b39845d11726f43e2bdcfbca1947e205a",
  "html_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/commit/c593555b39845d11726f43e2bdcfbca1947e205a",
  "comments_url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/commits/c593555b39845d11726f43e2bdcfbca1947e205a/comments",
  "author": {
    "login": "MaksimSergeev",
    "id": 16987415,
    "node_id": "MDQ6VXNlcjE2OTg3NDE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/16987415?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MaksimSergeev",
    "html_url": "https://github.com/MaksimSergeev",
    "followers_url": "https://api.github.com/users/MaksimSergeev/followers",
    "following_url": "https://api.github.com/users/MaksimSergeev/following{/other_user}",
    "gists_url": "https://api.github.com/users/MaksimSergeev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MaksimSergeev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MaksimSergeev/subscriptions",
    "organizations_url": "https://api.github.com/users/MaksimSergeev/orgs",
    "repos_url": "https://api.github.com/users/MaksimSergeev/repos",
    "events_url": "https://api.github.com/users/MaksimSergeev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MaksimSergeev/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "MaksimSergeev",
    "id": 16987415,
    "node_id": "MDQ6VXNlcjE2OTg3NDE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/16987415?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MaksimSergeev",
    "html_url": "https://github.com/MaksimSergeev",
    "followers_url": "https://api.github.com/users/MaksimSergeev/followers",
    "following_url": "https://api.github.com/users/MaksimSergeev/following{/other_user}",
    "gists_url": "https://api.github.com/users/MaksimSergeev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MaksimSergeev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MaksimSergeev/subscriptions",
    "organizations_url": "https://api.github.com/users/MaksimSergeev/orgs",
    "repos_url": "https://api.github.com/users/MaksimSergeev/repos",
    "events_url": "https://api.github.com/users/MaksimSergeev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MaksimSergeev/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e6fdaf5ceb1c142665226573bbe991e605506a6f",
      "url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/commits/e6fdaf5ceb1c142665226573bbe991e605506a6f",
      "html_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/commit/e6fdaf5ceb1c142665226573bbe991e605506a6f"
    }
  ],
  "stats": {
    "total": 37,
    "additions": 17,
    "deletions": 20
  },
  "files": [
    {
      "sha": "cf71e006a737dc7c1c47b91f844388e4f38fa248",
      "filename": "Comment.php",
      "status": "modified",
      "additions": 8,
      "deletions": 13,
      "changes": 21,
      "blob_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/blob/c593555b39845d11726f43e2bdcfbca1947e205a/Comment.php",
      "raw_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/raw/c593555b39845d11726f43e2bdcfbca1947e205a/Comment.php",
      "contents_url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/contents/Comment.php?ref=c593555b39845d11726f43e2bdcfbca1947e205a",
      "patch": "@@ -1,17 +1,14 @@\n <?php\n \n-class Comment\n-{\n+class Comment {\n     private $data = array();\n \n-    public function __construct($row)\n-    {\n+    public function __construct($row) {\n         $this->data = $row;\n     }\n \n     //\tThis method outputs the XHTML markup of the comment:\n-    public function markup()\n-    {\n+    public function markup() {\n         // Setting up an alias, so we don't have to write $this->data every time:\n         $d = &$this->data;\n \n@@ -35,8 +32,7 @@ public function markup()\n     }\n \n     // This method is used to validate the data sent via AJAX:\n-    public static function validate(&$arr)\n-    {\n+    public static function validate(&$arr) {\n \n         $errors = array();\n         $data = array();\n@@ -71,8 +67,8 @@ public static function validate(&$arr)\n \n         return true;\n     }\n-    public static function validateEdit(&$arr)\n-    {\n+    \n+    public static function validateEdit(&$arr) {\n \n         $errors = array();\n         $data = array();\n@@ -97,11 +93,10 @@ public static function validateEdit(&$arr)\n     }\n \n     //\tThis method is used internally FILTER_CALLBACK:\n-    private static function validate_text($str)\n-    {\n+    private static function validate_text($str) {\n+        \n         if (mb_strlen($str, 'utf8') < 1)\n             return false;\n-\n         // Encode all html special characters (<, >, \", & .. etc) and convert\n         // the new line characters to <br> tags:\n         $str = nl2br(htmlspecialchars($str));"
    },
    {
      "sha": "ef7e9dfb6c4d1a55691be8fde8a1ce79b049207e",
      "filename": "Db.php",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "blob_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/blob/c593555b39845d11726f43e2bdcfbca1947e205a/Db.php",
      "raw_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/raw/c593555b39845d11726f43e2bdcfbca1947e205a/Db.php",
      "contents_url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/contents/Db.php?ref=c593555b39845d11726f43e2bdcfbca1947e205a",
      "patch": "@@ -1,8 +1,7 @@\n <?php\n-class Db\n-{\n-    public static function getConnection()\n-    {\n+class Db {\n+\t\n+    public static function getConnection() {\n         $paramsPath = 'db_params.php';\n         $params = include($paramsPath);\n "
    },
    {
      "sha": "ed902fe4b5782d48c672e073db5a77ebce7ba281",
      "filename": "edit.php",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/blob/c593555b39845d11726f43e2bdcfbca1947e205a/edit.php",
      "raw_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/raw/c593555b39845d11726f43e2bdcfbca1947e205a/edit.php",
      "contents_url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/contents/edit.php?ref=c593555b39845d11726f43e2bdcfbca1947e205a",
      "patch": "@@ -1,6 +1,7 @@\n <?php\n error_reporting(E_ALL);\n require_once('autoload.php');\n+\n if(isset($_POST[\"com_id\"])) {\n \n     $arr[\"com_id\"] = $_POST[\"com_id\"];"
    },
    {
      "sha": "7d53201a82df94d14d12d8ee2640ebd4c41deb74",
      "filename": "select.php",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/blob/c593555b39845d11726f43e2bdcfbca1947e205a/select.php",
      "raw_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/raw/c593555b39845d11726f43e2bdcfbca1947e205a/select.php",
      "contents_url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/contents/select.php?ref=c593555b39845d11726f43e2bdcfbca1947e205a",
      "patch": "@@ -8,7 +8,8 @@\n     $output = array();\n     $db = Db::getConnection();\n     $db->beginTransaction();\n-    $stmt = $db->prepare(\"SELECT body FROM comments WHERE id = '\".$_POST[\"com_id\"].\"'\");\n+    $stmt = $db->prepare(\"SELECT body FROM comments WHERE id = :id\");\n+    $stmt->bindParam(':id', $_POST[\"com_id\"], PDO::PARAM_INT);\n     $stmt->execute();\n     $result = $stmt->fetchAll();\n     foreach ($result as $row) {"
    },
    {
      "sha": "381433ec6df26cd1069443b8043a9b1e38e65b7e",
      "filename": "sort.php",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/blob/c593555b39845d11726f43e2bdcfbca1947e205a/sort.php",
      "raw_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/raw/c593555b39845d11726f43e2bdcfbca1947e205a/sort.php",
      "contents_url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/contents/sort.php?ref=c593555b39845d11726f43e2bdcfbca1947e205a",
      "patch": "@@ -7,6 +7,7 @@\n     $db = Db::getConnection();\n     $query = \"SELECT * FROM comments ORDER BY \";\n     \n+    //probably bad practice :(\n     //switch key for query:\n     switch ($_POST[\"sort_id\"]) {\n         case 'Name A-Z': $query .= \"name ASC\";"
    },
    {
      "sha": "3a3ca0c3a3fc46d06df32fe62d34d22875d4571a",
      "filename": "submit.php",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/blob/c593555b39845d11726f43e2bdcfbca1947e205a/submit.php",
      "raw_url": "https://github.com/MaksimSergeev/AJAX-Comments-System/raw/c593555b39845d11726f43e2bdcfbca1947e205a/submit.php",
      "contents_url": "https://api.github.com/repos/MaksimSergeev/AJAX-Comments-System/contents/submit.php?ref=c593555b39845d11726f43e2bdcfbca1947e205a",
      "patch": "@@ -5,8 +5,8 @@\n $arr = array();\n $validates = Comment::validate($arr);\n \n-if($validates)\n-{\n+if($validates) {\n+\t\n \t//Insert to database\n     $db = Db::getConnection();\n     $db -> beginTransaction();"
    }
  ]
}
