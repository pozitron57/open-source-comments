{
  "sha": "5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
  "node_id": "MDY6Q29tbWl0MjQ0OTY0ODYxOjVmNGI5MWVlYWRmZTBkZmU4MDliMGViN2Y4NWZlMjQyZmRiYjMzNGE=",
  "commit": {
    "author": {
      "name": "Andros Fenollosa",
      "email": "tanrax@users.noreply.github.com",
      "date": "2021-02-22T22:11:57Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2021-02-22T22:11:57Z"
    },
    "message": "Merge pull request #9 from glosa/develop\n\nFix Delete request",
    "tree": {
      "sha": "2ebb7a4c8fc1a9ff628b29fea060974a4c2c049b",
      "url": "https://api.github.com/repos/glosa/glosa-server/git/trees/2ebb7a4c8fc1a9ff628b29fea060974a4c2c049b"
    },
    "url": "https://api.github.com/repos/glosa/glosa-server/git/commits/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgNCwtCRBK7hj4Ov3rIwAAdHIIAG7ybudp78eEuTuq4UdchM8K\n2rmNlffcyEHQQ//LLFS37J7PoOq5nVNa4A3FjzEDVFSGFpQ7ytvvm8STKhx14dnE\ntfsXdlVi060+ayceFa5td6y1oF64AmviEMzM4Tpjnlx1yYbEgCwDDtyKVHfiBTae\nrUsjAEFzK6P4Cuh+f2zGsfUBj/RIsqFvDYRw0PNoU3mEawky+Z8Rf2PXPO+hLb3x\nu4Q+kUhJHReqf62W1acOwSc3uLqb1syuQ64oISJCmGvlI6PZQ/D8MAl3q2efaKGR\nn+zIb51FK3p3WHZyUzCxp8t5MD2As+yLEDzik2tW3BwcR37szrX18RSwg0ceCIg=\n=8A2t\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 2ebb7a4c8fc1a9ff628b29fea060974a4c2c049b\nparent 2822a326cea46abc7f5b0d00b6da6261866ee86f\nparent e926379f543ba9b0b18a41e53fe7d91cae2ad970\nauthor Andros Fenollosa <tanrax@users.noreply.github.com> 1614031917 +0100\ncommitter GitHub <noreply@github.com> 1614031917 +0100\n\nMerge pull request #9 from glosa/develop\n\nFix Delete request"
    }
  },
  "url": "https://api.github.com/repos/glosa/glosa-server/commits/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
  "html_url": "https://github.com/glosa/glosa-server/commit/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
  "comments_url": "https://api.github.com/repos/glosa/glosa-server/commits/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/comments",
  "author": {
    "login": "tanrax",
    "id": 4553672,
    "node_id": "MDQ6VXNlcjQ1NTM2NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4553672?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tanrax",
    "html_url": "https://github.com/tanrax",
    "followers_url": "https://api.github.com/users/tanrax/followers",
    "following_url": "https://api.github.com/users/tanrax/following{/other_user}",
    "gists_url": "https://api.github.com/users/tanrax/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tanrax/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tanrax/subscriptions",
    "organizations_url": "https://api.github.com/users/tanrax/orgs",
    "repos_url": "https://api.github.com/users/tanrax/repos",
    "events_url": "https://api.github.com/users/tanrax/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tanrax/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2822a326cea46abc7f5b0d00b6da6261866ee86f",
      "url": "https://api.github.com/repos/glosa/glosa-server/commits/2822a326cea46abc7f5b0d00b6da6261866ee86f",
      "html_url": "https://github.com/glosa/glosa-server/commit/2822a326cea46abc7f5b0d00b6da6261866ee86f"
    },
    {
      "sha": "e926379f543ba9b0b18a41e53fe7d91cae2ad970",
      "url": "https://api.github.com/repos/glosa/glosa-server/commits/e926379f543ba9b0b18a41e53fe7d91cae2ad970",
      "html_url": "https://github.com/glosa/glosa-server/commit/e926379f543ba9b0b18a41e53fe7d91cae2ad970"
    }
  ],
  "stats": {
    "total": 24,
    "additions": 11,
    "deletions": 13
  },
  "files": [
    {
      "sha": "ebc1d19308b7f61ef10d80fdea5e729fde883fba",
      "filename": "README.md",
      "status": "modified",
      "additions": 2,
      "deletions": 4,
      "changes": 6,
      "blob_url": "https://github.com/glosa/glosa-server/blob/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/README.md",
      "raw_url": "https://github.com/glosa/glosa-server/raw/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/README.md",
      "contents_url": "https://api.github.com/repos/glosa/glosa-server/contents/README.md?ref=5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
      "patch": "@@ -532,7 +532,7 @@ Delete a comment for ID. [Authorization required](#authorization).\n **Method**: `DELETE`\n \n ``` sh\n-/api/v1/comments/\n+/api/v1/comments/{id}\n ```\n \n | Param | Value | Description |\n@@ -544,9 +544,7 @@ Delete a comment for ID. [Authorization required](#authorization).\n Delete comment with id `1234`.\n \n ``` sh\n-curl -XDELETE -H \"Authorization: Bearer mysecret\" -H \"Content-type: application/json\" -d '{\n-    \"id\": 1234\n-}' 'http://localhost:4000/api/v1/comments/\n+curl -XDELETE -H \"Authorization: Bearer mysecret\" -H \"Content-type: application/json\" http://localhost:4000/api/v1/comments/1234\n ```\n \n ##### Success response"
    },
    {
      "sha": "8149fcd485663e24111bd580a431d29de113c7db",
      "filename": "project.clj",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/glosa/glosa-server/blob/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/project.clj",
      "raw_url": "https://github.com/glosa/glosa-server/raw/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/project.clj",
      "contents_url": "https://api.github.com/repos/glosa/glosa-server/contents/project.clj?ref=5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
      "patch": "@@ -1,4 +1,4 @@\n-(defproject glosa \"1.3.6\"\n+(defproject glosa \"1.3.8\"\n   :description \"glosa\"\n   :url \"https://github.com/tanrax/glosa\"\n   :license {:name \"EPL-2.0 OR GPL-2.0-or-later WITH Classpath-exception-2.0\""
    },
    {
      "sha": "6bad908e7fa694ec5a368bd3ac199887c67c8890",
      "filename": "src/glosa/core.clj",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/glosa/glosa-server/blob/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/src%2Fglosa%2Fcore.clj",
      "raw_url": "https://github.com/glosa/glosa-server/raw/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/src%2Fglosa%2Fcore.clj",
      "contents_url": "https://api.github.com/repos/glosa/glosa-server/contents/src%2Fglosa%2Fcore.clj?ref=5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
      "patch": "@@ -13,7 +13,7 @@\n       (wrap-defaults (assoc-in site-defaults [:security :anti-forgery] false))\n       (wrap-cors\n         :access-control-allow-origin [(re-pattern (if (config :debug) \".*\" (config :domain-cli)))]\n-        :access-control-allow-methods [:get :post])\n+        :access-control-allow-methods [:get :post :put :delete])\n       (#(if (config :debug) (wrap-reload %) %))))\n \n (defn -main [& args]"
    },
    {
      "sha": "6949d2b2b870f8c4501190d70e172be3e085dea2",
      "filename": "src/glosa/urls.clj",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/glosa/glosa-server/blob/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/src%2Fglosa%2Furls.clj",
      "raw_url": "https://github.com/glosa/glosa-server/raw/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/src%2Fglosa%2Furls.clj",
      "contents_url": "https://api.github.com/repos/glosa/glosa-server/contents/src%2Fglosa%2Furls.clj?ref=5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
      "patch": "@@ -22,7 +22,7 @@\n            (POST \"/comments/latest/:pag\" [] view-private/get-latest-comments)\n            (POST \"/threads/search/:query\" [] view-private/get-search-threads)\n            (PUT \"/comments/\" [] view-private/update-comment)\n-           (DELETE \"/comments/\" [] view-private/delete-comment)))\n+           (DELETE \"/comments/:id\" [] view-private/delete-comment)))\n \n (defroutes resources-routes\n   ;; Resources (statics)"
    },
    {
      "sha": "4d81edcca0760f3ba9abc07647ff88ec3b00b2e8",
      "filename": "src/glosa/views/private.clj",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/glosa/glosa-server/blob/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/src%2Fglosa%2Fviews%2Fprivate.clj",
      "raw_url": "https://github.com/glosa/glosa-server/raw/5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a/src%2Fglosa%2Fviews%2Fprivate.clj",
      "contents_url": "https://api.github.com/repos/glosa/glosa-server/contents/src%2Fglosa%2Fviews%2Fprivate.clj?ref=5f4b91eeadfe0dfe809b0eb7f85fe242fdbb334a",
      "patch": "@@ -38,10 +38,10 @@\n     (response-401 req))))\n \n (defn delete-comment\n-\"Delete one comment\"\n-[req]\n-(let [id (:id (get-JSON req))]\n-  (if (check-bearer-token req)\n-    (render-JSON req {:deleted (database/delete-comment id) :id (bigint id)})\n-    (response-401 req))))\n+  \"Delete one comment\"\n+  [req]\n+  (let [id (-> req :params :id)]\n+    (if (check-bearer-token req)\n+      (render-JSON req {:deleted (database/delete-comment id) :id (bigint id)})\n+      (response-401 req))))\n "
    }
  ]
}
