{
  "sha": "8112f445f4f31d09e1357b797b265c229f684fa1",
  "node_id": "C_kwDOBtgov9oAKDgxMTJmNDQ1ZjRmMzFkMDllMTM1N2I3OTdiMjY1YzIyOWY2ODRmYTE",
  "commit": {
    "author": {
      "name": "Umputun",
      "email": "umputun@gmail.com",
      "date": "2025-10-01T07:02:46Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2025-10-01T07:02:46Z"
    },
    "message": "Merge pull request #1947 from schnerring/add-backup-docs\n\ndocs: improve backup instructions; closes #1613",
    "tree": {
      "sha": "8a8e49ffce84bcd568f7d6d4c670fb1ef541b836",
      "url": "https://api.github.com/repos/umputun/remark42/git/trees/8a8e49ffce84bcd568f7d6d4c670fb1ef541b836"
    },
    "url": "https://api.github.com/repos/umputun/remark42/git/commits/8112f445f4f31d09e1357b797b265c229f684fa1",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsFcBAABCAAQBQJo3NIWCRC1aQ7uu5UhlAAAi54QAH0EX12GMP3ee5e/QcORK0JP\nyzLWGNJ31arSUtkRFjltQLDVS91BtS7oxWXdwy3gbmtTt90o7l9MPYXD/emS8pPw\nxHtnx+OEEl874fnogle4iYp9Vgzws/vQmErTNNYlkQr2DNKiuZioXPA96+2dllvR\nGB0FSSEo/NdFgF3PHIVwK5guvoOndSEGQsb7zNFxKAJ2zHNT8k9nn9+Lnqm9xxZE\nyCDHtetndCfal1JQakBaYI2U7UD15yo3qmad0wInT0gPaDM3h3KVRoldVqYcUfDn\nw+tKHI8zfqG8Bsbut4WWZfXNBg5T+492dUAsHgHJvFJxtkanUzZmumLFbQLEY3Yt\nO7MosgnwO52a8H8T+qOFq1/7GZWaVX/bu+BxkGf1qi5R7Vvyxdy8LKdTob9pP4JX\n18leU8oCTljzmaacZPIj9w2eDBu8o2kRZZljb6dJARW5OW+uI+hkaQimQAXy+4XK\nuVvATpNnxVc/d4fjbpOkXdkVO5ZEjyGxQIZpfgFYGfaNdGE5UHtVnn7epNORISFU\nYq+o/RCdGV7Lz54Pf0RokcOMhQcqbUA0vjJ9ubcUPVWD4CbU+J8+jdOwJuycBIPh\nRnFG50zgoTz/hMK8fG9EDtfxQq5jsB2dwHrL080esLGLnX9dUyKG/zJp+SgZjDxX\nBwpYPUQsL1wqbOYRKJdS\n=Pz1d\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 8a8e49ffce84bcd568f7d6d4c670fb1ef541b836\nparent bd7bbe629fcfa9e071c2a766cd994780faf4d2dc\nparent ca8ab6681212ffd31d4b4ed19ff8e77741572974\nauthor Umputun <umputun@gmail.com> 1759302166 -0500\ncommitter GitHub <noreply@github.com> 1759302166 -0500\n\nMerge pull request #1947 from schnerring/add-backup-docs\n\ndocs: improve backup instructions; closes #1613",
      "verified_at": "2025-10-01T07:02:47Z"
    }
  },
  "url": "https://api.github.com/repos/umputun/remark42/commits/8112f445f4f31d09e1357b797b265c229f684fa1",
  "html_url": "https://github.com/umputun/remark42/commit/8112f445f4f31d09e1357b797b265c229f684fa1",
  "comments_url": "https://api.github.com/repos/umputun/remark42/commits/8112f445f4f31d09e1357b797b265c229f684fa1/comments",
  "author": {
    "login": "umputun",
    "id": 535880,
    "node_id": "MDQ6VXNlcjUzNTg4MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/535880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/umputun",
    "html_url": "https://github.com/umputun",
    "followers_url": "https://api.github.com/users/umputun/followers",
    "following_url": "https://api.github.com/users/umputun/following{/other_user}",
    "gists_url": "https://api.github.com/users/umputun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/umputun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/umputun/subscriptions",
    "organizations_url": "https://api.github.com/users/umputun/orgs",
    "repos_url": "https://api.github.com/users/umputun/repos",
    "events_url": "https://api.github.com/users/umputun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/umputun/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bd7bbe629fcfa9e071c2a766cd994780faf4d2dc",
      "url": "https://api.github.com/repos/umputun/remark42/commits/bd7bbe629fcfa9e071c2a766cd994780faf4d2dc",
      "html_url": "https://github.com/umputun/remark42/commit/bd7bbe629fcfa9e071c2a766cd994780faf4d2dc"
    },
    {
      "sha": "ca8ab6681212ffd31d4b4ed19ff8e77741572974",
      "url": "https://api.github.com/repos/umputun/remark42/commits/ca8ab6681212ffd31d4b4ed19ff8e77741572974",
      "html_url": "https://github.com/umputun/remark42/commit/ca8ab6681212ffd31d4b4ed19ff8e77741572974"
    }
  ],
  "stats": {
    "total": 4,
    "additions": 3,
    "deletions": 1
  },
  "files": [
    {
      "sha": "c18aebfab67720565aec807ec522bd1efe47bf42",
      "filename": "site/src/docs/backup/backup/index.md",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/umputun/remark42/blob/8112f445f4f31d09e1357b797b265c229f684fa1/site%2Fsrc%2Fdocs%2Fbackup%2Fbackup%2Findex.md",
      "raw_url": "https://github.com/umputun/remark42/raw/8112f445f4f31d09e1357b797b265c229f684fa1/site%2Fsrc%2Fdocs%2Fbackup%2Fbackup%2Findex.md",
      "contents_url": "https://api.github.com/repos/umputun/remark42/contents/site%2Fsrc%2Fdocs%2Fbackup%2Fbackup%2Findex.md?ref=8112f445f4f31d09e1357b797b265c229f684fa1",
      "patch": "@@ -18,3 +18,5 @@ This command creates `userbackup-{site ID}-{timestamp}.gz` file by default.\n ## Backup format\n \n The backup file is a text file with all exported comments separated by EOL. Each backup record is a valid JSON with all key/value unmarshaled from the `Comment` struct (see [here](https://remark42.com/docs/contributing/api/#commenting)).\n+\n+Avatars and images are stored separately. By default avatars are stored in `./var/avatars` and images in `./var/pictures` and need to be backed up, as well. For more information, check the [technical details of the backend documentation](https://remark42.com/docs/contributing/backend/#technical-details)."
    },
    {
      "sha": "f4578fdfb02d9011c63f06af7407aad38dfe6ff5",
      "filename": "site/src/docs/contributing/backend/index.md",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/umputun/remark42/blob/8112f445f4f31d09e1357b797b265c229f684fa1/site%2Fsrc%2Fdocs%2Fcontributing%2Fbackend%2Findex.md",
      "raw_url": "https://github.com/umputun/remark42/raw/8112f445f4f31d09e1357b797b265c229f684fa1/site%2Fsrc%2Fdocs%2Fcontributing%2Fbackend%2Findex.md",
      "contents_url": "https://api.github.com/repos/umputun/remark42/contents/site%2Fsrc%2Fdocs%2Fcontributing%2Fbackend%2Findex.md?ref=8112f445f4f31d09e1357b797b265c229f684fa1",
      "patch": "@@ -55,7 +55,7 @@ To run backend - `cd backend; go run app/main.go server --dbg --secret=12345 --u\n \n Data stored in [boltdb](https://github.com/etcd-io/bbolt) (embedded key/value database) files under `STORE_BOLT_PATH`. Each site is stored in a separate boltdb file.\n \n-To migrate/move Remark42 to another host, boltdb files and avatars directory `AVATAR_FS_PATH` should be transferred. Optionally, boltdb can be used to store avatars as well.\n+To migrate/move Remark42 to another host, these boltdb files must be transferred. Additionally, the avatars directory `AVATAR_FS_PATH` (default `./var/avatars`) and images directory `IMAGE_FS_PATH` (default `./var/pictures`) must be transferred. As an alternative to storing avatars and images in the file system, boltdb can be used by setting `AVATAR_TYPE` or `IMAGE_TYPE` to `bolt`. Files in the `IMAGE_FS_STAGING` directory can be safely ignored because they are moved to the image store between app restarts.\n \n The automatic backup process runs every 24h and exports all content in JSON-like format to `backup-remark-YYYYMMDD.gz`.\n "
    }
  ]
}
